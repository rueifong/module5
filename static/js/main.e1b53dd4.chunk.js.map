{"version":3,"sources":["pages/echart-example/mock-data.js","pages/echart-example/candlestick/index.jsx","pages/echart-example/bar/index.jsx","pages/echart-example/bar-line/index.jsx","pages/echart-example/index.jsx","environment/api.js","utils/errorNotification.js","component/stock-selector/index.jsx","component/chart/index.jsx","pages/echart-example/line/index.jsx","component/line-chart/index.jsx","pages/q1-chart/settings/math-model.js","pages/q1-chart/index.jsx","pages/case/create.jsx","pages/case/index.jsx","pages/frequent-data/index.jsx","pages/real-data-upload/index.jsx","pages/simulator/index.jsx","component/stock-date-picker/index.jsx","pages/table/downloadButton.jsx","pages/table/order-table/index.jsx","pages/table/price-table/index.jsx","pages/quick-order/read-file/index.jsx","pages/quick-order/index.jsx","pages/replay/index.jsx","pages/stock/modal.jsx","pages/stock/index.jsx","pages/role-manage/create.jsx","pages/role-manage/index.jsx","pages/investor-manage/create.jsx","pages/investor-manage/index.jsx","authData.js","App.jsx","index.js"],"names":["data","rawData","categoryData","values","i","length","push","splice","splitData","calculateMA","dayCount","result","len","sum","j","options","tooltip","trigger","axisPointer","type","legend","grid","left","right","bottom","xAxis","scale","boundaryGap","axisLine","onZero","splitLine","show","splitNumber","min","max","yAxis","splitArea","dataZoom","start","end","top","series","name","itemStyle","color","color0","borderColor","borderColor0","markPoint","label","normal","formatter","param","Math","round","value","coord","valueDim","markLine","symbol","symbolSize","emphasis","smooth","lineStyle","opacity","Candlestick","option","BarChart","originData","useState","yAxisMax","setYAxisMax","setData","useEffect","forEach","deta","abs","seriesName","containLabel","axisLabel","BarLineChart","console","log","backgroundColor","interval","align","index","Number","toFixed","axisTick","alignWithLabel","inside","endLabel","borderWidth","width","height","animation","className","EchartExample","defaultAxios","axios","create","baseURL","interceptors","request","use","config","token","localStorage","getItem","headers","api","login","url","method","logout","getOrder","postOrder","deleteOrder","getDisplay","getDisplayChart","getTransaction","getStock","postStock","putStock","deleteStock","resetStock","getVirtualOrder","postVirtualOrder","resetVirtualOrder","getVirtualOrderContainer","getContainer","postContainer","putContainer","deleteContainer","getGroup","getAvailableStock","getAvailableFutures","getRealDataStockOrder","postRealDataStockOrder","putRealDataStockOrder","deleteRealDataStockOrder","getRealDataStockOrderContent","postRealDataStockOrderContent","getRealDataStockTransaction","postRealDataStockTransaction","putRealDataStockTransaction","deleteRealDataStockTransaction","getRealDataStockTransactionContent","postRealDataStockTransactionContent","getRealDataStockDisplay","postRealDataStockDisplay","putRealDataStockDisplay","deleteRealDataStockDisplay","getRealDataStockDisplayContent","postRealDataStockDisplayContent","getRealDataFuturesOrder","postRealDataFuturesOrder","putRealDataFuturesOrder","deleteRealDataFuturesOrder","getRealDataFuturesOrderContent","postRealDataFuturesOrderContent","getRealDataFuturesTransaction","postRealDataFuturesTransaction","putRealDataFuturesTransaction","deleteRealDataFuturesTransaction","getRealDataFuturesTransactionContent","postRealDataFuturesTransactionContent","getRealDataFuturesDisplay","postRealDataFuturesDisplay","putRealDataFuturesDisplay","deleteRealDataFuturesDisplay","getRealDataFuturesDisplayContent","postRealDataFuturesDisplayContent","getRole","postRole","putRole","deleteRole","getRolePermission","getInvestor","postInvestor","putInvestor","deleteInvestor","errorNotification","error","statusCode","appEventEmitter","emit","notification","open","message","description","duration","Option","Select","StockSelector","style","mode","onChange","onEnd","isRealData","stocks","setStocks","e","placeholder","showSearch","onDropdownVisibleChange","id","map","stock","random","DisplayTickChart","showType","setShowType","marginLeft","LineChart","useRef","useMemo","DisplayTimeChart","lowestValueAndKey","obj","Object","entries","sort","lowestItems","renderQ1","Q1","buttonStatus","up","total","down","renderData","params","firstTime","timeData","Times","returnData","default_lambda_B","current_tab","default_alpha_B","default_alpha_A","default_lambda_A","default_lambda_B_K","default_theta_B","default_lambda_A_K","R_B","R_A","default_theta_A","default_theta_B1","default_theta_B2","default_theta_B3","default_theta_B4","default_theta_B5","mu_B","default_theta_A1","default_theta_A2","default_theta_A3","default_theta_A4","default_theta_A5","R_theta_B","R_theta_A","mu_A","n","p","batch_size","s","max_a","max_b","gap","minimum","next","kind","substring","Title","Typography","TabPane","Tabs","Q1Chart","setButtonStatus","nextTime","setNextTime","array_a","array_b","q1_array","setReturnData","setTimeData","default_B","default_A","setting","setSetting","columns","title","dataIndex","key","dataSource","renderReturnData","renderTimeData","setTimeout","handleInputChangeMuB","handleInputChangeMuA","onClick","background","level","centered","tab","step","Create","visible","setVisible","defaultValue","reset","Form","useForm","form","setFieldsValue","onOk","submit","onCancel","resetFields","okText","cancelText","layout","onFinish","catch","err","response","finally","initialValues","remember","Item","rules","required","Input","Search","Case","orederData","setOrderData","page","setPage","pageSize","setPageSize","totalSize","setTotalSize","setReset","editValue","setEditValue","checked","setChecked","searchCondition","setSearchCondition","then","res","content","rowSelection","selectedRowKeys","selectedRows","preserveSelectedRowKeys","justify","span","size","target","stockId","disabled","rowKey","record","render","dayjs","format","shape","icon","EditOutlined","DeleteOutlined","pagination","onShowSizeChange","cur","sticky","ORDER_FIELDS","TRANSACTION_FIELDS","DISPLAY_FIELDS","getFileTypeFields","fileType","getRealDataContentAPI","marketType","FILET_TYPE","header","DATE_FORMAT","SAMPLE_MODE","FrequentDataElement","group","setGroup","setFileType","datePickerMode","setDatePickerMode","unit","setUnit","isSample","setIsSample","dateFormat","setDateFormat","sampleMode","setSampleMode","fields","setFields","availableDate","setAvailableDate","startTime","setStartTime","endTime","setEndTime","isLoading","setIsLoading","isButtonLoading","setIsButtonLoading","isGroup","groupList","setGroupList","handleStockSelectorChange","useCallback","getRealDataAvailableAPI","Promise","all","datas","dateSet","Set","date","add","Array","from","spinning","padding","getTitle","display","undefined","marginTop","flexDirection","alignItems","ExclamationCircleOutlined","picker","onPanelChange","onOpenChange","allowClear","disabledDate","current","transferedCurrent","startOf","transferedEndTime","moment","includes","diff","time","transferedStartTime","floor","field","loading","stockIds","isNaN","futuresId","toISOString","endOf","fileName","transferData","keys","join","v","window","URL","createObjectURL","Blob","link","document","createElement","href","setAttribute","body","appendChild","click","revokeObjectURL","FrequentData","check","getGetRealDataApiByType","getPostRealDataApiByType","getPutRealDataApiByType","getDeleteRealDataApiByType","getPostRealDataContentApiByType","getRealData","postRealData","putRealData","deleteRealData","ids","postRealDataContent","UploadProgress","file","progress","setProgress","currentFile","setCurrentFile","isError","setIsError","isFirstUpload","restString","handleNextProgress","ADDER","partFile","slice","fileReader","FileReader","addEventListener","split","pop","insertArr","cnt","arr","readAsText","ContentContainer","fileList","setFileList","isLoadingList","setIsLoadingList","realData","setRealData","handleGetRealData","multiple","files","fileArray","fill","danger","Modal","closable","maskClosable","filter","isFinished","scroll","y","RealDataUpload","textAlign","marginBottom","justifyContent","OrderSender","orders","onReset","currentIndex","setCurrentIndex","isRunning","setIsRunnung","speed","setSpeed","timeOut","speedRef","sliderDelay","clearTimeout","handleTimeOut","currentOrder","nextOrder","realDataOrderId","order","investorId","sendOrder","delay","Date","parse","createdTime","isReset","isAutoDisplay","toString","RealDataSimulator","customResetStock","setOrders","setStockId","startMonth","setStartMonth","startDate","setStartDate","credentials","Headers","cmd","s_code","sc_type","year_month","month","day","dateTime","getTime","tempStockId","start_time","end_time","Simulator","StockDatePicker","onStockChange","onStartChange","onEndChange","showTime","tempTime","DownloadButton","apiName","csvFile","reduce","pre","encodeURI","OrderTable","PriceTable","buttonRef","React","createRef","QuickOrder","Component","timer","setIsRunning","containerData","setContainerData","quantity","setQuantity","timeRestriction","setTimeRestriction","isAutoTime","setDisplay","matchFiveTick","price","B1","A1","priceType","refreshDisplay","virtualOrderContainerId","sendMarketOrder","cancelOrder","subMethod","isGetLatest","newFiveTickRangeData","JSON","stringify","fiveTickRange","a","b","item","sellQuantity","buyQuantity","setInterval","clearInterval","marginRight","border","tickRange","range","investorBuyQuantity","matchPrice","investorSellQuantity","ReplayChart","interestRate","setInterestRate","volatility","setVolatility","isSet","setIsSet","isStart","setIsStart","isStockPanel","setIsStockPanel","currentStatus","setCurrentStatus","X","setX","Y","setY","t","setT","buttonText","setButtonText","setType","it","setIt","setTimer","longShort","setLongShort","volume","setVolume","strike","setStrike","maturity","setMaturity","cashFlow","setCashFlow","setCash","nt","t_now","S","startTimer","c","newY","stopTimer","alert","TypeSelectionChanged","currentType","updateOrderPanel","initialOrderPanel","typeNow","S0","K","r","tau","vol","exp","vanillaPrice","binaryPrice","T","zeta","vt","sqrt","d1","pow","d2","Nd1","N","Nd2","d","Nd","z","U1","U2","Z","cos","PI","R","generateGBM","StartButtonPushed","Group","nPortfolio","tableData","expireInd","expireIt","cost","dt","tt","cash","portfolioProfit","marketPrice","ind","k","profit","PlaceOrderPushed","CreateAndEdit","isVisible","setIsVisible","initVal","reload","axiosType","groupId","TYPE_MAPPING","Stock","selectStock","setSelectStock","reloadData","setReloadData","editData","setEditData","deleteAxios","noStyle","RangePicker","htmlType","permission","validator","_","resolve","reject","val","confirm","RoleManagement","roleData","setRoleData","permissionData","setPermissionData","showDeleteConfirm","okType","prev","curr","totalApiTime","permissions","role","restApiTime","other","parseInt","AUTH_MAPPING_DATA","investorData","setInvestorData","account","password","roleId","case","simulator","require","EventEmitter","App","setAuth","on","msg","removeItem","defaults","common","settingToken","path","component","ReactDOM","StrictMode","getElementById"],"mappings":"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","file":"static/js/main.e1b53dd4.chunk.js","sourcesContent":["export const data = splitData([\r\n  [\"2013/1/24\", 2320.26, 2320.26, 2287.3, 2362.94],\r\n  [\"2013/1/25\", 2300, 2291.3, 2288.26, 2308.38],\r\n  [\"2013/1/28\", 2295.35, 2346.5, 2295.35, 2346.92],\r\n  [\"2013/1/29\", 2347.22, 2358.98, 2337.35, 2363.8],\r\n  [\"2013/1/30\", 2360.75, 2382.48, 2347.89, 2383.76],\r\n  [\"2013/1/31\", 2383.43, 2385.42, 2371.23, 2391.82],\r\n  [\"2013/2/1\", 2377.41, 2419.02, 2369.57, 2421.15],\r\n  [\"2013/2/4\", 2425.92, 2428.15, 2417.58, 2440.38],\r\n  [\"2013/2/5\", 2411, 2433.13, 2403.3, 2437.42],\r\n  [\"2013/2/6\", 2432.68, 2434.48, 2427.7, 2441.73],\r\n  [\"2013/2/7\", 2430.69, 2418.53, 2394.22, 2433.89],\r\n  [\"2013/2/8\", 2416.62, 2432.4, 2414.4, 2443.03],\r\n  [\"2013/2/18\", 2441.91, 2421.56, 2415.43, 2444.8],\r\n  [\"2013/2/19\", 2420.26, 2382.91, 2373.53, 2427.07],\r\n  [\"2013/2/20\", 2383.49, 2397.18, 2370.61, 2397.94],\r\n  [\"2013/2/21\", 2378.82, 2325.95, 2309.17, 2378.82],\r\n  [\"2013/2/22\", 2322.94, 2314.16, 2308.76, 2330.88],\r\n  [\"2013/2/25\", 2320.62, 2325.82, 2315.01, 2338.78],\r\n  [\"2013/2/26\", 2313.74, 2293.34, 2289.89, 2340.71],\r\n  [\"2013/2/27\", 2297.77, 2313.22, 2292.03, 2324.63],\r\n  [\"2013/2/28\", 2322.32, 2365.59, 2308.92, 2366.16],\r\n  [\"2013/3/1\", 2364.54, 2359.51, 2330.86, 2369.65],\r\n  [\"2013/3/4\", 2332.08, 2273.4, 2259.25, 2333.54],\r\n  [\"2013/3/5\", 2274.81, 2326.31, 2270.1, 2328.14],\r\n  [\"2013/3/6\", 2333.61, 2347.18, 2321.6, 2351.44],\r\n  [\"2013/3/7\", 2340.44, 2324.29, 2304.27, 2352.02],\r\n  [\"2013/3/8\", 2326.42, 2318.61, 2314.59, 2333.67],\r\n  [\"2013/3/11\", 2314.68, 2310.59, 2296.58, 2320.96],\r\n  [\"2013/3/12\", 2309.16, 2286.6, 2264.83, 2333.29],\r\n  [\"2013/3/13\", 2282.17, 2263.97, 2253.25, 2286.33],\r\n  [\"2013/3/14\", 2255.77, 2270.28, 2253.31, 2276.22],\r\n  [\"2013/3/15\", 2269.31, 2278.4, 2250, 2312.08],\r\n  [\"2013/3/18\", 2267.29, 2240.02, 2239.21, 2276.05],\r\n  [\"2013/3/19\", 2244.26, 2257.43, 2232.02, 2261.31],\r\n  [\"2013/3/20\", 2257.74, 2317.37, 2257.42, 2317.86],\r\n  [\"2013/3/21\", 2318.21, 2324.24, 2311.6, 2330.81],\r\n  [\"2013/3/22\", 2321.4, 2328.28, 2314.97, 2332],\r\n  [\"2013/3/25\", 2334.74, 2326.72, 2319.91, 2344.89],\r\n  [\"2013/3/26\", 2318.58, 2297.67, 2281.12, 2319.99],\r\n  [\"2013/3/27\", 2299.38, 2301.26, 2289, 2323.48],\r\n  [\"2013/3/28\", 2273.55, 2236.3, 2232.91, 2273.55],\r\n  [\"2013/3/29\", 2238.49, 2236.62, 2228.81, 2246.87],\r\n  [\"2013/4/1\", 2229.46, 2234.4, 2227.31, 2243.95],\r\n  [\"2013/4/2\", 2234.9, 2227.74, 2220.44, 2253.42],\r\n  [\"2013/4/3\", 2232.69, 2225.29, 2217.25, 2241.34],\r\n  [\"2013/4/8\", 2196.24, 2211.59, 2180.67, 2212.59],\r\n  [\"2013/4/9\", 2215.47, 2225.77, 2215.47, 2234.73],\r\n  [\"2013/4/10\", 2224.93, 2226.13, 2212.56, 2233.04],\r\n  [\"2013/4/11\", 2236.98, 2219.55, 2217.26, 2242.48],\r\n  [\"2013/4/12\", 2218.09, 2206.78, 2204.44, 2226.26],\r\n  [\"2013/4/15\", 2199.91, 2181.94, 2177.39, 2204.99],\r\n  [\"2013/4/16\", 2169.63, 2194.85, 2165.78, 2196.43],\r\n  [\"2013/4/17\", 2195.03, 2193.8, 2178.47, 2197.51],\r\n  [\"2013/4/18\", 2181.82, 2197.6, 2175.44, 2206.03],\r\n  [\"2013/4/19\", 2201.12, 2244.64, 2200.58, 2250.11],\r\n  [\"2013/4/22\", 2236.4, 2242.17, 2232.26, 2245.12],\r\n  [\"2013/4/23\", 2242.62, 2184.54, 2182.81, 2242.62],\r\n  [\"2013/4/24\", 2187.35, 2218.32, 2184.11, 2226.12],\r\n  [\"2013/4/25\", 2213.19, 2199.31, 2191.85, 2224.63],\r\n  [\"2013/4/26\", 2203.89, 2177.91, 2173.86, 2210.58],\r\n  [\"2013/5/2\", 2170.78, 2174.12, 2161.14, 2179.65],\r\n  [\"2013/5/3\", 2179.05, 2205.5, 2179.05, 2222.81],\r\n  [\"2013/5/6\", 2212.5, 2231.17, 2212.5, 2236.07],\r\n  [\"2013/5/7\", 2227.86, 2235.57, 2219.44, 2240.26],\r\n  [\"2013/5/8\", 2242.39, 2246.3, 2235.42, 2255.21],\r\n  [\"2013/5/9\", 2246.96, 2232.97, 2221.38, 2247.86],\r\n  [\"2013/5/10\", 2228.82, 2246.83, 2225.81, 2247.67],\r\n  [\"2013/5/13\", 2247.68, 2241.92, 2231.36, 2250.85],\r\n  [\"2013/5/14\", 2238.9, 2217.01, 2205.87, 2239.93],\r\n  [\"2013/5/15\", 2217.09, 2224.8, 2213.58, 2225.19],\r\n  [\"2013/5/16\", 2221.34, 2251.81, 2210.77, 2252.87],\r\n  [\"2013/5/17\", 2249.81, 2282.87, 2248.41, 2288.09],\r\n  [\"2013/5/20\", 2286.33, 2299.99, 2281.9, 2309.39],\r\n  [\"2013/5/21\", 2297.11, 2305.11, 2290.12, 2305.3],\r\n  [\"2013/5/22\", 2303.75, 2302.4, 2292.43, 2314.18],\r\n  [\"2013/5/23\", 2293.81, 2275.67, 2274.1, 2304.95],\r\n  [\"2013/5/24\", 2281.45, 2288.53, 2270.25, 2292.59],\r\n  [\"2013/5/27\", 2286.66, 2293.08, 2283.94, 2301.7],\r\n  [\"2013/5/28\", 2293.4, 2321.32, 2281.47, 2322.1],\r\n  [\"2013/5/29\", 2323.54, 2324.02, 2321.17, 2334.33],\r\n  [\"2013/5/30\", 2316.25, 2317.75, 2310.49, 2325.72],\r\n  [\"2013/5/31\", 2320.74, 2300.59, 2299.37, 2325.53],\r\n  [\"2013/6/3\", 2300.21, 2299.25, 2294.11, 2313.43],\r\n  [\"2013/6/4\", 2297.1, 2272.42, 2264.76, 2297.1],\r\n  [\"2013/6/5\", 2270.71, 2270.93, 2260.87, 2276.86],\r\n  [\"2013/6/6\", 2264.43, 2242.11, 2240.07, 2266.69],\r\n  [\"2013/6/7\", 2242.26, 2210.9, 2205.07, 2250.63],\r\n  [\"2013/6/13\", 2190.1, 2148.35, 2126.22, 2190.1],\r\n]);\r\nfunction splitData(rawData) {\r\n  var categoryData = [];\r\n  var values = [];\r\n  for (var i = 0; i < rawData.length; i++) {\r\n    categoryData.push(rawData[i].splice(0, 1)[0]);\r\n    values.push(rawData[i]);\r\n  }\r\n  return {\r\n    categoryData: categoryData,\r\n    values: values,\r\n  };\r\n}","import React from \"react\";\r\nimport ReactECharts from \"echarts-for-react\";\r\nimport { data } from \"../mock-data\";\r\n\r\nfunction calculateMA(dayCount) {\r\n  var result = [];\r\n  for (var i = 0, len = data.values.length; i < len; i++) {\r\n    if (i < dayCount) {\r\n      result.push(\"-\");\r\n      continue;\r\n    }\r\n    var sum = 0;\r\n    for (var j = 0; j < dayCount; j++) {\r\n      sum += data.values[i - j][1];\r\n    }\r\n    result.push(sum / dayCount);\r\n  }\r\n  return result;\r\n}\r\nconst options = {\r\n  tooltip: {\r\n    trigger: \"axis\",\r\n    axisPointer: {\r\n      type: \"cross\",\r\n    },\r\n  },\r\n  legend: {\r\n    data: [\"日K\", \"MA5\", \"MA10\", \"MA20\", \"MA30\"],\r\n  },\r\n  grid: {\r\n    left: \"10%\",\r\n    right: \"10%\",\r\n    bottom: \"15%\",\r\n  },\r\n  xAxis: {\r\n    type: \"category\",\r\n    data: data.categoryData,\r\n    scale: true,\r\n    boundaryGap: false,\r\n    axisLine: { onZero: false },\r\n    splitLine: { show: false },\r\n    splitNumber: 20,\r\n    min: \"dataMin\",\r\n    max: \"dataMax\",\r\n  },\r\n  yAxis: {\r\n    scale: true,\r\n    splitArea: {\r\n      show: true,\r\n    },\r\n  },\r\n  dataZoom: [\r\n    {\r\n      type: \"inside\",\r\n      start: 50,\r\n      end: 100,\r\n    },\r\n    {\r\n      show: true,\r\n      type: \"slider\",\r\n      top: \"90%\",\r\n      start: 50,\r\n      end: 100,\r\n    },\r\n  ],\r\n  series: [\r\n    {\r\n      name: \"日K\",\r\n      type: \"candlestick\",\r\n      data: data.values,\r\n      itemStyle: {\r\n        color: \"#ec0000\",\r\n        color0: \"#00da3c\",\r\n        borderColor: \"#8A0000\",\r\n        borderColor0: \"#008F28\",\r\n      },\r\n      markPoint: {\r\n        label: {\r\n          normal: {\r\n            formatter: function (param) {\r\n              return param != null ? Math.round(param.value) : \"\";\r\n            },\r\n          },\r\n        },\r\n        data: [\r\n          {\r\n            name: \"XX標點\",\r\n            coord: [\"2013/5/31\", 2300],\r\n            value: 2300,\r\n            itemStyle: {\r\n              color: \"rgb(41,60,85)\",\r\n            },\r\n          },\r\n          {\r\n            name: \"highest value\",\r\n            type: \"max\",\r\n            valueDim: \"highest\",\r\n          },\r\n          {\r\n            name: \"lowest value\",\r\n            type: \"min\",\r\n            valueDim: \"lowest\",\r\n          },\r\n          {\r\n            name: \"average value on close\",\r\n            type: \"average\",\r\n            valueDim: \"close\",\r\n          },\r\n        ],\r\n        tooltip: {\r\n          formatter: function (param) {\r\n            return param.name + \"<br>\" + (param.data.coord || \"\");\r\n          },\r\n        },\r\n      },\r\n      markLine: {\r\n        symbol: [\"none\", \"none\"],\r\n        data: [\r\n          [\r\n            {\r\n              name: \"from lowest to highest\",\r\n              type: \"min\",\r\n              valueDim: \"lowest\",\r\n              symbol: \"circle\",\r\n              symbolSize: 10,\r\n              label: {\r\n                show: false,\r\n              },\r\n              emphasis: {\r\n                label: {\r\n                  show: false,\r\n                },\r\n              },\r\n            },\r\n            {\r\n              type: \"max\",\r\n              valueDim: \"highest\",\r\n              symbol: \"circle\",\r\n              symbolSize: 10,\r\n              label: {\r\n                show: false,\r\n              },\r\n              emphasis: {\r\n                label: {\r\n                  show: false,\r\n                },\r\n              },\r\n            },\r\n          ],\r\n          {\r\n            name: \"min line on close\",\r\n            type: \"min\",\r\n            valueDim: \"close\",\r\n          },\r\n          {\r\n            name: \"max line on close\",\r\n            type: \"max\",\r\n            valueDim: \"close\",\r\n          },\r\n        ],\r\n      },\r\n    },\r\n    {\r\n      name: \"MA5\",\r\n      type: \"line\",\r\n      data: calculateMA(5),\r\n      smooth: true,\r\n      lineStyle: {\r\n        opacity: 0.5,\r\n      },\r\n    },\r\n    {\r\n      name: \"MA10\",\r\n      type: \"line\",\r\n      data: calculateMA(10),\r\n      smooth: true,\r\n      lineStyle: {\r\n        opacity: 0.5,\r\n      },\r\n    },\r\n    {\r\n      name: \"MA20\",\r\n      type: \"line\",\r\n      data: calculateMA(20),\r\n      smooth: true,\r\n      lineStyle: {\r\n        opacity: 0.5,\r\n      },\r\n    },\r\n    {\r\n      name: \"MA30\",\r\n      type: \"line\",\r\n      data: calculateMA(30),\r\n      smooth: true,\r\n      lineStyle: {\r\n        opacity: 0.5,\r\n      },\r\n    },\r\n  ],\r\n};\r\nconst Candlestick = () => {\r\n  return <ReactECharts option={options} />;\r\n};\r\n\r\nexport default Candlestick;\r\n","import React, { useEffect, useState } from \"react\";\r\nimport ReactECharts from \"echarts-for-react\";\r\n\r\nconst BarChart = ({ originData = {} }) => {\r\n  const [yAxisMax, setYAxisMax] = useState(20);\r\n  const [data, setData] = useState({});\r\n  const [center, setCenter] = useState(0);\r\n\r\n  useEffect(() => {\r\n    setData(originData);\r\n\r\n    if (data?.series?.length) {\r\n      let max = 10;\r\n      data.series.forEach((deta) => {\r\n        if (Math.abs(deta) > max) max = Math.abs(deta) + 10;\r\n      });\r\n      setYAxisMax(max);\r\n    }\r\n  }, [originData]);\r\n\r\n  const options = {\r\n    tooltip: {\r\n      trigger: \"axis\",\r\n      axisPointer: {\r\n        type: \"shadow\",\r\n      },\r\n      formatter: (param) => {\r\n        if (typeof param[0].data === \"string\") return \"\";\r\n        return (\r\n          \"Price: \" +\r\n          param[0].name +\r\n          \"<br/>\" +\r\n          param[0].seriesName +\r\n          \" : \" +\r\n          Math.abs(param[0].data)\r\n        );\r\n      },\r\n    },\r\n    grid: {\r\n      left: \"3%\",\r\n      right: \"4%\",\r\n      bottom: \"3%\",\r\n      containLabel: true,\r\n    },\r\n    xAxis: [\r\n      {\r\n        type: \"category\",\r\n        data: data.xAxis,\r\n      },\r\n    ],\r\n    yAxis: [\r\n      {\r\n        type: \"value\",\r\n        splitNumber: 10,\r\n        max: yAxisMax,\r\n        min: -yAxisMax,\r\n        axisLabel: {\r\n          formatter: (value) => {\r\n            return Math.abs(value);\r\n          },\r\n        },\r\n      },\r\n    ],\r\n    series: [\r\n      {\r\n        name: \"委託量\",\r\n        type: \"bar\",\r\n        data: data.series,\r\n        itemStyle: {\r\n          color: (param) => {\r\n            return param.data > 0 ? \"green\" : \"red\";\r\n          },\r\n        },\r\n        // markPoint: {\r\n        //   symbol:\r\n        //     \"path://M479.046,283.925c-1.664-3.989-5.547-6.592-9.856-6.592H352.305V10.667C352.305,4.779,347.526,0,341.638,0H170.971 c-5.888,0-10.667,4.779-10.667,10.667v266.667H42.971c-4.309,0-8.192,2.603-9.856,6.571c-1.643,3.989-0.747,8.576,2.304,11.627 l212.8,213.504c2.005,2.005,4.715,3.136,7.552,3.136s5.547-1.131,7.552-3.115l213.419-213.504 C479.793,292.501,480.71,287.915,479.046,283.925z\",\r\n        //   symbolSize: 30,\r\n        //   itemStyle: {\r\n        //     color: \"black\",\r\n        //   },\r\n        //   data: [\r\n        //     {\r\n        //       coord: [`${originData.matchPrice}`, 0],\r\n        //       value: originData.matchPrice,\r\n        //       y: 50,\r\n        //       name: \"qwe\",\r\n        //     },\r\n        //   ],\r\n        // },\r\n      },\r\n    ],\r\n  };\r\n  return <ReactECharts option={options} />;\r\n};\r\n\r\nexport default BarChart;\r\n","import React, { useState } from \"react\";\r\nimport ReactECharts from \"echarts-for-react\";\r\nimport dayjs from \"dayjs\";\r\n\r\nconst BarLineChart = ({\r\n  data = { xAxis: [], yAxis: [] },\r\n}) => {\r\n  console.log('data', data);\r\n  const [dataZoom, setDataZoom] = useState(10);\r\n  const [dateFormat, setDateFormat] = useState(4);\r\n  const options = {\r\n    tooltip: {\r\n      trigger: \"axis\",\r\n      axisPointer: {\r\n        type: \"cross\",\r\n        label: {\r\n          backgroundColor: \"#283b56\",\r\n        },\r\n      },\r\n    },\r\n    grid: {\r\n      left: \"3%\",\r\n      right: \"4%\",\r\n      containLabel: true,\r\n    },\r\n    legend: {\r\n      data: [\"成交量\"],\r\n    },\r\n    // backgroundColor: \"black\",\r\n    xAxis: [\r\n      {\r\n        type: \"category\",\r\n        boundaryGap: true,\r\n        data: data.xAxis,\r\n        axisLabel: {\r\n          interval: 100,\r\n          align: 'center',\r\n          formatter: (value, index) => {\r\n            return Number(value).toFixed(1);\r\n          },\r\n        },\r\n        axisTick: {\r\n          show: true,\r\n          alignWithLabel: true,\r\n          interval: 100,\r\n          inside: true,\r\n        }\r\n      },\r\n    ],\r\n    yAxis: [\r\n      {\r\n        type: \"value\",\r\n        // scale: true,\r\n        // name: \"成交價\",\r\n      },\r\n    ],\r\n    // dataZoom: [\r\n    //   {\r\n    //     show: true,\r\n    //     realtime: true,\r\n    //     startValue: dataZoom ? data.xAxis.length - dataZoom : 0,\r\n    //     endValue: data.xAxis.length - 1,\r\n    //     onChange: (val) => {\r\n    //       console.log(val);\r\n    //     },\r\n    //   },\r\n    // ],\r\n    series: [\r\n      {\r\n        name: \"成交價\",\r\n        type: \"line\",\r\n        // step: \"end\",\r\n        data: data.yAxis,\r\n        endLabel: {\r\n          show: true,\r\n          borderColor: 'red',\r\n          borderWidth: '3px',\r\n          width: '3px',\r\n          height: '3px',\r\n          backgroundColor: 'red',\r\n        },\r\n\r\n        markPoint: {\r\n          animation: false,\r\n          symbol: 'circle',\r\n          data: [\r\n            { \r\n              xAxis: (data.yAxis.length > 0) ? data.yAxis.length-1 : 0,\r\n              yAxis: (data.yAxis.length > 0) ? data.yAxis[data.yAxis.length-1] : 0,\r\n              symbolSize: 6,\r\n              itemStyle: {\r\n                opacity: 1,\r\n                color: '#ff4d4f',\r\n              },\r\n            }\r\n          ]\r\n        },\r\n        // itemStyle: {\r\n        //   color: \"black\",\r\n        // },\r\n      },\r\n    ],\r\n  };\r\n\r\n  return (\r\n    <>\r\n      <ReactECharts className=\"border\" option={options} />\r\n    </>\r\n  );\r\n};\r\n\r\nexport default BarLineChart;\r\n","import React, { useEffect, useRef, useState } from \"react\";\r\nimport Candlestick from \"./candlestick\";\r\nimport BarChart from \"./bar\";\r\nimport BarLineChart from \"./bar-line\";\r\n\r\nconst EchartExample = () => {\r\n  return (\r\n    <div>\r\n      <Candlestick />\r\n      <BarChart\r\n        data={{\r\n          100: 15,\r\n          102: 11,\r\n          108: 23,\r\n          109: 2,\r\n          111: 12,\r\n        }}\r\n      />\r\n      <BarLineChart />\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default EchartExample;\r\n","import axios from \"axios\";\r\n\r\n\r\nfunction apiUrl() {\r\n  switch (process.env.NODE_ENV === \"development\") {\r\n    case \"production\":\r\n      return \"http://140.118.118.173:20023/\";\r\n    default:\r\n    case \"development\":\r\n      return \"http://140.118.118.173:20023/\";\r\n  }\r\n}\r\n\r\nexport const defaultAxios = axios.create({\r\n  baseURL: apiUrl(),\r\n  // baseURL: \"http://localhost:8080/\",\r\n  // baseURL: \"http://192.168.1.3:8080/\",\r\n});\r\nexport function settingToken(token) {\r\n  defaultAxios.defaults.headers.common[\"token\"] = token;\r\n}\r\n\r\ndefaultAxios.interceptors.request.use((config) => {\r\n  const token = localStorage.getItem(\"token\");\r\n  if (!config.headers.token) config.headers.token = token;\r\n  return config;\r\n});\r\n\r\n// api\r\n\r\nexport const api = {\r\n  login: { url: \"api/investor/login\", method: \"POST\" },\r\n  logout: { url: \"api/investor/logout\", method: \"POST\" },\r\n\r\n  getOrder: { url: \"api/order\", method: \"GET\" },\r\n  postOrder: { url: \"api/order\", method: \"POST\" },\r\n  deleteOrder: { url: \"api/order\", method: \"DELETE\" },\r\n  getDisplay: { url: \"api/display\", method: \"GET\" },\r\n  getDisplayChart: { url: \"api/display/chart\", method: \"GET\" },\r\n  getTransaction: { url: \"api/transaction\", method: \"GET\" },\r\n  getStock: { url: \"api/stock\", method: \"GET\" },\r\n  postStock: { url: \"api/stock\", method: \"POST\" },\r\n  putStock: { url: \"api/stock\", method: \"PUT\" },\r\n  deleteStock: { url: \"api/stock\", method: \"DELETE\" },\r\n  resetStock: { url: \"api/stock/reset\", method: \"PUT\" },\r\n  getVirtualOrder: { url: \"api/virtualOrder\", method: \"GET\" },\r\n  postVirtualOrder: { url: \"api/virtualOrder\", method: \"POST\" },\r\n  resetVirtualOrder: { url: \"api/virtualOrder\", method: \"PUT\" },\r\n  getVirtualOrderContainer: {\r\n    url: \"api/virtualOrder/container\",\r\n    method: \"GET\",\r\n  },\r\n\r\n  getContainer: { url: \"api/virtualOrder/container\", method: \"GET\" },\r\n  postContainer: { url: \"api/virtualOrder/container\", method: \"POST\" },\r\n  putContainer: { url: \"api/virtualOrder/container\", method: \"PUT\" },\r\n  deleteContainer: {\r\n    url: \"api/virtualOrder/container\",\r\n    method: \"DELETE\",\r\n  },\r\n  getGroup: { url: \"api/group\", method: \"GET\" },\r\n\r\n  //Available -----\r\n  getAvailableStock: {\r\n    url: \"api/available/stock\",\r\n    method: \"GET\",\r\n  },\r\n\r\n  getAvailableFutures: {\r\n    url: \"api/available/futures\",\r\n    method: \"GET\",\r\n  },\r\n  //Available -----\r\n\r\n  //Real data -----\r\n  getRealDataStockOrder: { url: \"api/real-data/stock/order\", method: \"GET\" },\r\n  postRealDataStockOrder: { url: \"api/real-data/stock/order\", method: \"POST\" },\r\n  putRealDataStockOrder: { url: \"api/real-data/stock/order\", method: \"PUT\" },\r\n  deleteRealDataStockOrder: {\r\n    url: \"api/real-data/stock/order\",\r\n    method: \"DELETE\",\r\n  },\r\n  getRealDataStockOrderContent: {\r\n    url: \"api/real-data/stock/order/content\",\r\n    method: \"GET\",\r\n  },\r\n  postRealDataStockOrderContent: {\r\n    url: \"api/real-data/stock/order/content\",\r\n    method: \"POST\",\r\n  },\r\n\r\n  getRealDataStockTransaction: {\r\n    url: \"api/real-data/stock/transaction\",\r\n    method: \"GET\",\r\n  },\r\n  postRealDataStockTransaction: {\r\n    url: \"api/real-data/stock/transaction\",\r\n    method: \"POST\",\r\n  },\r\n  putRealDataStockTransaction: {\r\n    url: \"api/real-data/stock/transaction\",\r\n    method: \"PUT\",\r\n  },\r\n  deleteRealDataStockTransaction: {\r\n    url: \"api/real-data/stock/transaction\",\r\n    method: \"DELETE\",\r\n  },\r\n  getRealDataStockTransactionContent: {\r\n    url: \"api/real-data/stock/transaction/content\",\r\n    method: \"GET\",\r\n  },\r\n  postRealDataStockTransactionContent: {\r\n    url: \"api/real-data/stock/transaction/content\",\r\n    method: \"POST\",\r\n  },\r\n\r\n  getRealDataStockDisplay: {\r\n    url: \"api/real-data/stock/display\",\r\n    method: \"GET\",\r\n  },\r\n  postRealDataStockDisplay: {\r\n    url: \"api/real-data/stock/display\",\r\n    method: \"POST\",\r\n  },\r\n  putRealDataStockDisplay: {\r\n    url: \"api/real-data/stock/display\",\r\n    method: \"PUT\",\r\n  },\r\n  deleteRealDataStockDisplay: {\r\n    url: \"api/real-data/stock/display\",\r\n    method: \"DELETE\",\r\n  },\r\n  getRealDataStockDisplayContent: {\r\n    url: \"api/real-data/stock/display/content\",\r\n    method: \"GET\",\r\n  },\r\n  postRealDataStockDisplayContent: {\r\n    url: \"api/real-data/stock/display/content\",\r\n    method: \"POST\",\r\n  },\r\n\r\n  getRealDataFuturesOrder: {\r\n    url: \"api/real-data/futures/order\",\r\n    method: \"GET\",\r\n  },\r\n  postRealDataFuturesOrder: {\r\n    url: \"api/real-data/futures/order\",\r\n    method: \"POST\",\r\n  },\r\n  putRealDataFuturesOrder: {\r\n    url: \"api/real-data/futures/order\",\r\n    method: \"PUT\",\r\n  },\r\n  deleteRealDataFuturesOrder: {\r\n    url: \"api/real-data/futures/order\",\r\n    method: \"DELETE\",\r\n  },\r\n  getRealDataFuturesOrderContent: {\r\n    url: \"api/real-data/futures/order/content\",\r\n    method: \"GET\",\r\n  },\r\n  postRealDataFuturesOrderContent: {\r\n    url: \"api/real-data/futures/order/content\",\r\n    method: \"POST\",\r\n  },\r\n\r\n  getRealDataFuturesTransaction: {\r\n    url: \"api/real-data/futures/transaction\",\r\n    method: \"GET\",\r\n  },\r\n  postRealDataFuturesTransaction: {\r\n    url: \"api/real-data/futures/transaction\",\r\n    method: \"POST\",\r\n  },\r\n  putRealDataFuturesTransaction: {\r\n    url: \"api/real-data/futures/transaction\",\r\n    method: \"PUT\",\r\n  },\r\n  deleteRealDataFuturesTransaction: {\r\n    url: \"api/real-data/futures/transaction\",\r\n    method: \"DELETE\",\r\n  },\r\n  getRealDataFuturesTransactionContent: {\r\n    url: \"api/real-data/futures/transaction/content\",\r\n    method: \"GET\",\r\n  },\r\n  postRealDataFuturesTransactionContent: {\r\n    url: \"api/real-data/futures/transaction/content\",\r\n    method: \"POST\",\r\n  },\r\n\r\n  getRealDataFuturesDisplay: {\r\n    url: \"api/real-data/futures/display\",\r\n    method: \"GET\",\r\n  },\r\n  postRealDataFuturesDisplay: {\r\n    url: \"api/real-data/futures/display\",\r\n    method: \"POST\",\r\n  },\r\n  putRealDataFuturesDisplay: {\r\n    url: \"api/real-data/futures/display\",\r\n    method: \"PUT\",\r\n  },\r\n  deleteRealDataFuturesDisplay: {\r\n    url: \"api/real-data/futures/display\",\r\n    method: \"DELETE\",\r\n  },\r\n  getRealDataFuturesDisplayContent: {\r\n    url: \"api/real-data/futures/display/content\",\r\n    method: \"GET\",\r\n  },\r\n  postRealDataFuturesDisplayContent: {\r\n    url: \"api/real-data/futures/display/content\",\r\n    method: \"POST\",\r\n  },\r\n  //Real data -----\r\n\r\n  getRole: { url: \"api/rbac/role\", method: \"GET\" },\r\n  postRole: { url: \"api/rbac/role\", method: \"POST\" },\r\n  putRole: { url: \"api/rbac/role\", method: \"PUT\" },\r\n  deleteRole: { url: \"api/rbac/role\", method: \"DELETE\" },\r\n  getRolePermission: { url: \"api/rbac/permission\", method: \"GET\" },\r\n\r\n  getInvestor: { url: \"api/investor\", method: \"GET\" },\r\n  postInvestor: { url: \"api/investor\", method: \"POST\" },\r\n  putInvestor: { url: \"api/investor\", method: \"PUT\" },\r\n  deleteInvestor: { url: \"api/investor\", method: \"DELETE\" },\r\n};\r\n","import { notification } from \"antd\";\r\nimport { appEventEmitter } from \"../App\";\r\n\r\nfunction errorNotification(error) {\r\n  if (error?.statusCode === 401) {\r\n    appEventEmitter.emit(\"unauthorization\");\r\n  }\r\n  notification.open({\r\n    type: \"error\",\r\n    message: error?.statusCode,\r\n    description: error?.message,\r\n    duration: 3,\r\n  });\r\n}\r\n\r\nexport default errorNotification;\r\n","import { Select } from \"antd\";\r\nimport { useEffect, useState } from \"react\";\r\nimport { api, defaultAxios } from \"../../environment/api\";\r\nimport errorNotification from \"../../utils/errorNotification\";\r\n\r\nconst { Option } = Select;\r\nexport const StockSelector = ({ style, mode, onChange, isRealData, onEnd }) => {\r\n  const [stocks, setStocks] = useState();\r\n  const [stockList, setStockList] = useState();\r\n\r\n  // useEffect(() => {\r\n  //   if (isRealData) {\r\n  //     const { marketType, fileType } = isRealData;\r\n  //     const { url, method } =\r\n  //       marketType === \"futures\"\r\n  //         ? api.getAvailableFutures\r\n  //         : api.getAvailableStock;\r\n  //     defaultAxios({\r\n  //       url,\r\n  //       method,\r\n  //       params: {\r\n  //         type: fileType,\r\n  //       },\r\n  //     })\r\n  //       .then(({ data }) => {\r\n  //         setStockList(\r\n  //           data.map((id) => {\r\n  //             return { id };\r\n  //           })\r\n  //         );\r\n  //       })\r\n  //       .catch((err) => {\r\n  //         // errorNotification(err?.response?.data);\r\n  //       });\r\n  //   } else {\r\n  //     defaultAxios({\r\n  //       url: api.getStock.url,\r\n  //       method: api.getStock.method,\r\n  //     })\r\n  //       .then(({ data: { content: stockList } }) => {\r\n  //         setStockList(stockList);\r\n  //       })\r\n  //       .catch((err) => {\r\n  //         // errorNotification(err?.response?.data);\r\n  //       });\r\n  //   }\r\n  // }, [isRealData]);\r\n\r\n  return (\r\n    <Select\r\n      style={{ ...style }}\r\n      onChange={(e) => {\r\n        setStocks(e);\r\n        onChange && onChange(e);\r\n      }}\r\n      mode={mode}\r\n      value={stocks}\r\n      placeholder=\"選擇股票\"\r\n      showSearch\r\n      onDropdownVisibleChange={(e) => {\r\n        if (e === false) {\r\n          onEnd && onEnd();\r\n        }\r\n      }}\r\n    >\r\n      {[{\r\n        id: '2330'\r\n      }].map((stock) => {\r\n          return (\r\n            <Option key={Math.random()} value={stock.id}>\r\n              {stock.id}\r\n            </Option>\r\n          );\r\n        })}\r\n    </Select>\r\n  );\r\n};\r\n","import { useCallback, useEffect, useMemo, useRef, useState } from \"react\";\r\nimport BarChart from \"../../pages/echart-example/bar\";\r\nimport BarStatisticsChart from \"../../pages/echart-example/bar-statistics\";\r\nimport BarLineChart from \"../../pages/echart-example/bar-line\";\r\nimport { Button, Select } from \"antd\";\r\nimport { StockSelector } from \"../stock-selector\";\r\nimport { api, defaultAxios } from \"../../environment/api\";\r\n// import errorNotification from \"../../utils/errorNotification\";\r\nimport ReactECharts from \"echarts-for-react\";\r\nimport dayjs from \"dayjs\";\r\n\r\nconst DisplayTickChart = ({ data = {} }) => {\r\n  const [showType, setShowType] = useState(\"all\");\r\n  // console.log('test data', data);\r\n  return (\r\n    <div>\r\n      <div className=\"flex justify-around my-6 items-center\">\r\n        <div>\r\n          圖表模式\r\n          <Select\r\n            value={showType}\r\n            style={{ width: 120, marginLeft: \"20px\" }}\r\n            onChange={(value) => {\r\n              setShowType(value);\r\n            }}\r\n            options={[\r\n              {\r\n                label: \"全部\",\r\n                value: \"all\",\r\n              },\r\n              {\r\n                label: \"買賣五檔\",\r\n                value: \"allfive\",\r\n              },\r\n              {\r\n                label: \"買五檔\",\r\n                value: \"buyfive\",\r\n              },\r\n              {\r\n                label: \"賣五檔\",\r\n                value: \"sellfive\",\r\n              },\r\n            ]}\r\n          />\r\n        </div>\r\n      </div>\r\n      <BarChart originData={data} showType={showType} />\r\n    </div>\r\n  );\r\n};\r\n\r\nconst DisplayChart = ({\r\n  chartData,\r\n}) => {\r\n  return (\r\n    <div>\r\n      <DisplayTickChart data={chartData} />\r\n      {/* {useMemo(() => {\r\n        return <DisplayTickChart data={chartData} />;\r\n      }, [chartData])} */}\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default DisplayTickChart;\r\n","import React, { useEffect, useState, useRef, useMemo } from \"react\";\r\nimport ReactECharts from \"echarts-for-react\";\r\nimport { Select } from \"antd\";\r\nimport dayjs from \"dayjs\";\r\n// import echarts from 'echarts/lib/echarts';\r\n\r\nconst LineChart = ({\r\n  // originData = {},\r\n  originData = { xAxis: [], yAxis: [] },\r\n  // onDateFormatChange,\r\n}) => {\r\n  const [data, setData] = useState({});\r\n  // console.log('originData1', originData);\r\n  const chartRef = useRef(null);\r\n  let chartInstance = null;\r\n\r\n  function renderChart() {\r\n    const renderedInstance = ReactECharts.getInstanceByDom(chartRef.current)\r\n    if (renderedInstance) {\r\n      chartInstance = renderedInstance\r\n    } else {\r\n      chartInstance = ReactECharts.init(chartRef.current)\r\n    }\r\n    chartInstance.setOption(options)\r\n  }\r\n\r\n  useEffect(() => {\r\n    // console.log('originData2', originData);\r\n    setData(originData);\r\n    // renderChart();\r\n    // if (data?.series?.length) {\r\n    //   let max = 10;\r\n    //   data.series.forEach((deta) => {\r\n    //     if (Math.abs(deta) > max) max = Math.abs(deta) + 10;\r\n    //   });\r\n    //   setYAxisMax(max);\r\n    // }\r\n  });\r\n\r\n  const options = {\r\n    tooltip: {\r\n      trigger: \"axis\",\r\n      axisPointer: {\r\n        type: \"cross\",\r\n        label: {\r\n          backgroundColor: \"#283b56\",\r\n        },\r\n      },\r\n    },\r\n    grid: {\r\n      left: \"3%\",\r\n      right: \"4%\",\r\n      containLabel: true,\r\n    },\r\n    legend: {\r\n      data: [\"成交量\"],\r\n    },\r\n    // backgroundColor: \"black\",\r\n    xAxis: [\r\n      {\r\n        type: \"category\",\r\n        boundaryGap: true,\r\n        // data: [1, 2, 3, 4],\r\n        data: data.xAxis,\r\n        axisLabel: {\r\n          formatter: (value, index) => {\r\n            return Number(value).toFixed(2);\r\n            // const day = dayjs(value).format(\"HH:mm:ss\");\r\n            // return day;\r\n          },\r\n        },\r\n      },\r\n    ],\r\n    yAxis: [\r\n      {\r\n        type: \"value\",\r\n        scale: true,\r\n        name: \"成交價\",\r\n      },\r\n    ],\r\n    // dataZoom: [\r\n    //   {\r\n    //     show: true,\r\n    //     realtime: true,\r\n    //     startValue: dataZoom ? data.xAxis.length - dataZoom : 0,\r\n    //     endValue: data.xAxis.length - 1,\r\n    //     onChange: (val) => {\r\n    //       console.log(val);\r\n    //     },\r\n    //   },\r\n    // ],\r\n    series: [\r\n      {\r\n        name: \"成交價2\",\r\n        type: \"line\",\r\n        // step: \"end\",\r\n        // data: [10, 12, 8, 15],\r\n        data: data.yAxis,\r\n        // itemStyle: {\r\n        //   color: \"black\",\r\n        // },\r\n      },\r\n    ],\r\n  };\r\n\r\n  return (\r\n    <>\r\n      {useMemo(() => {\r\n        return <>\r\n          <ReactECharts \r\n            option={options}\r\n            // key={(originData.xAxis.length === 0) ? 0: data.xAxis[data.xAxis.length - 1]}\r\n          />\r\n        </>\r\n      }, [data, options, originData])}\r\n    </>\r\n  );\r\n};\r\n\r\nexport default LineChart;\r\n","import { useCallback, useEffect, useMemo, useRef, useState } from \"react\";\r\nimport BarChart from \"../../pages/echart-example/bar\";\r\nimport BarStatisticsChart from \"../../pages/echart-example/bar-statistics\";\r\nimport LineChart from \"../../pages/echart-example/line\";\r\nimport { Button, Select } from \"antd\";\r\nimport { StockSelector } from \"../stock-selector\";\r\nimport { api, defaultAxios } from \"../../environment/api\";\r\n// import errorNotification from \"../../utils/errorNotification\";\r\nimport ReactECharts from \"echarts-for-react\";\r\nimport dayjs from \"dayjs\";\r\n\r\nconst check = (...arg) => {\r\n  if (false) {\r\n    // console.log(...arg);\r\n  }\r\n};\r\n\r\nconst getChartData = (\r\n  stockId,\r\n  dateFormat,\r\n  latestTimeChartTime,\r\n  latestStatisticsChartTime\r\n) => {\r\n  return Promise.all([\r\n    defaultAxios({\r\n      url: api.getDisplay.url,\r\n      method: api.getDisplay.method,\r\n      params: {\r\n        stockId,\r\n        isGetLatest: true,\r\n      },\r\n    }),\r\n  ]);\r\n};\r\n\r\nconst DisplayTimeChart = ({ data = {} }) => {\r\n  const [showType, setShowType] = useState(\"all\");\r\n  // console.log('test data', data);\r\n  // console.log('=?????????', data);\r\n  return (\r\n    <>\r\n      <LineChart originData={data} />\r\n    </>\r\n  );\r\n};\r\n\r\nconst DisplayLineChart = ({\r\n  chartData,\r\n  // onStockIdChange,\r\n  stock,\r\n  isResetChart,\r\n  setIsResetChart,\r\n}) => {\r\n  //chart status\r\n  const [isRunning, setIsRunning] = useState(true);\r\n  const [frequency, setFrequency] = useState(1);\r\n  const interval = useRef();\r\n\r\n  //query state\r\n  const [stockId, setStockId] = useState();\r\n  const [dateFormat, setDateFormat] = useState(4);\r\n  const [latestTimeChartTime, setLatestTimeChartTime] = useState();\r\n  const [latestStatisticsChartTime, setLatestStatisticsChartTime] = useState();\r\n\r\n  // chart data\r\n  const [tickChartData, setTickChartData] = useState({});\r\n\r\n  const clearInterval = () => {\r\n    if (interval.current) window.clearInterval(interval.current);\r\n    interval.current = undefined;\r\n  };\r\n\r\n  const resetChart = () => {\r\n    setTickChartData({});\r\n    setLatestTimeChartTime(undefined);\r\n    setLatestStatisticsChartTime(undefined);\r\n  };\r\n\r\n  useEffect(() => {\r\n    resetChart();\r\n    check(\"----\");\r\n  }, [stock, stockId, dateFormat]);\r\n\r\n  useEffect(() => {\r\n    if (isResetChart) {\r\n      resetChart();\r\n      setIsResetChart(false);\r\n    }\r\n  }, [isResetChart, setIsResetChart]);\r\n\r\n  const handleInterval = useCallback(() => {\r\n    check(\r\n      (stock && stock.id) || stockId,\r\n      dateFormat,\r\n      interval.current,\r\n      latestTimeChartTime,\r\n      latestStatisticsChartTime\r\n    );\r\n    getChartData(\r\n      (stock && stock.id) || stockId,\r\n      dateFormat,\r\n      latestTimeChartTime,\r\n      latestStatisticsChartTime\r\n    )\r\n      .then(\r\n        ([\r\n          { data: tickChartData },\r\n        ]) => {\r\n          // tick chart\r\n          // console.log('?????????', chartData);\r\n          setTickChartData(tickChartData);\r\n        }\r\n      )\r\n      .catch((err) => {\r\n        errorNotification(err?.response?.data);\r\n      });\r\n  }, [\r\n    stock,\r\n    stockId,\r\n    dateFormat,\r\n    latestTimeChartTime,\r\n    latestStatisticsChartTime,\r\n  ]);\r\n\r\n  useEffect(() => {\r\n    clearInterval();\r\n\r\n    if (isRunning) {\r\n      interval.current = setInterval(() => {\r\n        handleInterval();\r\n      }, 1000 * frequency);\r\n    }\r\n\r\n    return () => {\r\n      clearInterval();\r\n    };\r\n  }, [handleInterval, isRunning, frequency]);\r\n\r\n  return (\r\n    <div>\r\n      {useMemo(() => {\r\n        return <>\r\n          <DisplayTimeChart data={chartData} />\r\n        </>;\r\n      }, [tickChartData])}\r\n      <div className=\"flex justify-around my-6 items-center\">\r\n        {/* <div className=\"w-1/6\" style={{ display: stock ? \"none\" : undefined }}>\r\n          選擇股票\r\n          <StockSelector\r\n            style={{ width: \"100%\" }}\r\n            onChange={(e) => {\r\n              onStockIdChange && onStockIdChange(e);\r\n              setStockId(e);\r\n            }}\r\n          />\r\n        </div> */}\r\n        {/* <Button\r\n          type=\"primary\"\r\n          onClick={() => setIsRunning(true)}\r\n          >\r\n          開始播放\r\n        </Button>\r\n        <Button\r\n          style={{ background: \"#91A194\", color: \"white\" }}\r\n          onClick={() => setIsRunning(false)}\r\n          disabled={!isRunning}\r\n        >\r\n          暫停播放\r\n        </Button> */}\r\n        {/* <div>\r\n          圖表更新頻率\r\n          <Select\r\n            className=\"w-20 ml-2\"\r\n            value={frequency}\r\n            options={[\r\n              { value: 60, label: \"1m\" },\r\n              { value: 10, label: \"10s\" },\r\n              { value: 5, label: \"5s\" },\r\n              { value: 1, label: \"1s\" },\r\n              { value: 0.5, label: \"0.5s\" },\r\n            ]}\r\n            onChange={(val) => {\r\n              setFrequency(val);\r\n            }}\r\n          />\r\n        </div> */}\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default DisplayTimeChart;\r\n","function lowestValueAndKey(obj) {\r\n  let [lowestItems] = Object.entries(obj).sort(([, v1], [, v2]) => v1 - v2);\r\n  return [lowestItems[0], lowestItems[1]];\r\n}\r\n\r\nfunction geometricDistribution(min, max, prob) {\r\n  let q = 0;\r\n  let p = Math.pow(prob, 1 / (max - min));\r\n  while (true) {\r\n    q = Math.ceil(Math.log(1 - Math.random()) / Math.log(p)) + (min - 1);\r\n    if (q <= max) {\r\n      return q;\r\n    }\r\n  }\r\n}\r\n\r\nfunction renderQ1(Q1, series, buttonStatus) {\r\n  if (series[1] === 0) {\r\n    // 股票上漲\r\n    Q1.up += 1;\r\n    Q1.total += 1;\r\n    // buttonStatus = 'stop';\r\n  } else if (series[0] === 0) {\r\n    // 股票下跌\r\n    Q1.down += 1;\r\n    Q1.total += 1;\r\n    // buttonStatus = 'stop';\r\n  }\r\n\r\n  return [{\r\n    up: Q1.up,\r\n    down: Q1.down,\r\n    total: Q1.total,\r\n  }, buttonStatus];\r\n}\r\n\r\nexport const renderData = function (params, firstTime, buttonStatus, timeData = []) {\r\n  let Times = [];\r\n  let returnData = params.returnData;\r\n\r\n  let current_tab = params.current_tab;\r\n  let default_alpha_B = params.default_alpha_B;\r\n  let default_alpha_A = params.default_alpha_A;\r\n  let default_lambda_B = params.default_lambda_B;\r\n  let default_lambda_B_K = params.default_lambda_B_K;\r\n  let default_lambda_A = params.default_lambda_A;\r\n  let default_lambda_A_K = params.default_lambda_A_K;\r\n  let R_B = params.R_B;\r\n  let R_A = params.R_A;\r\n  let default_theta_B = params.default_theta_B;\r\n  let default_theta_B1 = params.default_theta_B1;\r\n  let default_theta_B2 = params.default_theta_B2;\r\n  let default_theta_B3 = params.default_theta_B3;\r\n  let default_theta_B4 = params.default_theta_B4;\r\n  let default_theta_B5 = params.default_theta_B5;\r\n  let default_theta_A = params.default_theta_A;\r\n  let default_theta_A1 = params.default_theta_A1;\r\n  let default_theta_A2 = params.default_theta_A2;\r\n  let default_theta_A3 = params.default_theta_A3;\r\n  let default_theta_A4 = params.default_theta_A4;\r\n  let default_theta_A5 = params.default_theta_A5;\r\n  let R_theta_B = params.R_theta_B;\r\n  let R_theta_A = params.R_theta_A;\r\n  let mu_B = params.mu_B;\r\n  let mu_A = params.mu_A;\r\n  let n = params.n;\r\n  let p = params.p;\r\n  let batch_size = params.batch_size;\r\n  let s = params.s;\r\n  let max_a = params.max_a;\r\n  let max_b = params.max_b;\r\n  let gap = params.gap;\r\n\r\n  Times[\"LA\"] = -Math.log(Math.random()) / default_lambda_A;\r\n  Times[\"CA\"] = -Math.log(Math.random()) / (default_theta_A * returnData.series[1]);\r\n  Times[\"MA\"] = -Math.log(Math.random()) / mu_A;\r\n  Times[\"LB\"] = -Math.log(Math.random()) / default_lambda_B;\r\n  Times[\"CB\"] = -Math.log(Math.random()) / (default_theta_B * returnData.series[0]);\r\n  Times[\"MB\"] = -Math.log(Math.random()) / mu_B;\r\n\r\n  let minimum = lowestValueAndKey(Times);\r\n\r\n  // let lowest = lowestValueAndKey(T);\r\n  let next = minimum[1] * 1000;\r\n\r\n  let kind = minimum[0].substring(0, 1);\r\n  let type = minimum[0].substring(1, 2);\r\n\r\n\r\n  // console.log(\"T\", T);\r\n  console.log('=====================start=====================');\r\n\r\n  let xAxis = 0;\r\n  if (!firstTime)\r\n    switch (kind) {\r\n      // 限價單\r\n      case \"L\":\r\n        console.log(\"Limit order\");\r\n        if (timeData.xAxis.length == 0) {\r\n          xAxis = next;\r\n        } else { \r\n          xAxis = timeData.xAxis[timeData.xAxis.length - 1] + next;\r\n        }\r\n        timeData.xAxis.push(xAxis);\r\n        if (type == \"A\") {\r\n          returnData.series[1] += 1;\r\n          timeData.yAxis.push(1);\r\n        } else if (type == \"B\") {\r\n          returnData.series[0] -= 1;\r\n          timeData.yAxis.push(0);\r\n        }\r\n        [returnData.Q1, buttonStatus] = renderQ1(returnData.Q1, returnData.series, buttonStatus);\r\n        break;\r\n\r\n      // 市價單\r\n      case \"M\":\r\n        console.log(\"Market order\");\r\n        if (timeData.xAxis.length == 0) {\r\n          xAxis = next;\r\n        } else { \r\n          xAxis = timeData.xAxis[timeData.xAxis.length - 1] + next;\r\n        }\r\n        timeData.xAxis.push(xAxis);\r\n        if (type == \"A\") {\r\n          returnData.series[1] += 1;\r\n          timeData.yAxis.push(1);\r\n        } else if (type == \"B\") {\r\n          returnData.series[0] -= 1;\r\n          timeData.yAxis.push(0);\r\n        }\r\n        [returnData.Q1, buttonStatus] = renderQ1(returnData.Q1, returnData.series, buttonStatus);\r\n        break;\r\n\r\n      // 取消單\r\n      case \"C\":\r\n        console.log(\"Cancel order\");\r\n        if (type == \"A\" && returnData.series[1] > 0) {\r\n          returnData.series[1] -= 1;\r\n        } else if (type == \"B\" && returnData.series[0] < 0) {\r\n          returnData.series[0] += 1;\r\n        }\r\n        [returnData.Q1, buttonStatus] = renderQ1(returnData.Q1, returnData.series, buttonStatus);\r\n        break;\r\n    }\r\n    console.log('test3 data', returnData);\r\n    console.log('timeData', timeData);\r\n  \r\n  return [next, returnData, timeData, buttonStatus];\r\n};\r\n","import React, { useEffect, useMemo, useRef, useState } from \"react\";\r\n// import Settings from \"./settings\";\r\nimport { defaultAxios, api } from \"../../environment/api\";\r\nimport { Button, Slider, Tabs, Typography, Table } from \"antd\";\r\nimport DisplayTickChart from \"../../component/chart\";\r\nimport DisplayTimeChart from \"../../component/line-chart\";\r\nimport BarChart from \"../../pages/echart-example/bar\";\r\nimport LineChart from \"../../pages/echart-example/line\";\r\n// import errorNotification from \"../../utils/errorNotification\";\r\n\r\nimport { configConsumerProps } from \"antd/lib/config-provider\";\r\nimport { renderData } from \"./settings/math-model\";\r\n\r\n\r\nconst { Title } = Typography;\r\nconst { TabPane } = Tabs;\r\n\r\n\r\nconst Q1Chart = () => {\r\n  // const [stockId, setStockId] = useState();\r\n  const [buttonStatus, setButtonStatus] = useState(\"stop\");\r\n\r\n  ////////////////////////////////////////////////////////////////////////\r\n  const displayData = useRef();\r\n  const timeSet = useRef();\r\n  const [nextTime, setNextTime] = useState(0);\r\n\r\n  const [q, setQ] = useState({\r\n    array_a: [],\r\n    array_b: [],\r\n    q1_array: [],\r\n  });\r\n\r\n  const [showType, setShowType] = useState(\"all\");\r\n  const [returnData, setReturnData] = useState({});\r\n  const [timeData, setTimeData] = useState({\r\n    xAxis: [],\r\n    yAxis: [],\r\n  });\r\n  const [setting, setSetting] = useState({\r\n    returnData: {\r\n      xAxis: [97, 98],\r\n      series: [-3, 2],\r\n      Q1: {\r\n        up: 0,\r\n        down: 0,\r\n        total: 0,\r\n      }\r\n    },\r\n    current_tab: 1,\r\n    default_B: 3,\r\n    default_A: 2,\r\n    default_alpha_B: 0.52,\r\n    default_alpha_A: 0.52,\r\n    default_lambda_B: 5,\r\n    default_lambda_B_K: 1.92,\r\n    default_lambda_A: 5,\r\n    default_lambda_A_K: 1.92,\r\n    R_B: 0.8,\r\n    R_A: 0.8,\r\n    default_theta_B: 5,\r\n    default_theta_B1: 0.71,\r\n    default_theta_B2: 0.81,\r\n    default_theta_B3: 0.68,\r\n    default_theta_B4: 0.56,\r\n    default_theta_B5: 0.47,\r\n    default_theta_A: 5,\r\n    default_theta_A1: 0.71,\r\n    default_theta_A2: 0.81,\r\n    default_theta_A3: 0.68,\r\n    default_theta_A4: 0.56,\r\n    default_theta_A5: 0.47,\r\n    R_theta_B: 0.8,\r\n    R_theta_A: 0.8,\r\n    mu_B: 0.94,\r\n    mu_A: 0.94,\r\n    n: 1, \r\n    p: 1,\r\n    batch_size: 1,\r\n    s: 1,\r\n    max_a: 13,\r\n    max_b: 11,\r\n    gap: 3,\r\n  });\r\n\r\n  const [table, setTable] = useState({\r\n    columns: [\r\n      {\r\n        title: 'b \\\\ a',\r\n        dataIndex: 'name',\r\n        key: Math.random(),\r\n      },\r\n      {\r\n        title: 1,\r\n        dataIndex: 1,\r\n        key: Math.random(),\r\n      },\r\n      {\r\n        title: 4,\r\n        dataIndex: 4,\r\n        key: Math.random(),\r\n      },\r\n      {\r\n        title: 7,\r\n        dataIndex: 7,\r\n        key: Math.random(),\r\n      },\r\n      {\r\n        title: 10,\r\n        dataIndex: 10,\r\n        key: Math.random(),\r\n      },\r\n      {\r\n        title: 13,\r\n        dataIndex: 13,\r\n        key: Math.random(),\r\n      },\r\n    ],\r\n    dataSource: [\r\n      {\r\n        key: 2,\r\n        name: 2,\r\n      },\r\n      {\r\n        key: 5,\r\n        name: 5,\r\n      },\r\n      {\r\n        key: 8,\r\n        name: 8,\r\n      },\r\n      {\r\n        key: 11,\r\n        name: 11,\r\n      },\r\n    ],\r\n  });\r\n\r\n  useEffect(() => {\r\n    let [next, renderReturnData, renderTimeData, renderButtonStatus] = renderData(setting, true, buttonStatus, timeData);\r\n    setNextTime(next);\r\n    setReturnData(renderReturnData);\r\n    setTimeData(renderTimeData);\r\n    // setButtonStatus(renderButtonStatus);\r\n  }, []);\r\n\r\n  useEffect(() => {\r\n    if (nextTime && buttonStatus !== \"stop\") {\r\n      setTimeout(() => {\r\n        setNextTime(() => {\r\n          console.log('nextTime', nextTime);\r\n          let [next, renderReturnData, renderTimeData, renderButtonStatus] = renderData(setting, false, buttonStatus, timeData);\r\n          setNextTime(next);\r\n          setReturnData(renderReturnData);\r\n          setTimeData(renderTimeData);\r\n          // setButtonStatus(renderButtonStatus);\r\n          console.log('timeData2', timeData);\r\n        });\r\n      }, nextTime);\r\n    }\r\n  }, [nextTime, buttonStatus]);\r\n\r\n  const handleInputChangeDefaultB = (value) => {\r\n    setSetting({ ...setting, default_B: value });\r\n    setReturnData({\r\n      series: [-value, setting.default_A],\r\n    })\r\n    // setSetting({ ...setting, returnData: { series: [-value, setting.default_A] } });\r\n  };\r\n\r\n  const handleInputChangeDefaultA = (value) => {\r\n    setSetting({ ...setting, default_A: value });\r\n    setReturnData({\r\n      series: [-setting.default_B, value],\r\n    })\r\n    // setSetting({ ...setting, returnData: { series: [-setting.default_B, value] } });\r\n  };\r\n\r\n  const handleInputChangeAlphaB = (value) => {\r\n    setSetting({ ...setting, default_alpha_B: value });\r\n  };\r\n\r\n  const handleInputChangeAlphaA = (value) => {\r\n    setSetting({ ...setting, default_alpha_A: value });\r\n  };\r\n\r\n  const handleInputChangeLambdaB = (value) => {\r\n    setSetting({ ...setting, default_lambda_B: value });\r\n  };\r\n\r\n  const handleInputChangeLambdaBK = (value) => {\r\n    setSetting({ ...setting, default_lambda_B_K: value });\r\n  };\r\n\r\n  const handleInputChangeLambdaA = (value) => {\r\n    setSetting({ ...setting, default_lambda_A: value });\r\n  };\r\n\r\n  const handleInputChangeLambdaAK = (value) => {\r\n    setSetting({ ...setting, default_lambda_A_K: value });\r\n  };\r\n\r\n  const handleInputChangeLambdaRatioB = (value) => {\r\n    setSetting({ ...setting, R_B: value });\r\n  };\r\n\r\n  const handleInputChangeLambdaRatioA = (value) => {\r\n    setSetting({ ...setting, R_A: value });\r\n  };\r\n\r\n  const handleInputChangeThetaB = (value) => {\r\n    setSetting({ ...setting, default_theta_B: value });\r\n  };\r\n\r\n  const handleInputChangeThetaB1 = (value) => {\r\n    setSetting({ ...setting, default_theta_B1: value });\r\n  };\r\n\r\n  const handleInputChangeThetaB2 = (value) => {\r\n    setSetting({ ...setting, default_theta_B2: value });\r\n  };\r\n\r\n  const handleInputChangeThetaB3 = (value) => {\r\n    setSetting({ ...setting, default_theta_B3: value });\r\n  };\r\n\r\n  const handleInputChangeThetaB4 = (value) => {\r\n    setSetting({ ...setting, default_theta_B4: value });\r\n  };\r\n\r\n  const handleInputChangeThetaB5 = (value) => {\r\n    setSetting({ ...setting, default_theta_B5: value });\r\n  };\r\n\r\n  const handleInputChangeThetaA = (value) => {\r\n    setSetting({ ...setting, default_theta_A: value });\r\n  };\r\n\r\n  const handleInputChangeThetaA1 = (value) => {\r\n    setSetting({ ...setting, default_theta_A1: value });\r\n  };\r\n  const handleInputChangeThetaA2 = (value) => {\r\n    setSetting({ ...setting, default_theta_A2: value });\r\n  };\r\n  const handleInputChangeThetaA3 = (value) => {\r\n    setSetting({ ...setting, default_theta_A3: value });\r\n  };\r\n  const handleInputChangeThetaA4 = (value) => {\r\n    setSetting({ ...setting, default_theta_A4: value });\r\n  };\r\n  const handleInputChangeThetaA5 = (value) => {\r\n    setSetting({ ...setting, default_theta_A5: value });\r\n  };\r\n\r\n  const handleInputChangeThetaRatioB = (value) => {\r\n    setSetting({ ...setting, R_theta_B: value });\r\n  };\r\n\r\n  const handleInputChangeThetaRatioA = (value) => {\r\n    setSetting({ ...setting, R_theta_A: value });\r\n  };\r\n\r\n  const handleInputChangeMuB = (value) => {\r\n    setSetting({ ...setting, mu_B: value });\r\n  };\r\n\r\n  const handleInputChangeMuA = (value) => {\r\n    setSetting({ ...setting, mu_A: value });\r\n  };\r\n\r\n  const handleInputChangeN = (value) => {\r\n    setSetting({ ...setting, n: value });\r\n  };\r\n\r\n  const handleInputChangeP = (value) => {\r\n    setSetting({ ...setting, p: value });\r\n  };\r\n\r\n  const handleInputChangeBatchSize = (value) => {\r\n    setSetting({ ...setting, batch_size: value });\r\n  };\r\n\r\n  const handleTabsChange = (key) => {\r\n    setSetting({ ...setting, current_tab: key });\r\n  };\r\n\r\n  const handleInputChangeS = (key) => {\r\n    setSetting({ ...setting, s: key });\r\n  };\r\n\r\n  const handleInputChangeMaxA = (key) => {\r\n    setSetting({ ...setting, max_a: key });\r\n    // renderTable(setting.gap, key, setting.max_b);\r\n    // setQ1Array();\r\n  };\r\n\r\n  const handleInputChangeMaxB = (key) => {\r\n    setSetting({ ...setting, max_b: key });\r\n    // renderTable(setting.gap, setting.max_a, key);\r\n    // setQ1Array();\r\n  };\r\n\r\n  const handleInputChangeGap = (key) => {\r\n    setSetting({ ...setting, gap: key });\r\n    // renderTable(key, setting.max_a, setting.max_b);\r\n    // setQ1Array();\r\n  };\r\n\r\n  ////////////////////////////////////////////////////////////////////////\r\n\r\n  return (\r\n    <div>\r\n      <DisplayTickChart data={returnData} />\r\n      {/* <DisplayChart\r\n        chartData={returnData}\r\n        // onStockIdChange={(e) => {\r\n        //   setStockId(e);\r\n        // }}\r\n      /> */}\r\n      <div className=\"flex justify-around my-6 items-center\">\r\n        <Button\r\n          type=\"primary\"\r\n          onClick={() => setButtonStatus(\"start\")}\r\n        >\r\n          開始模擬\r\n        </Button>\r\n        <Button\r\n          style={{ background: \"#91A194\", color: \"white\" }}\r\n          onClick={() => setButtonStatus(\"stop\")}\r\n        >\r\n          暫停模擬\r\n        </Button>\r\n      </div>\r\n\r\n      <DisplayTimeChart data={timeData} />\r\n\r\n      {/* <DisplayLineChart\r\n        chartData={timeData}\r\n        // onStockIdChange={(e) => {\r\n        //   setStockId(e);\r\n        // }}\r\n      /> */}\r\n      {/* <div>{timeData.xAxis}</div>\r\n      <div>{timeData.yAxis}</div> */}\r\n\r\n\r\n      {/* {useMemo(() => {\r\n        return <> */}\r\n          {/* <LineChart data={timeData} />; */}\r\n        {/* </>\r\n      }, [])} */}\r\n      {/* <BarChart originData={returnData} showType={showType} /> */}\r\n\r\n      <Title className=\"m-4 mb-0\" level={5}>\r\n        使用情境\r\n      </Title>\r\n      {/* <Settings buttonStatus={buttonStatus} stockId={stockId} /> */}\r\n\r\n      <div className=\"card-container px-5\">\r\n        <Tabs type=\"card\" centered onChange={handleTabsChange}>\r\n          <TabPane tab=\"Model (1)\" key=\"1\">\r\n            <div>\r\n              <div className=\"flex justify-center\">\r\n                <div className=\"w-full mx-5\">\r\n                  <div>Q1 up: {setting.returnData.Q1.up}</div>\r\n                  <div>Q1 down: {setting.returnData.Q1.down}</div>\r\n                  <div>Q1 toatl: {setting.returnData.Q1.total}</div>\r\n                  <div>Q1: {setting.returnData.Q1.up/setting.returnData.Q1.total}</div>\r\n                </div>\r\n              </div>\r\n              <hr className=\"my-3\" />\r\n              <div className=\"flex justify-center mx-5\">\r\n                <div className=\"mr-5 pr-5 border-r w-1/2\">\r\n                  <div>\r\n                    <div>\r\n                      B<sub>def.</sub>: {setting.default_B}\r\n                    </div>\r\n                    <Slider\r\n                      min={1}\r\n                      max={100}\r\n                      step={1}\r\n                      value={setting.default_B}\r\n                      onChange={handleInputChangeDefaultB}\r\n                    />\r\n                  </div>\r\n                  <hr className=\"my-3\" />\r\n                  <div>\r\n                    <div>\r\n                      λ<sub>B</sub>: {setting.default_lambda_B}\r\n                    </div>\r\n                    <Slider\r\n                      min={1}\r\n                      max={100}\r\n                      step={0.1}\r\n                      value={setting.default_lambda_B}\r\n                      onChange={handleInputChangeLambdaB}\r\n                    />\r\n                  </div>\r\n                  {/* <div>\r\n                    <div>\r\n                      R<sub>B</sub>: {setting.R_B}\r\n                    </div>\r\n                    <Slider\r\n                      min={0.1}\r\n                      max={5}\r\n                      step={0.1}\r\n                      value={setting.R_B}\r\n                      onChange={handleInputChangeLambdaRatioB}\r\n                    />\r\n                  </div> */}\r\n                  <hr className=\"my-3\" />\r\n                  <div>\r\n                    <div>\r\n                      θ<sub>B</sub>: {setting.default_theta_B}\r\n                    </div>\r\n                    <Slider\r\n                      min={1}\r\n                      max={100}\r\n                      step={0.1}\r\n                      value={setting.default_theta_B}\r\n                      onChange={handleInputChangeThetaB}\r\n                    />\r\n                  </div>\r\n                  {/* <div>\r\n                    <div>\r\n                      R<sub>B</sub>: {setting.R_theta_B}\r\n                    </div>\r\n                    <Slider\r\n                      min={0.1}\r\n                      max={5}\r\n                      step={0.1}\r\n                      value={setting.R_theta_B}\r\n                      onChange={handleInputChangeThetaRatioB}\r\n                    />\r\n                  </div> */}\r\n                  <hr className=\"my-3\" />\r\n                  <div>\r\n                    <div>\r\n                      μ<sub>B</sub>: {setting.mu_B}\r\n                    </div>\r\n                    <Slider\r\n                      min={0.01}\r\n                      max={10}\r\n                      step={0.01}\r\n                      value={setting.mu_B}\r\n                      onChange={handleInputChangeMuB}\r\n                    />\r\n                  </div>\r\n                </div>\r\n                <div className=\"w-1/2\">\r\n                  <div>\r\n                    <div>\r\n                      A<sub>def.</sub>: {setting.default_A}\r\n                    </div>\r\n                    <Slider\r\n                      min={1}\r\n                      max={100}\r\n                      step={1}\r\n                      value={setting.default_A}\r\n                      onChange={handleInputChangeDefaultA}\r\n                    />\r\n                  </div>\r\n                  <hr className=\"my-3\" />\r\n                  <div>\r\n                    <div>\r\n                      λ<sub>A</sub>: {setting.default_lambda_A}\r\n                    </div>\r\n                    <Slider\r\n                      min={1}\r\n                      max={100}\r\n                      step={0.1}\r\n                      value={setting.default_lambda_A}\r\n                      onChange={handleInputChangeLambdaA}\r\n                    />\r\n                  </div>\r\n                  {/* <div>\r\n                    <div>\r\n                      R<sub>A</sub>: {setting.R_A}\r\n                    </div>\r\n                    <Slider\r\n                      min={0.1}\r\n                      max={5}\r\n                      step={0.1}\r\n                      value={setting.R_A}\r\n                      onChange={handleInputChangeLambdaRatioA}\r\n                    />\r\n                  </div> */}\r\n                  <hr className=\"my-3\" />\r\n                  <div>\r\n                    <div>\r\n                      θ<sub>A</sub>: {setting.default_theta_A}\r\n                    </div>\r\n                    <Slider\r\n                      min={1}\r\n                      max={100}\r\n                      step={0.1}\r\n                      value={setting.default_theta_A}\r\n                      onChange={handleInputChangeThetaA}\r\n                    />\r\n                  </div>\r\n                  {/* <div>\r\n                    <div>\r\n                      R<sub>A</sub>: {setting.R_theta_A}\r\n                    </div>\r\n                    <Slider\r\n                      min={0.1}\r\n                      max={5}\r\n                      step={0.1}\r\n                      value={setting.R_theta_A}\r\n                      onChange={handleInputChangeThetaRatioA}\r\n                    />\r\n                  </div> */}\r\n                  <hr className=\"my-3\" />\r\n                  <div>\r\n                    <div>\r\n                      μ<sub>A</sub>: {setting.mu_A}\r\n                    </div>\r\n                    <Slider\r\n                      min={0.01}\r\n                      max={10}\r\n                      step={0.01}\r\n                      value={setting.mu_A}\r\n                      onChange={handleInputChangeMuA}\r\n                    />\r\n                  </div>\r\n                </div>\r\n              </div>\r\n            </div>\r\n          </TabPane>\r\n          <TabPane tab=\"Model (2)\" key=\"2\">\r\n            <div>\r\n              <div className=\"flex justify-center mx-5 border-b pb-3\">\r\n                <div className=\"mr-5 pr-5 w-1/2\">\r\n                  <div>n: {setting.n}</div>\r\n                  <Slider\r\n                    min={1}\r\n                    max={100}\r\n                    step={1}\r\n                    value={setting.n}\r\n                    onChange={handleInputChangeN}\r\n                  />\r\n                </div>\r\n                <div className=\"w-1/2\">\r\n                  <div>p: {setting.p}</div>\r\n                  <Slider\r\n                    min={0}\r\n                    max={1}\r\n                    step={0.01}\r\n                    value={setting.p}\r\n                    onChange={handleInputChangeP}\r\n                  />\r\n                </div>\r\n              </div>\r\n              <div className=\"flex justify-center mx-5 mt-3\">\r\n                <div className=\"mr-5 pr-5 border-r w-1/2\">\r\n                  <div>\r\n                    <div>\r\n                      α<sub>B</sub>: {setting.default_alpha_B}\r\n                    </div>\r\n                    <Slider\r\n                      min={0.01}\r\n                      max={10}\r\n                      step={0.01}\r\n                      value={setting.default_alpha_B}\r\n                      onChange={handleInputChangeAlphaB}\r\n                    />\r\n                  </div>\r\n                  <div>\r\n                    <div>\r\n                      k<sub>B</sub>: {setting.default_lambda_B_K}\r\n                    </div>\r\n                    <Slider\r\n                      min={1}\r\n                      max={10}\r\n                      step={0.01}\r\n                      value={setting.default_lambda_B_K}\r\n                      onChange={handleInputChangeLambdaBK}\r\n                    />\r\n                  </div>\r\n                  <hr className=\"my-3\" />\r\n                  <div>\r\n                    <div>\r\n                      θ<sub>B1</sub>: {setting.default_theta_B1}\r\n                    </div>\r\n                    <Slider\r\n                      min={0.01}\r\n                      max={10}\r\n                      step={0.01}\r\n                      value={setting.default_theta_B1}\r\n                      onChange={handleInputChangeThetaB1}\r\n                    />\r\n                  </div>\r\n                  <div>\r\n                    <div>\r\n                      θ<sub>B2</sub>: {setting.default_theta_B2}\r\n                    </div>\r\n                    <Slider\r\n                      min={0.01}\r\n                      max={10}\r\n                      step={0.01}\r\n                      value={setting.default_theta_B2}\r\n                      onChange={handleInputChangeThetaB2}\r\n                    />\r\n                  </div>\r\n                  <div>\r\n                    <div>\r\n                      θ<sub>B3</sub>: {setting.default_theta_B3}\r\n                    </div>\r\n                    <Slider\r\n                      min={0.01}\r\n                      max={10}\r\n                      step={0.01}\r\n                      value={setting.default_theta_B3}\r\n                      onChange={handleInputChangeThetaB3}\r\n                    />\r\n                  </div>\r\n                  <div>\r\n                    <div>\r\n                      θ<sub>B4</sub>: {setting.default_theta_B4}\r\n                    </div>\r\n                    <Slider\r\n                      min={0.01}\r\n                      max={10}\r\n                      step={0.01}\r\n                      value={setting.default_theta_B4}\r\n                      onChange={handleInputChangeThetaB4}\r\n                    />\r\n                  </div>\r\n                  <div>\r\n                    <div>\r\n                      θ<sub>B5</sub>: {setting.default_theta_B5}\r\n                    </div>\r\n                    <Slider\r\n                      min={0.01}\r\n                      max={10}\r\n                      step={0.01}\r\n                      value={setting.default_theta_B5}\r\n                      onChange={handleInputChangeThetaB5}\r\n                    />\r\n                  </div>\r\n                  <hr className=\"my-3\" />\r\n                  <div>\r\n                    <div>\r\n                      μ<sub>B</sub>: {setting.mu_B}\r\n                    </div>\r\n                    <Slider\r\n                      min={0.01}\r\n                      max={10}\r\n                      step={0.01}\r\n                      value={setting.mu_B}\r\n                      onChange={handleInputChangeMuB}\r\n                    />\r\n                  </div>\r\n                </div>\r\n                <div className=\"w-1/2\">\r\n                  <div>\r\n                    <div>\r\n                      α<sub>A</sub>: {setting.default_alpha_A}\r\n                    </div>\r\n                    <Slider\r\n                      min={0.01}\r\n                      max={10}\r\n                      step={0.01}\r\n                      value={setting.default_alpha_A}\r\n                      onChange={handleInputChangeAlphaA}\r\n                    />\r\n                  </div>\r\n                  <div>\r\n                    <div>\r\n                      k<sub>A</sub>: {setting.default_lambda_A_K}\r\n                    </div>\r\n                    <Slider\r\n                      min={1}\r\n                      max={10}\r\n                      step={0.01}\r\n                      value={setting.default_lambda_A_K}\r\n                      onChange={handleInputChangeLambdaAK}\r\n                    />\r\n                  </div>\r\n                  <hr className=\"my-3\" />\r\n                  <div>\r\n                    <div>\r\n                      θ<sub>A1</sub>: {setting.default_theta_A1}\r\n                    </div>\r\n                    <Slider\r\n                      min={0.01}\r\n                      max={10}\r\n                      step={0.01}\r\n                      value={setting.default_theta_A1}\r\n                      onChange={handleInputChangeThetaA1}\r\n                    />\r\n                  </div>\r\n                  <div>\r\n                    <div>\r\n                      θ<sub>A2</sub>: {setting.default_theta_A2}\r\n                    </div>\r\n                    <Slider\r\n                      min={0.01}\r\n                      max={10}\r\n                      step={0.01}\r\n                      value={setting.default_theta_A2}\r\n                      onChange={handleInputChangeThetaA2}\r\n                    />\r\n                  </div>\r\n                  <div>\r\n                    <div>\r\n                      θ<sub>A3</sub>: {setting.default_theta_A3}\r\n                    </div>\r\n                    <Slider\r\n                      min={0.01}\r\n                      max={10}\r\n                      step={0.01}\r\n                      value={setting.default_theta_A3}\r\n                      onChange={handleInputChangeThetaA3}\r\n                    />\r\n                  </div>\r\n                  <div>\r\n                    <div>\r\n                      θ<sub>A4</sub>: {setting.default_theta_A4}\r\n                    </div>\r\n                    <Slider\r\n                      min={0.01}\r\n                      max={10}\r\n                      step={0.01}\r\n                      value={setting.default_theta_A4}\r\n                      onChange={handleInputChangeThetaA4}\r\n                    />\r\n                  </div>\r\n                  <div>\r\n                    <div>\r\n                      θ<sub>A5</sub>: {setting.default_theta_A5}\r\n                    </div>\r\n                    <Slider\r\n                      min={0.01}\r\n                      max={10}\r\n                      step={0.01}\r\n                      value={setting.default_theta_A5}\r\n                      onChange={handleInputChangeThetaA5}\r\n                    />\r\n                  </div>\r\n                  <hr className=\"my-3\" />\r\n                  <div>\r\n                    <div>\r\n                      μ<sub>A</sub>: {setting.mu_A}\r\n                    </div>\r\n                    <Slider\r\n                      min={0.01}\r\n                      max={10}\r\n                      step={0.01}\r\n                      value={setting.mu_A}\r\n                      onChange={handleInputChangeMuA}\r\n                    />\r\n                  </div>\r\n                </div>\r\n              </div>\r\n            </div>\r\n          </TabPane>\r\n        </Tabs>\r\n      </div>\r\n\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Q1Chart;\r\n","import React, { useEffect } from \"react\";\r\nimport { Modal, Form, Input, Select } from \"antd\";\r\nimport { defaultAxios, api } from \"../../environment/api\";\r\nimport errorNotification from \"../../utils/errorNotification\";\r\n\r\nconst Create = ({ visible, setVisible, defaultValue, reset }) => {\r\n  const [form] = Form.useForm();\r\n  useEffect(() => {\r\n    console.log(defaultValue);\r\n    if (defaultValue) {\r\n      form.setFieldsValue(defaultValue);\r\n    }\r\n  }, [defaultValue]);\r\n  return (\r\n    <Modal\r\n      title={defaultValue ? \"修改情境\" : \"新增情境\"}\r\n      visible={visible}\r\n      onOk={() => {\r\n        form.submit();\r\n      }}\r\n      onCancel={() => {\r\n        form.resetFields();\r\n        setVisible(false);\r\n      }}\r\n      okText=\"確認\"\r\n      cancelText=\"取消\"\r\n    >\r\n      <Form\r\n        name=\"basic\"\r\n        layout=\"vertical\"\r\n        form={form}\r\n        onFinish={(value) => {\r\n          if (defaultValue) {\r\n            defaultAxios({\r\n              url: api.putContainer.url,\r\n              method: api.putContainer.method,\r\n              data: { ...value, id: defaultValue.id },\r\n            })\r\n              .catch((err) => {\r\n                errorNotification(err?.response?.data);\r\n              })\r\n              .finally(() => {\r\n                reset(Math.random());\r\n                form.resetFields();\r\n                setVisible(false);\r\n              });\r\n          } else {\r\n            defaultAxios({\r\n              url: api.postContainer.url,\r\n              method: api.postContainer.method,\r\n              data: value,\r\n            })\r\n              .catch((err) => {\r\n                errorNotification(err?.response?.data);\r\n              })\r\n              .finally(() => {\r\n                reset(Math.random());\r\n                form.resetFields();\r\n                setVisible(false);\r\n              });\r\n          }\r\n\r\n          console.log(value);\r\n        }}\r\n        initialValues={{ remember: true }}\r\n      >\r\n        <Form.Item\r\n          label=\"情境名稱\"\r\n          name=\"name\"\r\n          rules={[{ required: true, message: \"請輸入情境\" }]}\r\n        >\r\n          <Input placeholder=\"請輸入情境名稱\" />\r\n        </Form.Item>\r\n        <Form.Item\r\n          label=\"股票id\"\r\n          name=\"stockId\"\r\n          rules={[{ required: true, message: \"請選擇股票\" }]}\r\n        >\r\n          <Select\r\n            placeholder=\"請選擇股票\"\r\n            options={[{ value: 1, label: \"1號股票\" }]}\r\n          />\r\n        </Form.Item>\r\n      </Form>\r\n    </Modal>\r\n  );\r\n};\r\n\r\nexport default Create;\r\n","import React, { useEffect, useState } from \"react\";\r\nimport { defaultAxios, api } from \"../../environment/api\";\r\nimport errorNotification from \"../../utils/errorNotification\";\r\nimport { Table, Button, Row, Col, Select, Input, Typography } from \"antd\";\r\nimport { EditOutlined, DeleteOutlined } from \"@ant-design/icons\";\r\nimport Create from \"./create\";\r\nimport dayjs from \"dayjs\";\r\nimport { StockSelector } from \"../../component/stock-selector\";\r\nconst { Search } = Input;\r\nconst { Title } = Typography;\r\nconst Case = () => {\r\n  const [orederData, setOrderData] = useState([]);\r\n  const [page, setPage] = useState(1);\r\n  const [pageSize, setPageSize] = useState(20);\r\n  const [totalSize, setTotalSize] = useState(0);\r\n  const [visible, setVisible] = useState(false);\r\n  const [reset, setReset] = useState(0);\r\n  const [editValue, setEditValue] = useState();\r\n  const [checked, setChecked] = useState([]);\r\n  const [searchCondition, setSearchCondition] = useState({});\r\n  useEffect(() => {\r\n    defaultAxios({\r\n      url: api.getContainer.url,\r\n      method: api.getContainer.method,\r\n      params: {\r\n        ...searchCondition,\r\n        page: { page, pageSize },\r\n      },\r\n    })\r\n      .then((res) => {\r\n        console.log(res.data);\r\n        setOrderData(res.data.content);\r\n        setTotalSize(res.data.totalSize);\r\n      })\r\n      .catch((err) => {\r\n        errorNotification(err?.response?.data);\r\n      });\r\n  }, [page, pageSize, reset]);\r\n  const rowSelection = {\r\n    selectedRowKeys: checked,\r\n    onChange: (selectedRowKeys, selectedRows) => {\r\n      setChecked(selectedRows.map((deta) => deta.id));\r\n    },\r\n    preserveSelectedRowKeys: false,\r\n  };\r\n  return (\r\n    <div className=\"px-10\">\r\n      <Create\r\n        visible={visible}\r\n        setVisible={setVisible}\r\n        reset={setReset}\r\n        defaultValue={editValue}\r\n      />\r\n      <Title level={5}>條件搜尋</Title>\r\n      <Row\r\n        className=\"mb-4 border border-gray-200 p-4\"\r\n        justify=\"space-around\"\r\n        align=\"bottom\"\r\n      >\r\n        <Col span={6}>\r\n          情境名稱\r\n          <Input\r\n            placeholder=\"輸入名稱\"\r\n            size=\"middle\"\r\n            onChange={(e) => {\r\n              setSearchCondition({\r\n                ...searchCondition,\r\n                name: e.target.value,\r\n              });\r\n            }}\r\n          />\r\n        </Col>\r\n        <Col span={6}>\r\n          股票名稱\r\n          <StockSelector\r\n            style={{ width: \"100%\" }}\r\n            onChange={(e) => {\r\n              setSearchCondition({ ...searchCondition, stockId: e });\r\n            }}\r\n          />\r\n        </Col>\r\n        <Col span={2}>\r\n          <Button\r\n            onClick={() => {\r\n              setReset(Math.random());\r\n            }}\r\n          >\r\n            搜尋\r\n          </Button>\r\n        </Col>\r\n      </Row>\r\n      <div className=\"flex justify-end my-5\">\r\n        <Button\r\n          disabled={!checked.length}\r\n          type=\"default\"\r\n          className=\"mr-4\"\r\n          onClick={() => {\r\n            defaultAxios({\r\n              url: api.deleteContainer.url,\r\n              method: api.deleteContainer.method,\r\n              data: {\r\n                id: checked,\r\n              },\r\n            })\r\n              .catch((err) => {\r\n                errorNotification(err?.response?.data);\r\n              })\r\n              .finally(() => {\r\n                setChecked([]);\r\n                setReset(Math.random());\r\n              });\r\n          }}\r\n        >\r\n          刪除勾選\r\n        </Button>\r\n        <Button\r\n          type=\"primary\"\r\n          onClick={() => {\r\n            setEditValue(null);\r\n            setVisible(true);\r\n          }}\r\n        >\r\n          新增情境\r\n        </Button>\r\n      </div>\r\n      <Table\r\n        rowKey={(record) => record.id}\r\n        rowSelection={{\r\n          type: \"checkbox\",\r\n          ...rowSelection,\r\n        }}\r\n        columns={[\r\n          // {\r\n          //   title: \"id\",\r\n          //   dataIndex: \"id\",\r\n          //   render: (data) => <span>{data || \"NULL\"}</span>,\r\n          //   sorter: (a, b) => a.id - b.id,\r\n          // },\r\n          {\r\n            title: \"股票 ID\",\r\n            dataIndex: \"stockId\",\r\n          },\r\n          {\r\n            title: \"情境名稱\",\r\n            dataIndex: \"name\",\r\n          },\r\n          {\r\n            title: \"創建時間\",\r\n            dataIndex: \"createdTime\",\r\n            width: 200,\r\n            render: (data) => (\r\n              <span>{dayjs(data).format(\"YYYY/MM/DD HH:mm:ss\")}</span>\r\n            ),\r\n          },\r\n          {\r\n            title: \"更新時間\",\r\n            dataIndex: \"updatedTime\",\r\n            width: 200,\r\n            render: (data) => (\r\n              <span>{dayjs(data).format(\"YYYY/MM/DD HH:mm:ss\")}</span>\r\n            ),\r\n          },\r\n          {\r\n            title: \"狀態\",\r\n            dataIndex: \"action\",\r\n            render: (data, record) => (\r\n              <span>\r\n                <Button\r\n                  type=\"link\"\r\n                  shape=\"circle\"\r\n                  className=\"inline-flex justify-center items-center mr-2\"\r\n                  icon={<EditOutlined />}\r\n                  onClick={() => {\r\n                    console.log(record, \"data\");\r\n                    setEditValue({\r\n                      id: record.id,\r\n                      name: record.name,\r\n                      stockId: record.stockId,\r\n                    });\r\n                    setVisible(true);\r\n                  }}\r\n                />\r\n                <Button\r\n                  type=\"link\"\r\n                  shape=\"circle\"\r\n                  className=\"inline-flex justify-center items-center\"\r\n                  onClick={() => {\r\n                    defaultAxios({\r\n                      url: api.deleteContainer.url,\r\n                      method: api.deleteContainer.method,\r\n                      data: {\r\n                        id: [record.id],\r\n                      },\r\n                    })\r\n                      .catch((err) => {\r\n                        errorNotification(err?.response?.data);\r\n                      })\r\n                      .finally(() => {\r\n                        setReset(Math.random());\r\n                      });\r\n                  }}\r\n                  icon={<DeleteOutlined />}\r\n                />\r\n              </span>\r\n            ),\r\n          },\r\n        ]}\r\n        dataSource={orederData}\r\n        pagination={{\r\n          pageSize: pageSize,\r\n          total: totalSize,\r\n          onChange: (page) => {\r\n            setPage(page);\r\n          },\r\n          onShowSizeChange: (cur, size) => {\r\n            setPageSize(size);\r\n          },\r\n        }}\r\n        sticky\r\n      />\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Case;\r\n","import React, { useCallback, useEffect, useState } from \"react\";\r\nimport { defaultAxios, api } from \"../../environment/api\";\r\nimport moment from \"moment\";\r\nimport {\r\n  Button,\r\n  DatePicker,\r\n  Select,\r\n  Switch,\r\n  Row,\r\n  Col,\r\n  InputNumber,\r\n  Tooltip,\r\n  Spin,\r\n} from \"antd\";\r\nimport { ExclamationCircleOutlined } from \"@ant-design/icons\";\r\nimport { StockSelector } from \"../../component/stock-selector\";\r\nimport errorNotification from \"../../utils/errorNotification\";\r\nconst { Option } = Select;\r\nconst ORDER_FIELDS = [\r\n  \"count\",\r\n  \"method\",\r\n  \"subMethod\",\r\n  \"price\",\r\n  \"quantity\",\r\n  \"priceType\",\r\n  \"timeRestriction\",\r\n  \"stockId\",\r\n  \"trdate\",\r\n  \"ts\",\r\n];\r\nconst TRANSACTION_FIELDS = [\r\n  \"count\",\r\n  \"stockId\",\r\n  \"price\",\r\n  \"quantity\",\r\n  \"trdate\",\r\n  \"ts\",\r\n];\r\nconst DISPLAY_FIELDS = [\r\n  \"count\",\r\n  \"mthpx\",\r\n  \"mthsz\",\r\n  \"a1px\",\r\n  \"a1sz\",\r\n  \"a2px\",\r\n  \"a2sz\",\r\n  \"a3px\",\r\n  \"a3sz\",\r\n  \"a4px\",\r\n  \"a4sz\",\r\n  \"a5px\",\r\n  \"a5sz\",\r\n  \"b1px\",\r\n  \"b1sz\",\r\n  \"b2px\",\r\n  \"b2sz\",\r\n  \"b3px\",\r\n  \"b3sz\",\r\n  \"b4px\",\r\n  \"b4sz\",\r\n  \"b5px\",\r\n  \"b5sz\",\r\n  \"asz\",\r\n  \"bsz\",\r\n  \"sym\",\r\n  \"trdate\",\r\n  \"ts\",\r\n];\r\n\r\nconst getFileTypeFields = (fileType) => {\r\n  switch (fileType) {\r\n    case \"transaction\":\r\n      return TRANSACTION_FIELDS;\r\n    case \"display\":\r\n      return DISPLAY_FIELDS;\r\n    default:\r\n      return ORDER_FIELDS;\r\n  }\r\n};\r\nconst getRealDataContentAPI = (fileType, marketType) => {\r\n  switch (fileType) {\r\n    case \"transaction\":\r\n      return marketType === \"stock\"\r\n        ? api.getRealDataStockTransactionContent\r\n        : api.getRealDataFuturesTransactionContent;\r\n    case \"display\":\r\n      return marketType === \"stock\"\r\n        ? api.getRealDataStockDisplayContent\r\n        : api.getRealDataFuturesDisplayContent;\r\n    default:\r\n      return marketType === \"stock\"\r\n        ? api.getRealDataStockOrderContent\r\n        : api.getRealDataFuturesOrderContent;\r\n  }\r\n};\r\n\r\nconst getRealDataAvailableAPI = (marketType) => {\r\n  switch (marketType) {\r\n    case \"stock\":\r\n      return api.getAvailableStock;\r\n    default:\r\n      return api.getAvailableFutures;\r\n  }\r\n};\r\n\r\nconst FILET_TYPE = [\r\n  { header: \"委託檔\", value: \"order\" },\r\n  { header: \"成交檔\", value: \"transaction\" },\r\n  { header: \"揭示檔\", value: \"display\" },\r\n];\r\nconst DATE_FORMAT = [\r\n  {\r\n    header: \"毫秒\",\r\n    value: 4,\r\n  },\r\n  {\r\n    header: \"秒\",\r\n    value: 3,\r\n  },\r\n  {\r\n    header: \"分\",\r\n    value: 0,\r\n  },\r\n  {\r\n    header: \"時\",\r\n    value: 1,\r\n  },\r\n  {\r\n    header: \"日\",\r\n    value: 2,\r\n  },\r\n];\r\nconst SAMPLE_MODE = [\r\n  {\r\n    header: \"第一筆\",\r\n    value: 0,\r\n  },\r\n  {\r\n    header: \"成交價最大\",\r\n    value: 1,\r\n  },\r\n  {\r\n    header: \"成交價最小\",\r\n    value: 2,\r\n  },\r\n  {\r\n    header: \"平均成交價\",\r\n    value: 3,\r\n  },\r\n];\r\n\r\nconst FrequentDataElement = function ({ marketType }) {\r\n  const [group, setGroup] = useState();\r\n  const [stocks, setStocks] = useState([]);\r\n  const [fileType, setFileType] = useState(\"order\");\r\n  const [datePickerMode, setDatePickerMode] = useState({\r\n    start: \"year\",\r\n    end: \"year\",\r\n  });\r\n  const [unit, setUnit] = useState(1);\r\n  const [isSample, setIsSample] = useState(true);\r\n  const [dateFormat, setDateFormat] = useState(3);\r\n  const [sampleMode, setSampleMode] = useState(0);\r\n  const [fields, setFields] = useState(ORDER_FIELDS);\r\n\r\n  const [availableDate, setAvailableDate] = useState([]);\r\n  const [startTime, setStartTime] = useState();\r\n  const [endTime, setEndTime] = useState();\r\n\r\n  const [isLoading, setIsLoading] = useState(false);\r\n  const [isButtonLoading, setIsButtonLoading] = useState(false);\r\n\r\n  const [isGroup, setIsGroup] = useState(false);\r\n\r\n  const [groupList, setGroupList] = useState();\r\n\r\n  const getTitle = (marketType) => {\r\n    switch (marketType) {\r\n      case \"stock\":\r\n        return \"證交\";\r\n      case \"futures\":\r\n        return \"期交\";\r\n      default:\r\n        return \"\";\r\n    }\r\n  };\r\n  const handleStockSelectorChange = useCallback(() => {\r\n    if (stocks.length !== 0) {\r\n      setIsLoading(true);\r\n      const { url, method } = getRealDataAvailableAPI(marketType);\r\n      Promise.all(\r\n        stocks.map((stock) => {\r\n          return defaultAxios({\r\n            url: url + `/${stock}`,\r\n            method,\r\n            params: {\r\n              type: fileType,\r\n            },\r\n          });\r\n        })\r\n      )\r\n        .then((datas) => {\r\n          const dateSet = new Set();\r\n          datas.forEach(({ data }) => {\r\n            data.forEach((date) => {\r\n              dateSet.add(date);\r\n            });\r\n          });\r\n          setAvailableDate(Array.from(dateSet));\r\n          setIsLoading(false);\r\n        })\r\n        .catch((err) => {\r\n          errorNotification(err?.response?.data);\r\n          setIsLoading(false);\r\n        });\r\n    }\r\n  }, [fileType, marketType, stocks]);\r\n\r\n  useEffect(() => {\r\n    handleStockSelectorChange();\r\n  }, [handleStockSelectorChange]);\r\n  useEffect(() => {\r\n    defaultAxios({\r\n      url: api.getGroup.url,\r\n      method: api.getGroup.method,\r\n    })\r\n      .then(({ data: { content: groupList } }) => {\r\n        setGroupList(groupList);\r\n      })\r\n      .catch((err) => {\r\n        errorNotification(err?.response?.data);\r\n      });\r\n  }, []);\r\n  return (\r\n    <Spin spinning={isLoading}>\r\n      <div style={{ padding: \"20px\" }}>\r\n        {getTitle(marketType)}\r\n        <Row>\r\n          <Col span={6}>\r\n            {/* <Switch\r\n            checked={isGroup}\r\n            onChange={() => {\r\n              setIsGroup(!isGroup);\r\n            }}\r\n          /> */}\r\n            檔案類型\r\n            <Select\r\n              style={{ width: \"100%\" }}\r\n              onChange={(e) => {\r\n                setFileType(e);\r\n                setFields(getFileTypeFields(e));\r\n                setStartTime(null);\r\n                setEndTime(null);\r\n              }}\r\n              value={fileType}\r\n              placeholder=\"選擇檔案類型\"\r\n            >\r\n              {FILET_TYPE.map((fileType) => {\r\n                return (\r\n                  <Option key={Math.random()} value={fileType.value}>\r\n                    {fileType.header}\r\n                  </Option>\r\n                );\r\n              })}\r\n            </Select>\r\n          </Col>\r\n          <Col span={6}>\r\n            {isGroup ? \"類股\" : \"股票\"}\r\n            <Select\r\n              style={{\r\n                width: \"100%\",\r\n                display: isGroup ? undefined : \"none\",\r\n              }}\r\n              onChange={(e) => {\r\n                setGroup(e);\r\n              }}\r\n              value={group}\r\n              placeholder=\"選擇類股\"\r\n            >\r\n              {groupList &&\r\n                groupList.map((group, index) => {\r\n                  return (\r\n                    <Option key={Math.random()} value={index}>\r\n                      {group.name}\r\n                    </Option>\r\n                  );\r\n                })}\r\n            </Select>\r\n            <StockSelector\r\n              isRealData={{\r\n                marketType,\r\n                fileType,\r\n              }}\r\n              style={{\r\n                width: \"100%\",\r\n                display: !isGroup ? undefined : \"none\",\r\n              }}\r\n              onChange={(e) => {\r\n                setStocks(e);\r\n              }}\r\n              mode=\"multiple\"\r\n            />\r\n          </Col>\r\n        </Row>\r\n        <Row style={{ marginTop: \"20px\" }}>\r\n          <Col span={6}>\r\n            <div\r\n              style={{\r\n                display: \"flex\",\r\n                flexDirection: \"row\",\r\n                alignItems: \"center\",\r\n              }}\r\n            >\r\n              <Tooltip\r\n                title={`開始時間與結束時間間隔不可大於5天，沒資料的不可選`}\r\n              >\r\n                <ExclamationCircleOutlined />\r\n              </Tooltip>\r\n              開始時間\r\n            </div>\r\n            <DatePicker\r\n              picker=\"date\"\r\n              mode={datePickerMode.start}\r\n              onPanelChange={(value, mode) => {\r\n                setDatePickerMode({ ...datePickerMode, start: mode });\r\n              }}\r\n              onOpenChange={(open) => {\r\n                if (!open)\r\n                  setDatePickerMode({ ...datePickerMode, start: \"year\" });\r\n              }}\r\n              value={startTime}\r\n              allowClear\r\n              style={{ width: \"100%\" }}\r\n              placeholder=\"選擇開始時間\"\r\n              disabled={stocks.length === 0}\r\n              disabledDate={(current) => {\r\n                const transferedCurrent = current && current.startOf(\"day\");\r\n                const transferedEndTime = endTime && endTime;\r\n                return (\r\n                  (transferedCurrent && transferedCurrent > moment()) ||\r\n                  (transferedCurrent &&\r\n                    !availableDate.includes(\r\n                      transferedCurrent.format(\"YYYY-MM-DD\")\r\n                    )) ||\r\n                  (transferedEndTime &&\r\n                    transferedCurrent > transferedEndTime) ||\r\n                  (transferedEndTime &&\r\n                    transferedEndTime.diff(transferedCurrent) / 86400000 >= 5)\r\n                );\r\n              }}\r\n              onChange={(time) => {\r\n                setStartTime(time && time.startOf(\"day\"));\r\n              }}\r\n            />\r\n          </Col>\r\n          <Col span={6}>\r\n            結束時間\r\n            <DatePicker\r\n              picker=\"date\"\r\n              mode={datePickerMode.end}\r\n              onPanelChange={(value, mode) => {\r\n                setDatePickerMode({ ...datePickerMode, end: mode });\r\n              }}\r\n              onOpenChange={(open) => {\r\n                if (!open)\r\n                  setDatePickerMode({ ...datePickerMode, end: \"year\" });\r\n              }}\r\n              value={endTime}\r\n              allowClear\r\n              style={{ width: \"100%\" }}\r\n              placeholder=\"選擇結束時間\"\r\n              disabled={stocks.length === 0}\r\n              disabledDate={(current) => {\r\n                const transferedCurrent = current && current.startOf(\"day\");\r\n                const transferedStartTime = startTime && startTime;\r\n                return (\r\n                  (transferedCurrent && transferedCurrent > moment()) ||\r\n                  (transferedCurrent &&\r\n                    !availableDate.includes(\r\n                      transferedCurrent.format(\"YYYY-MM-DD\")\r\n                    )) ||\r\n                  (transferedStartTime &&\r\n                    transferedCurrent < transferedStartTime) ||\r\n                  (transferedStartTime &&\r\n                    transferedCurrent.diff(transferedStartTime) / 86400000 >= 5)\r\n                );\r\n              }}\r\n              onChange={(time) => {\r\n                setEndTime(time && time.startOf(\"day\"));\r\n              }}\r\n            />\r\n          </Col>\r\n        </Row>\r\n        <Row style={{ marginTop: \"20px\" }}>\r\n          <Col span={6}>\r\n            <div\r\n              style={{\r\n                display: \"flex\",\r\n                flexDirection: \"row\",\r\n                alignItems: \"center\",\r\n              }}\r\n            >\r\n              <Tooltip title={`若選擇不取樣，會將原始資料全部下載`}>\r\n                <ExclamationCircleOutlined />\r\n              </Tooltip>\r\n              {isSample ? \"時間頻率\" : \"不取樣\"}\r\n              <Switch\r\n                checked={isSample}\r\n                onChange={() => {\r\n                  setIsSample(!isSample);\r\n                }}\r\n              />\r\n            </div>\r\n            <div style={{ display: \"flex\", flexDirection: \"row\" }}>\r\n              <InputNumber\r\n                disabled={!isSample}\r\n                style={{ width: \"100%\" }}\r\n                value={unit}\r\n                step={1}\r\n                onChange={(e) => {\r\n                  setUnit(Math.floor(e));\r\n                }}\r\n              />\r\n              <Select\r\n                disabled={!isSample}\r\n                allowClear\r\n                style={{ width: \"100%\" }}\r\n                onChange={(e) => {\r\n                  setDateFormat(e);\r\n                }}\r\n                value={dateFormat}\r\n                placeholder=\"選擇時間頻率\"\r\n              >\r\n                {DATE_FORMAT.map((dateFormat) => {\r\n                  return (\r\n                    <Option key={Math.random()} value={dateFormat.value}>\r\n                      {dateFormat.header}\r\n                    </Option>\r\n                  );\r\n                })}\r\n              </Select>\r\n            </div>\r\n          </Col>\r\n          <Col span={6}>\r\n            取樣模式\r\n            <Select\r\n              disabled={dateFormat === undefined || !isSample}\r\n              style={{ width: \"100%\" }}\r\n              onChange={(e) => {\r\n                setSampleMode(e);\r\n              }}\r\n              value={sampleMode}\r\n              placeholder=\"選擇取樣模式\"\r\n            >\r\n              {SAMPLE_MODE.map((sampleMode) => {\r\n                return (\r\n                  <Option key={Math.random()} value={sampleMode.value}>\r\n                    {sampleMode.header}\r\n                  </Option>\r\n                );\r\n              })}\r\n            </Select>\r\n          </Col>\r\n        </Row>\r\n        <Row style={{ marginTop: \"20px\" }}>\r\n          <Col span={12}>\r\n            欄位\r\n            <Select\r\n              style={{ width: \"100%\" }}\r\n              onChange={(e) => {\r\n                setFields(e);\r\n              }}\r\n              value={fields}\r\n              mode=\"multiple\"\r\n              placeholder=\"選擇欄位\"\r\n            >\r\n              {getFileTypeFields(fileType).map((field) => {\r\n                return (\r\n                  <Option key={Math.random()} value={field}>\r\n                    {field}\r\n                  </Option>\r\n                );\r\n              })}\r\n            </Select>\r\n          </Col>\r\n        </Row>\r\n        <Row style={{ marginTop: \"20px\" }}>\r\n          <Button\r\n            loading={isButtonLoading}\r\n            onClick={async () => {\r\n              let stockIds = [];\r\n              if (isGroup) {\r\n                if (!isNaN(group)) {\r\n                  stockIds = groupList[group].stocks.map((stock) => stock.id);\r\n                }\r\n              } else {\r\n                if (stocks) stockIds = stocks;\r\n              }\r\n\r\n              if (stockIds.length && startTime && endTime) {\r\n                const { url, method } = getRealDataContentAPI(\r\n                  fileType,\r\n                  marketType\r\n                );\r\n                setIsButtonLoading(true);\r\n                await Promise.all(\r\n                  stockIds.map((stockId) => {\r\n                    return defaultAxios({\r\n                      url,\r\n                      method,\r\n                      params: {\r\n                        unit,\r\n                        dateFormat: isSample ? dateFormat : undefined,\r\n                        sampleMode,\r\n                        fields,\r\n                        stockId,\r\n                        futuresId: stockId,\r\n                        startTime: startTime.startOf(\"day\").toISOString(),\r\n                        endTime: endTime.endOf(\"day\").toISOString(),\r\n                      },\r\n                    })\r\n                      .then(({ data, headers }) => {\r\n                        const fileName = headers[\"filename\"];\r\n                        const header = data.length\r\n                          ? Object.keys(data[0]).join(\",\") + \"\\n\"\r\n                          : \"\";\r\n                        const transferData =\r\n                          header +\r\n                          data\r\n                            .map((v) => {\r\n                              return Object.values(v).join(\",\");\r\n                            })\r\n                            .join(\"\\n\");\r\n\r\n                        const url = window.URL.createObjectURL(\r\n                          new Blob([transferData])\r\n                        );\r\n                        const link = document.createElement(\"a\");\r\n                        link.href = url;\r\n                        link.setAttribute(\"download\", fileName);\r\n                        document.body.appendChild(link);\r\n                        link.click();\r\n                        window.URL.revokeObjectURL(url);\r\n                        setIsButtonLoading(false);\r\n                      })\r\n                      .catch((err) => {\r\n                        errorNotification(err?.response?.data);\r\n                        setIsButtonLoading(false);\r\n                      });\r\n                  })\r\n                );\r\n              } else {\r\n                errorNotification({\r\n                  statusCode: 400,\r\n                  message: \"stock, startTime, endTime are required\",\r\n                });\r\n              }\r\n            }}\r\n          >\r\n            DOWNLOAD CSV\r\n          </Button>\r\n        </Row>\r\n      </div>\r\n    </Spin>\r\n  );\r\n};\r\n\r\nconst FrequentData = function () {\r\n  return (\r\n    <div>\r\n      <FrequentDataElement marketType=\"stock\" />\r\n      <FrequentDataElement marketType=\"futures\" />\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default FrequentData;\r\n","import { Button, Table, Modal } from \"antd\";\r\nimport { useCallback, useEffect, useRef, useState } from \"react\";\r\nimport { api, defaultAxios } from \"../../environment/api\";\r\nimport errorNotification from \"../../utils/errorNotification\";\r\nimport { DeleteOutlined } from \"@ant-design/icons\";\r\n\r\nconst ADDER_CONST = 600000;\r\n\r\nconst check = (...arg) => {\r\n  if (true) console.log(...arg);\r\n};\r\n\r\nconst getGetRealDataApiByType = (fileType, marketType) => {\r\n  switch (fileType) {\r\n    case \"transaction\":\r\n      return marketType === \"stock\"\r\n        ? api.getRealDataStockTransaction\r\n        : api.getRealDataFuturesTransaction;\r\n    case \"display\":\r\n      return marketType === \"stock\"\r\n        ? api.getRealDataStockDisplay\r\n        : api.getRealDataFuturesDisplay;\r\n    default:\r\n      return marketType === \"stock\"\r\n        ? api.getRealDataStockOrder\r\n        : api.getRealDataFuturesOrder;\r\n  }\r\n};\r\n\r\nconst getPostRealDataApiByType = (fileType, marketType) => {\r\n  console.log(fileType, marketType);\r\n  switch (fileType) {\r\n    case \"transaction\":\r\n      return marketType === \"stock\"\r\n        ? api.postRealDataStockTransaction\r\n        : api.postRealDataFuturesTransaction;\r\n    case \"display\":\r\n      return marketType === \"stock\"\r\n        ? api.postRealDataStockDisplay\r\n        : api.postRealDataFuturesDisplay;\r\n    default:\r\n      return marketType === \"stock\"\r\n        ? api.postRealDataStockOrder\r\n        : api.postRealDataFuturesOrder;\r\n  }\r\n};\r\n\r\nconst getPutRealDataApiByType = (fileType, marketType) => {\r\n  switch (fileType) {\r\n    case \"transaction\":\r\n      return marketType === \"stock\"\r\n        ? api.putRealDataStockTransaction\r\n        : api.putRealDataFuturesTransaction;\r\n    case \"display\":\r\n      return marketType === \"stock\"\r\n        ? api.putRealDataStockDisplay\r\n        : api.putRealDataFuturesDisplay;\r\n    default:\r\n      return marketType === \"stock\"\r\n        ? api.putRealDataStockOrder\r\n        : api.putRealDataFuturesOrder;\r\n  }\r\n};\r\n\r\nconst getDeleteRealDataApiByType = (fileType, marketType) => {\r\n  switch (fileType) {\r\n    case \"transaction\":\r\n      return marketType === \"stock\"\r\n        ? api.deleteRealDataStockTransaction\r\n        : api.deleteRealDataFuturesTransaction;\r\n    case \"display\":\r\n      return marketType === \"stock\"\r\n        ? api.deleteRealDataStockDisplay\r\n        : api.deleteRealDataFuturesDisplay;\r\n    default:\r\n      return marketType === \"stock\"\r\n        ? api.deleteRealDataStockOrder\r\n        : api.deleteRealDataFuturesOrder;\r\n  }\r\n};\r\n\r\nconst getPostRealDataContentApiByType = (fileType, marketType) => {\r\n  switch (fileType) {\r\n    case \"transaction\":\r\n      return marketType === \"stock\"\r\n        ? api.postRealDataStockTransactionContent\r\n        : api.postRealDataFuturesTransactionContent;\r\n    case \"display\":\r\n      return marketType === \"stock\"\r\n        ? api.postRealDataStockDisplayContent\r\n        : api.postRealDataFuturesDisplayContent;\r\n    default:\r\n      return marketType === \"stock\"\r\n        ? api.postRealDataStockOrderContent\r\n        : api.postRealDataFuturesOrderContent;\r\n  }\r\n};\r\n\r\nconst getRealData = async (fileType, marketType, page) => {\r\n  const { url, method } = getGetRealDataApiByType(fileType, marketType);\r\n  return defaultAxios({\r\n    url,\r\n    method,\r\n    params: {\r\n      page,\r\n    },\r\n  });\r\n};\r\n\r\nconst postRealData = async (id, fileType, marketType) => {\r\n  const { url, method } = getPostRealDataApiByType(fileType, marketType);\r\n  return defaultAxios({\r\n    url,\r\n    method,\r\n    data: { id },\r\n  });\r\n};\r\n\r\nconst putRealData = async (id, fileType, marketType) => {\r\n  const { url, method } = getPutRealDataApiByType(fileType, marketType);\r\n  return defaultAxios({\r\n    url,\r\n    method,\r\n    data: { id },\r\n  });\r\n};\r\n\r\nconst deleteRealData = async (ids, fileType, marketType) => {\r\n  const { url, method } = getDeleteRealDataApiByType(fileType, marketType);\r\n  return defaultAxios({\r\n    url,\r\n    method,\r\n    data: ids,\r\n  });\r\n};\r\n\r\nconst postRealDataContent = async (id, fileType, marketType, data) => {\r\n  const { url, method } = getPostRealDataContentApiByType(fileType, marketType);\r\n  return defaultAxios({\r\n    url,\r\n    method,\r\n    data,\r\n    params: { id },\r\n  });\r\n};\r\n\r\nconst UploadProgress = ({ file, isLoading, fileType, marketType }) => {\r\n  const [progress, setProgress] = useState(0);\r\n  const [currentFile, setCurrentFile] = useState();\r\n  const [isError, setIsError] = useState(false);\r\n  const isFirstUpload = useRef(true);\r\n  const restString = useRef(\"\");\r\n\r\n  const handleNextProgress = useCallback(() => {\r\n    if (progress < currentFile.size) {\r\n      const ADDER = Math.min(ADDER_CONST, currentFile.size - progress);\r\n\r\n      const partFile = currentFile.slice(progress, progress + ADDER);\r\n      const fileReader = new FileReader();\r\n      fileReader.addEventListener(\"load\", (e) => {\r\n        const result = e.target.result.split(\"\\n\");\r\n        result[0] = restString.current + result[0];\r\n        restString.current = result[result.length - 1];\r\n        result.pop();\r\n\r\n        // insert real data content\r\n        check(2);\r\n        let insertArr = [];\r\n        if (result.length < 1000) insertArr.push(result);\r\n        else {\r\n          let cnt = 0;\r\n          while (cnt < result.length) {\r\n            insertArr.push(result.slice(cnt, cnt + 1000));\r\n            cnt += 1000;\r\n          }\r\n        }\r\n        Promise.all(\r\n          insertArr.map((arr) => {\r\n            return postRealDataContent(\r\n              currentFile.name,\r\n              fileType,\r\n              marketType,\r\n              arr\r\n            );\r\n          })\r\n        )\r\n          .then(() => {\r\n            setProgress(progress + ADDER);\r\n          })\r\n          .catch((err) => {\r\n            errorNotification(err?.response?.data);\r\n            setIsError(true);\r\n          });\r\n      });\r\n      fileReader.readAsText(partFile);\r\n    } else {\r\n      putRealData(currentFile.name, fileType, marketType)\r\n        .then(() => {\r\n          // toggle real data status\r\n          check(3);\r\n        })\r\n        .catch((err) => {\r\n          errorNotification(err?.response?.data);\r\n          setIsError(true);\r\n        });\r\n    }\r\n  }, [currentFile, progress, fileType, marketType]);\r\n\r\n  useEffect(() => {\r\n    //TODO 在按一次上傳 file為何會變??\r\n    setCurrentFile(file);\r\n    setProgress(0);\r\n  }, [file]);\r\n\r\n  useEffect(() => {\r\n    if (isLoading && currentFile && fileType) {\r\n      if (isFirstUpload.current) {\r\n        postRealData(currentFile.name, fileType, marketType)\r\n          .then(() => {\r\n            isFirstUpload.current = false;\r\n            handleNextProgress();\r\n            //insert real data\r\n            check(1);\r\n          })\r\n          .catch((err) => {\r\n            errorNotification(err?.response?.data);\r\n            setIsError(true);\r\n          });\r\n      } else handleNextProgress();\r\n    }\r\n  }, [isLoading, currentFile, fileType, marketType, handleNextProgress]);\r\n\r\n  return currentFile ? (\r\n    <div>\r\n      {currentFile.name}{\" \"}\r\n      {isError\r\n        ? \"ERROR\"\r\n        : ((progress / currentFile.size) * 100).toFixed(2) + \"%\"}\r\n    </div>\r\n  ) : (\r\n    <div />\r\n  );\r\n};\r\n\r\nconst ContentContainer = ({ fileType, marketType }) => {\r\n  const [fileList, setFileList] = useState([]);\r\n  const [isLoadingList, setIsLoadingList] = useState([]);\r\n  const [realData, setRealData] = useState([]);\r\n  const [page, setPage] = useState(1);\r\n  const [pageSize, setPageSize] = useState(20);\r\n  const [totalSize, setTotalSize] = useState(0);\r\n  const [isLoading, setIsLoading] = useState(false);\r\n\r\n  const handleGetRealData = useCallback(() => {\r\n    getRealData(fileType, marketType, { page, pageSize }).then(({ data }) => {\r\n      setRealData(data.content);\r\n      setTotalSize(data.totalSize);\r\n      setIsLoading(false);\r\n    });\r\n  }, [page, pageSize, fileType, marketType]);\r\n\r\n  useEffect(() => {\r\n    handleGetRealData();\r\n  }, [handleGetRealData]);\r\n\r\n  return (\r\n    <div>\r\n      <input\r\n        type=\"file\"\r\n        multiple\r\n        onChange={(e) => {\r\n          const { files } = e.target;\r\n          const fileArray = Array.from(files);\r\n          setFileList(fileArray);\r\n          setIsLoadingList([...new Array(fileArray.length)].fill(false));\r\n        }}\r\n      />\r\n      <Button\r\n        type=\"primary\"\r\n        onClick={() => {\r\n          setIsLoadingList(isLoadingList.map(() => true));\r\n        }}\r\n      >\r\n        上傳\r\n      </Button>\r\n      <Button\r\n        type=\"primary\"\r\n        danger\r\n        onClick={() => {\r\n          Modal.error({\r\n            closable: true,\r\n            content: \"確定要刪除嗎?\",\r\n            maskClosable: true,\r\n            okText: \"確定\",\r\n            onOk: () => {\r\n              setIsLoading(true);\r\n              const ids = realData\r\n                .filter((v) => v.isFinished === 0)\r\n                .map((v) => v.id);\r\n              deleteRealData(ids, fileType, marketType).then(() => {\r\n                handleGetRealData();\r\n              });\r\n            },\r\n          });\r\n        }}\r\n      >\r\n        刪除未完成\r\n      </Button>\r\n      <div style={{ display: \"flex\", flexDirection: \"column\" }}>\r\n        {fileList.map((file, index) => {\r\n          return (\r\n            <UploadProgress\r\n              key={Math.random()}\r\n              file={file}\r\n              isLoading={isLoadingList[index]}\r\n              fileType={fileType}\r\n              marketType={marketType}\r\n            />\r\n          );\r\n        })}\r\n      </div>\r\n      <Table\r\n        loading={isLoading}\r\n        dataSource={realData.map((v) => {\r\n          return {\r\n            key: Math.random(),\r\n            ...v,\r\n          };\r\n        })}\r\n        columns={[\r\n          {\r\n            title: \"檔名\",\r\n            dataIndex: \"id\",\r\n            key: Math.random(),\r\n          },\r\n          {\r\n            title: \"已完成\",\r\n            dataIndex: \"isFinished\",\r\n            render: (data) => {\r\n              return data === 0 ? \"否\" : \"是\";\r\n            },\r\n            key: Math.random(),\r\n          },\r\n          {\r\n            title: \"刪除\",\r\n            dataIndex: \"action\",\r\n            render: (data, { id }) => (\r\n              <Button\r\n                type=\"link\"\r\n                shape=\"circle\"\r\n                className=\"inline-flex justify-center items-center\"\r\n                onClick={() => {\r\n                  Modal.error({\r\n                    closable: true,\r\n                    content: `確定要刪除${id}嗎?`,\r\n                    maskClosable: true,\r\n                    okText: \"確定\",\r\n                    onOk: () => {\r\n                      setIsLoading(true);\r\n                      deleteRealData([id], fileType, marketType).then(() => {\r\n                        handleGetRealData();\r\n                      });\r\n                    },\r\n                  });\r\n                }}\r\n                icon={<DeleteOutlined />}\r\n              />\r\n            ),\r\n          },\r\n        ]}\r\n        scroll={{\r\n          y: \"500px\",\r\n        }}\r\n        pagination={{\r\n          pageSize: pageSize,\r\n          total: totalSize,\r\n          onChange: (page) => {\r\n            setPage(page);\r\n          },\r\n          onShowSizeChange: (cur, size) => {\r\n            setPageSize(size);\r\n          },\r\n        }}\r\n      />\r\n    </div>\r\n  );\r\n};\r\n\r\nconst RealDataUpload = () => {\r\n  return (\r\n    <div style={{ textAlign: \"center\" }}>\r\n      <span style={{ color: \"red\" }}>\r\n        若\"已完成\"為否 請將該筆資料刪除後再重新上傳\r\n      </span>\r\n      {[\r\n        { marketType: \"stock\", title: \"證交\" },\r\n        { marketType: \"futures\", title: \"期交\" },\r\n      ].map(({ marketType, title }) => {\r\n        return (\r\n          <div\r\n            style={{ marginTop: \"20px\", marginBottom: \"20px\" }}\r\n            key={Math.random()}\r\n          >\r\n            {title}\r\n            <div\r\n              style={{\r\n                display: \"flex\",\r\n                flexDirection: \"row\",\r\n                justifyContent: \"space-around\",\r\n              }}\r\n            >\r\n              <div>\r\n                委託檔\r\n                <ContentContainer fileType=\"order\" marketType={marketType} />\r\n              </div>\r\n              <div>\r\n                成交檔\r\n                <ContentContainer\r\n                  fileType=\"transaction\"\r\n                  marketType={marketType}\r\n                />\r\n              </div>\r\n              <div>\r\n                揭示檔\r\n                <ContentContainer fileType=\"display\" marketType={marketType} />\r\n              </div>\r\n            </div>\r\n          </div>\r\n        );\r\n      })}\r\n    </div>\r\n  );\r\n};\r\nexport default RealDataUpload;\r\n","import { Button, DatePicker, Table, Slider, Tabs, Select } from \"antd\";\r\nimport { useCallback, useEffect, useRef, useState } from \"react\";\r\nimport { StockSelector } from \"../../component/stock-selector\";\r\nimport { api, defaultAxios } from \"../../environment/api\";\r\nimport errorNotification from \"../../utils/errorNotification\";\r\nimport moment from \"moment\";\r\nimport dayjs from \"dayjs\";\r\n\r\nconst { TabPane } = Tabs;\r\n\r\nconst getRealDataOrderContent = async (params) => {\r\n  const { url, method } = api.getRealDataStockOrderContent;\r\n  params.isSimulatedOrder = true;\r\n  return defaultAxios({\r\n    url,\r\n    method,\r\n    params,\r\n  });\r\n};\r\n\r\nconst resetStock = (stockId) => {\r\n  return defaultAxios({\r\n    url: api.resetStock.url,\r\n    method: api.resetStock.method,\r\n    data: {\r\n      id: stockId,\r\n      isReset: true,\r\n      isAutoDisplay: false,\r\n    },\r\n  });\r\n};\r\n\r\nconst getOrder = (stockId, startTime, endTime) => {\r\n  const { url, method } = api.getOrder;\r\n  return defaultAxios({\r\n    url,\r\n    method,\r\n    params: {\r\n      stockId,\r\n      createdTime: {\r\n        min: startTime,\r\n        max: endTime,\r\n      },\r\n      order: {\r\n        orderBy: \"createdTime\",\r\n        order: \"ASC\",\r\n      },\r\n    },\r\n  });\r\n};\r\n\r\nconst sendOrder = ({ id, realDataOrderId, ...order }) => {\r\n  const { url, method } = api.postOrder;\r\n  return defaultAxios({\r\n    url,\r\n    method,\r\n    data: {\r\n      ...order,\r\n      investorId: null,\r\n    },\r\n  });\r\n};\r\n\r\nconst debugOrders = (orders, type) => {\r\n  if (false) {\r\n    console.log(type, orders);\r\n  }\r\n};\r\n\r\nexport const OrderSender = ({ orders, stockId, onReset }) => {\r\n  const [currentIndex, setCurrentIndex] = useState(0);\r\n  const [isRunning, setIsRunnung] = useState(false);\r\n  const [speed, setSpeed] = useState(1);\r\n  const timeOut = useRef();\r\n  const speedRef = useRef(1);\r\n  const sliderDelay = useRef();\r\n\r\n  useEffect(() => {\r\n    if (timeOut.current) {\r\n      clearTimeout(timeOut.current);\r\n      timeOut.current = undefined;\r\n    }\r\n    setCurrentIndex(0);\r\n    setIsRunnung(false);\r\n\r\n    return () => {\r\n      if (sliderDelay.current) clearTimeout(sliderDelay.current);\r\n      if (timeOut.current) clearTimeout(timeOut.current);\r\n    };\r\n  }, [orders]);\r\n\r\n  const handleTimeOut = useCallback(() => {\r\n    const currentOrder = orders[currentIndex];\r\n    const nextOrder = orders[currentIndex + 1];\r\n    sendOrder(currentOrder).catch((err) => {\r\n      errorNotification(err?.response?.data);\r\n    });\r\n    if (nextOrder) {\r\n      const delay =\r\n        Date.parse(nextOrder.createdTime) -\r\n        Date.parse(currentOrder.createdTime);\r\n      timeOut.current = setTimeout(() => {\r\n        setCurrentIndex(currentIndex + 1);\r\n      }, Math.max(delay / speedRef.current, 50));\r\n    }\r\n  }, [currentIndex, orders]);\r\n\r\n  useEffect(() => {\r\n    if (isRunning) {\r\n      handleTimeOut();\r\n    } else if (timeOut.current) {\r\n      clearTimeout(timeOut.current);\r\n      timeOut.current = undefined;\r\n    }\r\n  }, [isRunning, handleTimeOut]);\r\n\r\n  useEffect(() => {\r\n    speedRef.current = speed;\r\n  }, [speed]);\r\n\r\n  return (\r\n    <div>\r\n      <div className=\"flex justify-around my-6 items-center\">\r\n        <Button\r\n          type=\"primary\"\r\n          onClick={() => {\r\n            setIsRunnung(true);\r\n          }}\r\n          disabled={!stockId || !orders.length}\r\n        >\r\n          開始模擬\r\n        </Button>\r\n        <Button\r\n          style={{ background: \"#91A194\", color: \"white\" }}\r\n          onClick={() => {\r\n            setIsRunnung(false);\r\n          }}\r\n          disabled={!stockId || !isRunning}\r\n        >\r\n          暫停模擬\r\n        </Button>\r\n        <div style={{ width: \"200px\" }}>\r\n          播放速度 {speed} 倍\r\n          <Slider\r\n            value={speed}\r\n            max={10}\r\n            disabled={!stockId || !orders.length}\r\n            onChange={(e) => {\r\n              setSpeed(e);\r\n            }}\r\n          />\r\n        </div>\r\n      </div>\r\n      <div style={{ width: \"100%\" }}>\r\n        狀態({orders.length ? currentIndex + 1 : 0} / {orders.length} )\r\n        <Slider\r\n          value={currentIndex}\r\n          max={orders.length - 1}\r\n          disabled={!stockId || !orders.length}\r\n          onChange={(e) => {\r\n            setCurrentIndex(e);\r\n            setIsRunnung(false);\r\n            if (sliderDelay.current) clearTimeout(sliderDelay.current);\r\n            sliderDelay.current = setTimeout(() => {\r\n              onReset && onReset();\r\n              const order = orders[currentIndex];\r\n              resetStock(\r\n                order.stockId === stockId ? stockId : order.stockId\r\n              ).catch((err) => {\r\n                errorNotification(err?.response?.data);\r\n              });\r\n            }, 1000);\r\n          }}\r\n        />\r\n        <Table\r\n          rowKey=\"id\"\r\n          columns={[\r\n            // {\r\n            //   title: \"價格類型\",\r\n            //   dataIndex: \"priceType\",\r\n            //   render: (data) => <span>{data ? \"LIMIT\" : \"MARKET\"}</span>,\r\n            //   key: Math.random(),\r\n            // },\r\n            {\r\n              title: \"類型\",\r\n              dataIndex: \"o_type\",\r\n              render: (data) => <span>{data == 'B' ? \"buy\" : \"sell\"}</span>,\r\n              key: Math.random(),\r\n            },\r\n            {\r\n              title: \"價格\",\r\n              dataIndex: \"odr_price\",\r\n              key: Math.random(),\r\n            },\r\n            {\r\n              title: \"數量\",\r\n              dataIndex: \"t_vol\",\r\n              key: Math.random(),\r\n            },\r\n\r\n            // {\r\n            //   title: \"副類型\",\r\n            //   dataIndex: \"subMethod\",\r\n            //   render: (data) => (\r\n            //     <span>\r\n            //       {data ? \"UPDATE\" : data === null ? \"NULL\" : \"CANCEL\"}\r\n            //     </span>\r\n            //   ),\r\n            //   key: Math.random(),\r\n            // },\r\n            // {\r\n            //   title: \"時間限制\",\r\n            //   dataIndex: \"timeRestriction\",\r\n            //   render: (data) => (\r\n            //     <span>{data ? \"IOC\" : data === 2 ? \"FOK\" : \"ROD\"}</span>\r\n            //   ),\r\n            //   key: Math.random(),\r\n            // },\r\n            {\r\n              title: \"時間\",\r\n              dataIndex: \"o_datetime\",\r\n              render: (data) => {\r\n                console.log(data);\r\n                const date = Number(data.toString().substring(0, data.toString().length - 3));\r\n                return (\r\n                  <span>{dayjs(date).format(\"YYYY/MM/DD HH:mm:ss\")}</span>\r\n                )\r\n              }\r\n            },\r\n          ]}\r\n          pagination={false}\r\n          dataSource={\r\n            orders.length && [{ ...orders[currentIndex], key: Math.random() }]\r\n          }\r\n          sticky\r\n        />\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nconst getRealDataAvailableAPI = (marketType) => {\r\n  switch (marketType) {\r\n    case \"stock\":\r\n      return api.getAvailableStock;\r\n    default:\r\n      return api.getAvailableFutures;\r\n  }\r\n};\r\n\r\nconst RealDataSimulator = ({ customResetStock, onReset }) => {\r\n  // Functional state\r\n  const [orders, setOrders] = useState([]);\r\n  const [marketType, setMarketType] = useState(\"stock\");\r\n  const [isLoading, setIsLoading] = useState(false);\r\n  const [availableDate, setAvailableDate] = useState([]);\r\n\r\n  //Query state\r\n  const [stockId, setStockId] = useState();\r\n  const [startMonth, setStartMonth] = useState();\r\n  const [startDate, setStartDate] = useState();\r\n  const [startTime, setStartTime] = useState();\r\n  const [endTime, setEndTime] = useState();\r\n  debugOrders(orders, \"real\");\r\n\r\n  // useEffect(() => {\r\n  //   if (stockId) {\r\n  //     setIsLoading(true);\r\n  //     const { url, method } = getRealDataAvailableAPI(marketType);\r\n  //     return defaultAxios({\r\n  //       url: url + `/${stockId}`,\r\n  //       method,\r\n  //       params: {\r\n  //         type: \"order\",\r\n  //       },\r\n  //     })\r\n  //       .then(({ data }) => {\r\n  //         setAvailableDate(data);\r\n  //         setIsLoading(false);\r\n  //       })\r\n  //       .catch((err) => {\r\n  //         errorNotification(err?.response?.data);\r\n  //         setIsLoading(false);\r\n  //       });\r\n  //   }\r\n  // }, [stockId]);\r\n  \r\n  useEffect(() => {\r\n    if (startMonth) {\r\n      // setIsLoading(true);\r\n      // const { url, method } = getRealDataAvailableAPI(marketType);\r\n      return defaultAxios({\r\n        url: 'https://140.118.118.173/api/v1/getStockData',\r\n        credentials: 'include',\r\n        method: 'GET',\r\n        headers: new Headers({\r\n          'access-control-allow-origin': '*',\r\n          'Content-Type': 'application/json'\r\n        }),\r\n        params: {\r\n          cmd: \"get_data_exist_date\",\r\n          s_code: stockId,\r\n          sc_type: \"dsp\",\r\n          year_month: startMonth,\r\n        },\r\n      })\r\n        .then(({ data }) => {\r\n          console.log('data', data.data);\r\n          setAvailableDate(data.data);\r\n          setIsLoading(false);\r\n        })\r\n        .catch((err) => {\r\n          console.log('error', err)\r\n          errorNotification(err?.response?.data);\r\n          setIsLoading(false);\r\n        });\r\n    }\r\n  }, [startMonth]);\r\n  \r\n  return (\r\n    <div>\r\n      <div className=\"flex justify-around my-6 items-center\">\r\n        {/* <div className=\"w-1/6\">\r\n          選擇資料類型\r\n          <Select\r\n            className=\"w-20 ml-2\"\r\n            value={marketType}\r\n            options={[\r\n              { value: \"stock\", label: \"證交\" },\r\n              { value: \"futures\", label: \"期交\" },\r\n            ]}\r\n            onChange={(val) => {\r\n              setMarketType(val);\r\n            }}\r\n          />\r\n        </div> */}\r\n        <div className=\"w-1/6\">\r\n          選擇股票\r\n          <StockSelector\r\n            style={{ width: \"100%\" }}\r\n            // isRealData={{\r\n            //   marketType,\r\n            //   fileType: \"order\",\r\n            // }}\r\n            onChange={(e) => {\r\n              setStockId(e);\r\n            }}\r\n          />\r\n        </div>\r\n        <div className=\"w-1/6\">\r\n          選擇月份\r\n          <DatePicker\r\n            picker=\"month\"\r\n            disabled={!stockId}\r\n            onChange={(time, month) => {\r\n              setStartMonth(month);\r\n            }}\r\n          />\r\n        </div>\r\n        <div className=\"w-1/6\">\r\n          選擇日期\r\n          <DatePicker\r\n            allowClear\r\n            // style={{ width: \"100%\" }}\r\n            disabled={!stockId && availableDate.length == 0}\r\n            disabledDate={(current) => {\r\n              const transferedCurrent = current && current.startOf(\"day\");\r\n              const transferedEndTime = endTime && endTime;\r\n              return (\r\n                (transferedCurrent && transferedCurrent > moment()) ||\r\n                (transferedCurrent &&\r\n                  !availableDate.includes(\r\n                    transferedCurrent.format(\"YYYY-MM-DD\")\r\n                  )) ||\r\n                (transferedEndTime && transferedCurrent > transferedEndTime) ||\r\n                (transferedEndTime &&\r\n                  transferedEndTime.diff(transferedCurrent) / 86400000 >= 5)\r\n              );\r\n            }}\r\n            onChange={(time, day) => {\r\n              setStartDate(day);\r\n            }}\r\n          />\r\n        </div>\r\n        <div className=\"w-1/6\">\r\n          選擇開始時間\r\n          <DatePicker\r\n            picker=\"time\"\r\n            disabled={!stockId}\r\n            onChange={(e, time) => {              \r\n              console.log('startDate1', startDate)\r\n              const dateTime = new Date(startDate + ' ' + time).getTime();\r\n              setStartTime(dateTime);\r\n            }}\r\n          />\r\n        </div>\r\n        <div className=\"w-1/6\">\r\n          選擇結束時間\r\n          <DatePicker\r\n            picker=\"time\"\r\n            disabled={!stockId}\r\n            onChange={(e, time) => {              \r\n              console.log('startDate2', startDate)\r\n              const dateTime = new Date(startDate + ' ' + time).getTime();\r\n              setEndTime(dateTime);\r\n            }}\r\n          />\r\n        </div>\r\n        \r\n        <div>\r\n          &nbsp;\r\n          <Button\r\n            type=\"primary\"\r\n            danger\r\n            onClick={async () => {\r\n              let tempStockId = stockId;\r\n              // if (customResetStock) {\r\n              //   tempStockId = await customResetStock(stockId);\r\n              // } else {\r\n              //   await resetStock(stockId).catch((err) => {\r\n              //     errorNotification(err?.response?.data);\r\n              //   });\r\n              // }\r\n\r\n              defaultAxios({\r\n                url: 'https://140.118.118.173/api/v1/getStockData',\r\n                credentials: 'include',\r\n                method: 'GET',\r\n                headers: new Headers({\r\n                  'access-control-allow-origin': '*',\r\n                  'Content-Type': 'application/json'\r\n                }),\r\n                params: {\r\n                  cmd: \"get_stock\",\r\n                  s_code: stockId,\r\n                  sc_type: \"odr\",\r\n                  start_time: startTime,\r\n                  end_time: endTime,\r\n                },\r\n              })\r\n                .then(({ data }) => {\r\n                  console.log('stockData', data);\r\n                  setOrders(\r\n                    data.data.map((v) => {\r\n                      return {\r\n                        ...v,\r\n                        investorId: null,\r\n                        stockId: tempStockId,\r\n                      };\r\n                    })\r\n                  );\r\n\r\n                  // setAvailableDate(data.data);\r\n                  // setIsLoading(false);\r\n                })\r\n                .catch((err) => {\r\n                  console.log('error', err)\r\n                  errorNotification(err?.response?.data);\r\n                  setIsLoading(false);\r\n                });\r\n        \r\n              // defaultAxios({\r\n              //   stockId,\r\n              //   createdTime: {\r\n              //     min: startTime.startOf(\"day\").toISOString(),\r\n              //     max: endTime.endOf(\"day\").toISOString(),\r\n              //   },\r\n              // })\r\n              //   .then(({ data }) => {\r\n              //     setOrders(\r\n              //       data.content.map((v) => {\r\n              //         return {\r\n              //           ...v,\r\n              //           investorId: null,\r\n              //           stockId: tempStockId,\r\n              //         };\r\n              //       })\r\n              //     );\r\n              //   })\r\n              //   .catch((err) => {\r\n              //     errorNotification(err?.response?.data);\r\n              //   });\r\n            }}\r\n            disabled={!stockId || !startTime}\r\n          >\r\n            載入委託\r\n          </Button>\r\n        </div>\r\n      </div>\r\n      <OrderSender orders={orders} stockId={stockId} onReset={onReset} />\r\n    </div>\r\n  );\r\n};\r\n\r\nconst Simulator = ({ customResetStock, onReset }) => {\r\n  return (\r\n    <>\r\n      <RealDataSimulator\r\n        customResetStock={customResetStock}\r\n        onReset={onReset}\r\n      />\r\n    </>\r\n  );\r\n};\r\n\r\nexport default Simulator;\r\n","import { DatePicker } from \"antd\";\r\nimport { StockSelector } from \"../../component/stock-selector\";\r\nimport dayjs from \"dayjs\";\r\n\r\nconst StockDatePicker = ({ onStockChange, onStartChange, onEndChange }) => {\r\n\r\n\r\n  return (\r\n    <div>\r\n      <div className=\"flex justify-around my-6 items-center\">\r\n        <div className=\"w-1/6\">\r\n          選擇股票\r\n          <StockSelector\r\n            style={{ width: \"100%\" }}\r\n            onChange={(e) => {\r\n              onStockChange && onStockChange(e);\r\n            }}\r\n          />\r\n        </div>\r\n        <div className=\"w-1/6\">\r\n          開始時間\r\n          <DatePicker\r\n            allowClear\r\n            style={{ width: \"100%\" }}\r\n            showTime\r\n            placeholder=\"選擇開始時間\"\r\n            disabledDate={(current) => current && current > dayjs()}\r\n            onChange={(time) => {\r\n              const tempTime = time ? dayjs(time).toISOString() : time;\r\n\r\n              onStartChange && onStartChange(tempTime);\r\n            }}\r\n          />\r\n        </div>\r\n        <div className=\"w-1/6\">\r\n          結束時間\r\n          <DatePicker\r\n            allowClear\r\n            style={{ width: \"100%\" }}\r\n            showTime\r\n            placeholder=\"選擇結束時間\"\r\n            disabledDate={(current) => current && current > dayjs()}\r\n            onChange={(time) => {\r\n              const tempTime = time ? dayjs(time).toISOString() : time;\r\n\r\n              onEndChange && onEndChange(tempTime);\r\n            }}\r\n          />\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default StockDatePicker;\r\n","import { Button } from \"antd\";\r\nimport React from \"react\";\r\nimport { api, defaultAxios } from \"../../environment/api\";\r\nimport errorNotification from \"../../utils/errorNotification\";\r\n\r\nconst DownloadButton = ({ type, stockId, startTime, endTime }) => {\r\n  function download() {\r\n    const apiName = type === \"order\" ? \"getOrder\" : \"getTransaction\";\r\n    defaultAxios({\r\n      url: api[apiName].url,\r\n      method: api[apiName].method,\r\n      params: {\r\n        stockId,\r\n        createdTime: { min: startTime, max: endTime },\r\n      },\r\n    })\r\n      .then((res) => {\r\n        const content = res.data.content.length === 0 ? [{}] : res.data.content;\r\n        const key = Object.keys(content[0]).join(\",\") + \"\\n\";\r\n        const csvFile = content.reduce(\r\n          (pre, cur) => pre + Object.values(cur).join(\",\") + \"\\n\",\r\n          key\r\n        );\r\n        const fileName = `${type}_` + new Date().getTime() + \".csv\";\r\n        const link = document.createElement(\"a\");\r\n        link.setAttribute(\r\n          \"href\",\r\n          \"data:text/csv;charset=utf-8,%EF%BB%BF\" + encodeURI(csvFile)\r\n        );\r\n        link.setAttribute(\"download\", fileName);\r\n        link.click();\r\n      })\r\n      .catch((err) => {\r\n        errorNotification(err?.response?.data);\r\n      });\r\n  }\r\n\r\n  return (\r\n    <Button type=\"primary\" onClick={download}>\r\n      Download CSV\r\n    </Button>\r\n  );\r\n};\r\n\r\nexport default DownloadButton;\r\n","import { Table } from \"antd\";\r\nimport dayjs from \"dayjs\";\r\nimport React, { useEffect, useState } from \"react\";\r\nimport StockDatePicker from \"../../../component/stock-date-picker\";\r\nimport { api, defaultAxios } from \"../../../environment/api\";\r\nimport errorNotification from \"../../../utils/errorNotification\";\r\nimport DownloadButton from \"../downloadButton\";\r\n\r\nconst OrderTable = () => {\r\n  const [orederData, setOrderData] = useState([]);\r\n  const [page, setPage] = useState(1);\r\n  const [pageSize, setPageSize] = useState(20);\r\n  const [totalSize, setTotalSize] = useState(0);\r\n  const [stockId, setStockId] = useState();\r\n  const [startTime, setStartTime] = useState();\r\n  const [endTime, setEndTime] = useState();\r\n  useEffect(() => {\r\n    defaultAxios({\r\n      url: api.getDisplay.url,\r\n      method: api.getDisplay.method,\r\n      params: {\r\n        page: { page: page, pageSize: pageSize },\r\n        stockId,\r\n        createdTime: { min: startTime, max: endTime },\r\n      },\r\n    })\r\n      .then((res) => {\r\n        setOrderData(res.data.content);\r\n        setTotalSize(res.data.totalSize);\r\n      })\r\n      .catch((err) => {\r\n        errorNotification(err?.response?.data);\r\n      });\r\n  }, [page, pageSize, stockId, startTime, endTime]);\r\n\r\n  return (\r\n    <div>\r\n      <StockDatePicker\r\n        onStockChange={(e) => {\r\n          setStockId(e);\r\n        }}\r\n        onStartChange={(e) => {\r\n          setStartTime(e);\r\n        }}\r\n        onEndChange={(e) => {\r\n          setEndTime(e);\r\n        }}\r\n      />\r\n      <DownloadButton\r\n        type=\"order\"\r\n        stockId={stockId}\r\n        startTime={startTime}\r\n        endTime={endTime}\r\n      />\r\n      <Table\r\n        columns={[\r\n          {\r\n            title: \"訂單 ID\",\r\n            dataIndex: \"orderId\",\r\n            render: (data) => <span>{data || \"NULL\"}</span>,\r\n            key: Math.random(),\r\n          },\r\n          {\r\n            title: \"投資 ID\",\r\n            dataIndex: \"investorId\",\r\n            key: Math.random(),\r\n          },\r\n          {\r\n            title: \"股票 ID\",\r\n            dataIndex: \"stockId\",\r\n            key: Math.random(),\r\n          },\r\n          {\r\n            title: \"類型\",\r\n            dataIndex: \"method\",\r\n            render: (data) => <span>{data ? \"sell\" : \"buy\"}</span>,\r\n            key: Math.random(),\r\n          },\r\n          {\r\n            title: \"副類型\",\r\n            dataIndex: \"subMethod\",\r\n            render: (data) => (\r\n              <span>{data ? \"UPDATE\" : data === null ? \"NULL\" : \"CANCEL\"}</span>\r\n            ),\r\n            key: Math.random(),\r\n          },\r\n          {\r\n            title: \"價格\",\r\n            dataIndex: \"price\",\r\n            key: Math.random(),\r\n          },\r\n          {\r\n            title: \"數量\",\r\n            dataIndex: \"quantity\",\r\n            key: Math.random(),\r\n          },\r\n          {\r\n            title: \"價格類型\",\r\n            dataIndex: \"priceType\",\r\n            render: (data) => <span>{data ? \"LIMIT\" : \"MARKET\"}</span>,\r\n            key: Math.random(),\r\n          },\r\n          {\r\n            title: \"狀態\",\r\n            dataIndex: \"status\",\r\n            render: (data) => <span>{data ? \"FULL\" : \"PARTIAL\"}</span>,\r\n            key: Math.random(),\r\n          },\r\n          {\r\n            title: \"時間限制\",\r\n            dataIndex: \"timeRestriction\",\r\n            render: (data) => (\r\n              <span>{data ? \"IOC\" : data === 2 ? \"FOK\" : \"ROD\"}</span>\r\n            ),\r\n            key: Math.random(),\r\n          },\r\n          {\r\n            title: \"委託時間\",\r\n            dataIndex: \"createdTime\",\r\n            width: 200,\r\n            render: (data) => (\r\n              <span>{dayjs(data).format(\"YYYY/MM/DD HH:mm:ss\")}</span>\r\n            ),\r\n            key: Math.random(),\r\n          },\r\n        ]}\r\n        dataSource={orederData}\r\n        pagination={{\r\n          pageSize: pageSize,\r\n          total: totalSize,\r\n          onChange: (page) => {\r\n            setPage(page);\r\n          },\r\n          onShowSizeChange: (cur, size) => {\r\n            setPageSize(size);\r\n          },\r\n        }}\r\n        sticky\r\n      />\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default OrderTable;\r\n","import { Table } from \"antd\";\r\nimport dayjs from \"dayjs\";\r\nimport React, { useEffect, useState } from \"react\";\r\nimport StockDatePicker from \"../../../component/stock-date-picker\";\r\nimport { api, defaultAxios } from \"../../../environment/api\";\r\nimport errorNotification from \"../../../utils/errorNotification\";\r\nimport DownloadButton from \"../downloadButton\";\r\n\r\nconst PriceTable = () => {\r\n  const [orederData, setOrderData] = useState([]);\r\n  const [page, setPage] = useState(1);\r\n  const [pageSize, setPageSize] = useState(20);\r\n  const [totalSize, setTotalSize] = useState(0);\r\n  const [stockId, setStockId] = useState();\r\n  const [startTime, setStartTime] = useState();\r\n  const [endTime, setEndTime] = useState();\r\n  useEffect(() => {\r\n    defaultAxios({\r\n      url: api.getTransaction.url,\r\n      method: api.getTransaction.method,\r\n      params: {\r\n        page: { page: page, pageSize: pageSize },\r\n        stockId,\r\n        createdTime: { min: startTime, max: endTime },\r\n      },\r\n    })\r\n      .then((res) => {\r\n        setOrderData(res.data.content);\r\n        setTotalSize(res.data.totalSize);\r\n      })\r\n      .catch((err) => {\r\n        errorNotification(err?.response?.data);\r\n      });\r\n  }, [page, pageSize, stockId, startTime, endTime]);\r\n  return (\r\n    <div>\r\n      <StockDatePicker\r\n        onStockChange={(e) => {\r\n          setStockId(e);\r\n        }}\r\n        onStartChange={(e) => {\r\n          setStartTime(e);\r\n        }}\r\n        onEndChange={(e) => {\r\n          setEndTime(e);\r\n        }}\r\n      />\r\n      <DownloadButton\r\n        type=\"investor\"\r\n        stockId={stockId}\r\n        startTime={startTime}\r\n        endTime={endTime}\r\n      />\r\n      <Table\r\n        columns={[\r\n          {\r\n            title: \"投資 ID\",\r\n            dataIndex: \"investorId\",\r\n            key: Math.random(),\r\n          },\r\n          {\r\n            title: \"股票 ID\",\r\n            dataIndex: \"stockId\",\r\n            key: Math.random(),\r\n          },\r\n          {\r\n            title: \"類型\",\r\n            dataIndex: \"method\",\r\n            render: (data) => <span>{data ? \"sell\" : \"buy\"}</span>,\r\n            key: Math.random(),\r\n          },\r\n          {\r\n            title: \"價格\",\r\n            dataIndex: \"price\",\r\n            key: Math.random(),\r\n          },\r\n          {\r\n            title: \"數量\",\r\n            dataIndex: \"quantity\",\r\n            key: Math.random(),\r\n          },\r\n          {\r\n            title: \"價格類型\",\r\n            dataIndex: \"priceType\",\r\n            render: (data) => <span>{data ? \"LIMIT\" : \"MARKET\"}</span>,\r\n            key: Math.random(),\r\n          },\r\n          {\r\n            title: \"狀態\",\r\n            dataIndex: \"status\",\r\n            render: (data) => <span>{data ? \"FULL\" : \"PARTIAL\"}</span>,\r\n            key: Math.random(),\r\n          },\r\n          {\r\n            title: \"時間限制\",\r\n            dataIndex: \"timeRestriction\",\r\n            render: (data) => (\r\n              <span>{data ? \"IOC\" : data === 2 ? \"FOK\" : \"ROD\"}</span>\r\n            ),\r\n            key: Math.random(),\r\n          },\r\n          {\r\n            title: \"成交時間\",\r\n            dataIndex: \"createdTime\",\r\n            width: 200,\r\n            render: (data) => (\r\n              <span>{dayjs(data).format(\"YYYY/MM/DD HH:mm:ss\")}</span>\r\n            ),\r\n            key: Math.random(),\r\n          },\r\n        ]}\r\n        dataSource={orederData}\r\n        pagination={{\r\n          pageSize: pageSize,\r\n          total: totalSize,\r\n          onChange: (page) => {\r\n            setPage(page);\r\n          },\r\n          onShowSizeChange: (cur, size) => {\r\n            setPageSize(size);\r\n          },\r\n        }}\r\n        sticky\r\n      />\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default PriceTable;\r\n","import React, { Component } from \"react\";\r\n\r\nimport { CSVReader } from \"react-papaparse\";\r\nimport { api, defaultAxios } from \"../../../environment/api\";\r\nimport errorNotification from \"../../../utils/errorNotification\";\r\nimport { Button } from \"antd\";\r\n\r\nconst buttonRef = React.createRef();\r\n\r\nexport default class ReadFile extends Component {\r\n  handleOpenDialog = (e) => {\r\n    // Note that the ref is set async, so it might be null at some point\r\n    if (buttonRef.current) {\r\n      buttonRef.current.open(e);\r\n    }\r\n  };\r\n\r\n  handleOnFileLoad = (data) => {\r\n    data.forEach(function (obj, index) {\r\n      if (index > 0 && obj.data[0] != \"\") {\r\n        console.log(index, obj.data);\r\n\r\n        let sendData = {\r\n          method: Number(obj.data[0]), // BUY = 0, SELL = 1\r\n          price: Number(obj.data[1]),\r\n          quantity: Number(obj.data[2]),\r\n          priceType: Number(obj.data[3]), // MARKET = 0, LIMIT = 1\r\n          timeRestriction: Number(obj.data[4]), // ROD = 0, IOC = 1, FOK = 2\r\n          virtualOrderContainerId: Number(obj.data[6]),\r\n          delay: Number(obj.data[7]),\r\n        };\r\n\r\n        if (obj.data[5] == \"0\") {\r\n          sendData = {\r\n            method: Number(obj.data[0]), // BUY = 0, SELL = 1\r\n            price: Number(obj.data[1]),\r\n            quantity: Number(obj.data[2]),\r\n            priceType: Number(obj.data[3]), // MARKET = 0, LIMIT = 1\r\n            timeRestriction: Number(obj.data[4]), // ROD = 0, IOC = 1, FOK = 2\r\n            virtualOrderContainerId: Number(obj.data[6]),\r\n            delay: Number(obj.data[7]),\r\n            subMethod: Number(obj.data[5]),\r\n          };\r\n        }\r\n\r\n        // 限價單\r\n        defaultAxios({\r\n          url: api.postVirtualOrder.url,\r\n          method: api.postVirtualOrder.method,\r\n          data: sendData,\r\n        })\r\n          .then((res) => {\r\n            // setData(res.data);\r\n          })\r\n          .catch((err) => {\r\n            errorNotification(err?.response?.data);\r\n          });\r\n      }\r\n    });\r\n  };\r\n\r\n  handleOnError = (err, file, inputElem, reason) => {\r\n    console.log(err);\r\n  };\r\n\r\n  handleOnRemoveFile = (data) => {\r\n    console.log(data);\r\n  };\r\n\r\n  handleRemoveFile = (e) => {\r\n    // Note that the ref is set async, so it might be null at some point\r\n    if (buttonRef.current) {\r\n      buttonRef.current.removeFile(e);\r\n    }\r\n  };\r\n\r\n  render() {\r\n    return (\r\n      <CSVReader\r\n        ref={buttonRef}\r\n        onFileLoad={this.handleOnFileLoad}\r\n        onError={this.handleOnError}\r\n        noClick\r\n        noDrag\r\n        onRemoveFile={this.handleOnRemoveFile}\r\n      >\r\n        {({ file }) => (\r\n          <aside\r\n            style={{\r\n              display: \"flex\",\r\n              flexDirection: \"row\",\r\n              marginBottom: 10,\r\n            }}\r\n          >\r\n            <Button\r\n              type=\"primary\"\r\n              onClick={this.handleOpenDialog}\r\n              style={{\r\n                borderRadius: 0,\r\n                marginLeft: 0,\r\n                marginRight: 0,\r\n                width: \"40%\",\r\n                paddingLeft: 0,\r\n                paddingRight: 0,\r\n              }}\r\n            >\r\n              匯入情境(.csv)\r\n            </Button>\r\n            <div\r\n              style={{\r\n                borderWidth: 1,\r\n                borderStyle: \"solid\",\r\n                borderColor: \"#ccc\",\r\n                height: 32,\r\n                lineHeight: 1.75,\r\n                marginTop: 0,\r\n                marginBottom: 5,\r\n                paddingLeft: 13,\r\n                paddingTop: 3,\r\n                width: \"60%\",\r\n              }}\r\n            >\r\n              {file && file.name}\r\n            </div>\r\n            <Button\r\n              type=\"primary\"\r\n              danger\r\n              style={{\r\n                borderRadius: 0,\r\n                marginLeft: 0,\r\n                marginRight: 0,\r\n                paddingLeft: 20,\r\n                paddingRight: 20,\r\n              }}\r\n              onClick={this.handleRemoveFile}\r\n            >\r\n              Remove\r\n            </Button>\r\n          </aside>\r\n        )}\r\n      </CSVReader>\r\n    );\r\n  }\r\n}\r\n","import React, { useEffect, useState } from \"react\";\r\n// import ReactDOM from 'react-dom';\r\n// import CSVReader from 'react-csv-reader';\r\nimport ReadFile from \"./read-file\";\r\nimport { api, defaultAxios } from \"../../environment/api\";\r\nimport errorNotification from \"../../utils/errorNotification\";\r\nimport { Button, Checkbox, InputNumber, Select } from \"antd\";\r\nimport { StockSelector } from \"../../component/stock-selector\";\r\n\r\nconst QuickOrder = () => {\r\n  let timer;\r\n  const [stockId, setStockId] = useState(undefined);\r\n  const [isRunning, setIsRunning] = useState(true);\r\n  const [containerData, setContainerData] = useState([]);\r\n  const [quantity, setQuantity] = useState(1);\r\n  const [page, setPage] = useState(1);\r\n  const [pageSize, setPageSize] = useState(20);\r\n  const [totalSize, setTotalSize] = useState(0);\r\n  const [showType, setShowType] = useState(\"請選擇情境\");\r\n  const [timeRestriction, setTimeRestriction] = useState(0);\r\n  const [isAutoTime, setIsAutoTime] = useState(false);\r\n  // const [isSimulated, setIsSimulated] = useState(false);\r\n\r\n  const [display, setDisplay] = useState();\r\n\r\n  // 標記A1、B1\r\n  function matchFiveTick(price, type) {\r\n    if (display) {\r\n      if (type == \"buyQuantity\") {\r\n        return price == display.B1;\r\n      } else if (type == \"sellQuantity\") {\r\n        return price == display.A1;\r\n      }\r\n    }\r\n  }\r\n\r\n  // 限價單\r\n  function sendOrder(data) {\r\n    if (showType == \"請選擇情境\") {\r\n      if (stockId)\r\n        defaultAxios({\r\n          url: api.postOrder.url,\r\n          method: api.postOrder.method,\r\n          data: {\r\n            // investorId: 1,\r\n            stockId,\r\n            method: data.method, // BUY = 0, SELL = 1\r\n            price: data.price,\r\n            quantity: data.quantity,\r\n            priceType: data.priceType, // MARKET = 0, LIMIT = 1\r\n            timeRestriction: timeRestriction, // ROD = 0, IOC = 1, FOK = 2\r\n            isAutoTime,\r\n          },\r\n        })\r\n          .then((res) => {\r\n            refreshDisplay(showType);\r\n          })\r\n          .catch((err) => {\r\n            errorNotification(err?.response?.data);\r\n          });\r\n    } else {\r\n      defaultAxios({\r\n        url: api.postVirtualOrder.url,\r\n        method: api.postVirtualOrder.method,\r\n        data: {\r\n          method: data.method, // BUY = 0, SELL = 1\r\n          price: data.price,\r\n          quantity: data.quantity,\r\n          priceType: data.priceType, // MARKET = 0, LIMIT = 1\r\n          timeRestriction: timeRestriction, // ROD = 0, IOC = 1, FOK = 2\r\n          virtualOrderContainerId: showType,\r\n        },\r\n      })\r\n        .then((res) => {\r\n          setData(res.data);\r\n        })\r\n        .catch((err) => {\r\n          errorNotification(err?.response?.data);\r\n        });\r\n    }\r\n  }\r\n\r\n  // 市價單\r\n  function sendMarketOrder(data) {\r\n    if (showType == \"請選擇情境\") {\r\n      defaultAxios({\r\n        url: api.postOrder.url,\r\n        method: api.postOrder.method,\r\n        data: {\r\n          // investorId: 1,\r\n          stockId,\r\n          method: data.method, // BUY = 0, SELL = 1\r\n          price: data.price,\r\n          quantity: data.quantity,\r\n          priceType: data.priceType, // MARKET = 0, LIMIT = 1\r\n          timeRestriction: timeRestriction, // ROD = 0, IOC = 1, FOK = 2\r\n          isAutoTime,\r\n        },\r\n      })\r\n        .then((res) => {\r\n          refreshDisplay(showType);\r\n        })\r\n        .catch((err) => {\r\n          errorNotification(err?.response?.data);\r\n        });\r\n    } else {\r\n      defaultAxios({\r\n        url: api.postVirtualOrder.url,\r\n        method: api.postVirtualOrder.method,\r\n        data: {\r\n          method: data.method, // BUY = 0, SELL = 1\r\n          price: data.price,\r\n          quantity: data.quantity,\r\n          priceType: data.priceType, // MARKET = 0, LIMIT = 1\r\n          timeRestriction: timeRestriction, // ROD = 0, IOC = 1, FOK = 2\r\n          virtualOrderContainerId: showType,\r\n        },\r\n      })\r\n        .then((res) => {\r\n          setData(res.data);\r\n        })\r\n        .catch((err) => {\r\n          errorNotification(err?.response?.data);\r\n        });\r\n    }\r\n  }\r\n\r\n  // 取消單\r\n  function cancelOrder(data) {\r\n    if (showType == \"請選擇情境\") {\r\n      defaultAxios({\r\n        url: api.postOrder.url,\r\n        method: api.postOrder.method,\r\n        data: {\r\n          // investorId: 1,\r\n          stockId,\r\n          method: data.method, // BUY = 0, SELL = 1\r\n          price: data.price,\r\n          quantity: data.quantity,\r\n          priceType: data.priceType, // MARKET = 0, LIMIT = 1\r\n          timeRestriction: timeRestriction, // ROD = 0, IOC = 1, FOK = 2\r\n          subMethod: 0,\r\n          isAutoTime,\r\n        },\r\n      })\r\n        .then((res) => {\r\n          refreshDisplay(showType);\r\n        })\r\n        .catch((err) => {\r\n          errorNotification(err?.response?.data);\r\n        });\r\n    } else {\r\n      defaultAxios({\r\n        url: api.postVirtualOrder.url,\r\n        method: api.postVirtualOrder.method,\r\n        data: {\r\n          method: data.method, // BUY = 0, SELL = 1\r\n          price: data.price,\r\n          quantity: data.quantity,\r\n          priceType: data.priceType, // MARKET = 0, LIMIT = 1\r\n          timeRestriction: timeRestriction, // ROD = 0, IOC = 1, FOK = 2\r\n          subMethod: 0,\r\n          virtualOrderContainerId: showType,\r\n        },\r\n      })\r\n        .then((res) => {\r\n          setData(res.data);\r\n        })\r\n        .catch((err) => {\r\n          errorNotification(err?.response?.data);\r\n        });\r\n    }\r\n  }\r\n  function refreshDisplay(showType) {\r\n    if (showType == \"請選擇情境\") {\r\n      if (stockId)\r\n        defaultAxios({\r\n          url: api.getDisplay.url,\r\n          method: api.getDisplay.method,\r\n          params: {\r\n            stockId,\r\n            isGetLatest: true,\r\n          },\r\n        }).then((res) => {\r\n          setData(res.data);\r\n        });\r\n    } else {\r\n      defaultAxios({\r\n        url: api.getVirtualOrder.url + \"/\" + showType,\r\n        method: api.getVirtualOrder.method,\r\n        params: {\r\n          isGetLatest: true,\r\n        },\r\n      })\r\n        .then((res) => {\r\n          setData(res.data.display);\r\n        })\r\n        .catch((err) => {\r\n          errorNotification(err?.response?.data);\r\n        });\r\n    }\r\n  }\r\n\r\n  function setData(data) {\r\n    let newFiveTickRangeData = JSON.parse(JSON.stringify(data.fiveTickRange));\r\n    newFiveTickRangeData = newFiveTickRangeData.sort(\r\n      (a, b) => a.price - b.price\r\n    );\r\n\r\n    data.fiveTickRange.forEach(function (item) {\r\n      if (item.sellQuantity > 0) {\r\n        data.A1 = item.price;\r\n      }\r\n    });\r\n    newFiveTickRangeData.forEach(function (item) {\r\n      if (item.buyQuantity > 0) {\r\n        data.B1 = item.price;\r\n      }\r\n    });\r\n    setDisplay(data);\r\n  }\r\n\r\n  useEffect(() => {\r\n    defaultAxios({\r\n      url: api.getVirtualOrderContainer.url,\r\n      method: api.getVirtualOrderContainer.method,\r\n      params: {\r\n        page: { page: page, pageSize: pageSize },\r\n      },\r\n    })\r\n      .then((res) => {\r\n        let data = [];\r\n        res.data.content.forEach(function (content) {\r\n          data.push({\r\n            label: content.name,\r\n            value: content.id,\r\n          });\r\n        });\r\n        setContainerData(data);\r\n        setTotalSize(res.data.totalSize);\r\n      })\r\n      .catch((err) => {\r\n        errorNotification(err?.response?.data);\r\n      });\r\n\r\n    if (isRunning) {\r\n      timer = setInterval(() => {\r\n        refreshDisplay(showType);\r\n      }, 1000);\r\n    } else {\r\n      // refreshDisplay(showType);\r\n    }\r\n\r\n    return () => clearInterval(timer);\r\n  }, [isRunning, stockId]);\r\n\r\n  return (\r\n    <div className=\"w-10/12 mx-auto\">\r\n      {/* <div>\r\n        <ReadFile />\r\n        <hr className=\"mb-5\" />\r\n      </div> */}\r\n      <div>\r\n        <Select\r\n          value={showType}\r\n          style={{ width: 120, marginBottom: \"10px\", marginRight: \"10px\" }}\r\n          onChange={(value) => {\r\n            setIsRunning(value === \"請選擇情境\");\r\n            clearInterval(timer);\r\n            setShowType(value);\r\n            refreshDisplay(value);\r\n          }}\r\n          options={[\r\n            { label: \"請選擇情境\", value: \"請選擇情境\" },\r\n            ...containerData,\r\n          ]}\r\n        />\r\n\r\n        <InputNumber\r\n          min={1}\r\n          defaultValue={quantity}\r\n          style={{ marginRight: \"10px\" }}\r\n          onChange={(value) => {\r\n            setQuantity(value);\r\n          }}\r\n        />\r\n\r\n        <Select\r\n          value={timeRestriction}\r\n          style={{ width: 120, marginBottom: \"10px\", marginRight: \"10px\" }}\r\n          onChange={(value) => {\r\n            setTimeRestriction(value);\r\n          }}\r\n          options={[\r\n            {\r\n              label: \"ROD\",\r\n              value: 0,\r\n            },\r\n            {\r\n              label: \"IOC\",\r\n              value: 1,\r\n            },\r\n            {\r\n              label: \"FOK\",\r\n              value: 2,\r\n            },\r\n          ]}\r\n        />\r\n        {showType == \"請選擇情境\" ? (\r\n          <StockSelector\r\n            style={{ width: 120 }}\r\n            onChange={(e) => {\r\n              setStockId(e);\r\n            }}\r\n          />\r\n        ) : (\r\n          <Button\r\n            type=\"primary\"\r\n            danger\r\n            onClick={() => {\r\n              defaultAxios({\r\n                url: api.resetVirtualOrder.url + \"/\" + showType,\r\n                method: api.resetVirtualOrder.method,\r\n                data: {\r\n                  id: 1,\r\n                  isReset: true,\r\n                },\r\n              })\r\n                .then(() => {\r\n                  refreshDisplay(showType);\r\n                })\r\n                .catch((err) => {\r\n                  errorNotification(err?.response?.data);\r\n                });\r\n            }}\r\n          >\r\n            Reset\r\n          </Button>\r\n        )}\r\n        {/* <Checkbox\r\n          checked={isAutoTime}\r\n          onChange={(e) => {\r\n            const { checked } = e.target;\r\n            setIsAutoTime(checked);\r\n            // if (!checked) {\r\n            //   setIsSimulated(false);\r\n            // }\r\n          }}\r\n        >\r\n          是否自動填入過去時間\r\n        </Checkbox> */}\r\n        {/* <Checkbox\r\n          checked={isSimulated}\r\n          onChange={(e) => {\r\n            setIsSimulated(e.target.checked);\r\n          }}\r\n          disabled={!isAutoTime}\r\n        >\r\n          是否為虛擬單\r\n        </Checkbox> */}\r\n      </div>\r\n\r\n      <div\r\n        style={{\r\n          display: showType === \"請選擇情境\" && !stockId ? \"none\" : undefined,\r\n        }}\r\n      >\r\n        <div className=\"flex mb-1 items-center\">\r\n          <Button\r\n            className=\"w-full\"\r\n            style={{ background: \"lightpink\", borderColor: \"lightpink\" }}\r\n            onClick={() => {\r\n              sendMarketOrder({\r\n                method: 0,\r\n                price: 0,\r\n                quantity: quantity,\r\n                priceType: 0,\r\n              });\r\n            }}\r\n          >\r\n            &nbsp;\r\n          </Button>\r\n          <div className={\"bg-blue-300 text-center w-1/4 mx-1 h-full py-1.5\"}>\r\n            市價\r\n          </div>\r\n          <Button\r\n            className=\"w-full py-3\"\r\n            style={{ background: \"lightgreen\", borderColor: \"lightgreen\" }}\r\n            onClick={() => {\r\n              sendMarketOrder({\r\n                method: 1,\r\n                price: 0,\r\n                quantity: quantity,\r\n                priceType: 0,\r\n              });\r\n            }}\r\n          >\r\n            &nbsp;\r\n          </Button>\r\n        </div>\r\n        <hr className=\"my-2\" />\r\n        <div className=\"flex mb-1 items-center\">\r\n          <Button\r\n            className=\"w-1/2 mr-1\"\r\n            style={{ background: \"none\", border: \"none\" }}\r\n          >\r\n            取消單\r\n          </Button>\r\n          <Button\r\n            className=\"w-1/2\"\r\n            style={{ background: \"none\", border: \"none\" }}\r\n          >\r\n            限價單\r\n          </Button>\r\n          <div className={\"text-center w-1/4 mx-1 h-full py-1.5\"}>&nbsp;</div>\r\n          <Button\r\n            className=\"w-1/2 mr-1\"\r\n            style={{ background: \"none\", border: \"none\" }}\r\n          >\r\n            限價單\r\n          </Button>\r\n          <Button\r\n            className=\"w-1/2\"\r\n            style={{ background: \"none\", border: \"none\" }}\r\n          >\r\n            取消單\r\n          </Button>\r\n        </div>\r\n        {display &&\r\n          display.tickRange.map((range, key) => (\r\n            <div key={key} className=\"flex mb-1 items-center\">\r\n              <Button\r\n                className=\"w-1/2 mr-1\"\r\n                style={{ background: \"#ffb6c180\", borderColor: \"lightpink\" }}\r\n                onClick={() => {\r\n                  cancelOrder({\r\n                    method: 0,\r\n                    price: range.price,\r\n                    quantity: quantity,\r\n                    priceType: 1,\r\n                  });\r\n                }}\r\n              >\r\n                {range.investorBuyQuantity || \" \"}\r\n              </Button>\r\n              <Button\r\n                className=\"w-1/2\"\r\n                style={{\r\n                  background: matchFiveTick(range.price, \"buyQuantity\")\r\n                    ? \"lightcoral\"\r\n                    : \"lightpink\",\r\n                  borderColor: \"lightpink\",\r\n                }}\r\n                onClick={() => {\r\n                  sendOrder({\r\n                    method: 0,\r\n                    price: range.price,\r\n                    quantity: quantity,\r\n                    priceType: 1,\r\n                  });\r\n                }}\r\n              >\r\n                {range.buyQuantity > 0 ? range.buyQuantity : \" \"}\r\n              </Button>\r\n              <div\r\n                className={\r\n                  (display && display.matchPrice == range.price\r\n                    ? \"bg-yellow-400\"\r\n                    : \"bg-yellow-200\") + \" text-center w-1/4 mx-1 h-full py-1.5\"\r\n                }\r\n              >\r\n                {range.price}\r\n              </div>\r\n              <Button\r\n                className=\"w-1/2 mr-1\"\r\n                style={{\r\n                  background: matchFiveTick(range.price, \"sellQuantity\")\r\n                    ? \"lightseagreen\"\r\n                    : \"lightgreen\",\r\n                  borderColor: \"lightgreen\",\r\n                }}\r\n                onClick={() => {\r\n                  sendOrder({\r\n                    method: 1,\r\n                    price: range.price,\r\n                    quantity: quantity,\r\n                    priceType: 1,\r\n                  });\r\n                }}\r\n              >\r\n                {range.sellQuantity > 0 ? range.sellQuantity : \" \"}\r\n              </Button>\r\n              <Button\r\n                className=\"w-1/2\"\r\n                style={{ background: \"#90ee9080\", borderColor: \"lightgreen\" }}\r\n                onClick={() => {\r\n                  cancelOrder({\r\n                    method: 1,\r\n                    price: range.price,\r\n                    quantity: quantity,\r\n                    priceType: 1,\r\n                  });\r\n                }}\r\n              >\r\n                {range.investorSellQuantity || \" \"}\r\n              </Button>\r\n            </div>\r\n          ))}\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default QuickOrder;\r\n","import React, { useState, useEffect } from \"react\";\r\nimport { defaultAxios, api } from \"../../environment/api\";\r\nimport DisplayChart from \"../../component/chart/display-chart\";\r\nimport Simulator from \"../simulator\";\r\nimport BarLineChart from \"../../pages/echart-example/bar-line\";\r\nimport { Input, Button, Radio, Select } from 'antd';\r\nconst { Option } = Select;\r\n\r\nconst ReplayChart = () => {\r\n  const [interestRate, setInterestRate] = useState(5);\r\n  const [volatility, setVolatility] = useState(30);\r\n  const [data, setData] = useState({\r\n    xAxis: [],\r\n    yAxis: [],\r\n  });\r\n  const [isSet, setIsSet] = useState(false);\r\n  const [isStart, setIsStart] = useState(false);\r\n  const [isStockPanel, setIsStockPanel] = useState(false);\r\n  const [currentStatus, setCurrentStatus] = useState(-1);\r\n  const [X, setX] = useState([]);\r\n  const [Y, setY] = useState([]);\r\n  const [t, setT] = useState([]);\r\n  const [buttonText, setButtonText] = useState('START');\r\n  const [type, setType] = useState(1);\r\n  const [it, setIt] = useState(0);\r\n  let [timer, setTimer] = useState(null);\r\n  const [longShort, setLongShort] = useState(1);\r\n  const [volume, setVolume] = useState(1);\r\n  const [strike, setStrike] = useState(100);\r\n  const [maturity, setMaturity] = useState(1);\r\n  const [cashFlow, setCashFlow] = useState(0);\r\n  const [Cash, setCash] = useState([]);\r\n  \r\n  const nt = 1001;\r\n  let t_now = [];\r\n  let S = [];\r\n  // let timer;\r\n\r\n  // Reset 按鈕按下\r\n  const ResetButtonPushed = () => {\r\n    stopTimer();\r\n    setIsSet(false);\r\n    setIsStart(false);\r\n    setCurrentStatus(-1);\r\n    setButtonText('START');\r\n    setData({});\r\n  }\r\n\r\n  // Start 按鈕按下\r\n  const StartButtonPushed = () => {\r\n    let newY = [];\r\n    let c = it;\r\n    switch (currentStatus) {\r\n      // START\r\n      case 0:\r\n        setIsStockPanel(false);\r\n        startTimer(c, newY);\r\n        // runPlot();\r\n        break;\r\n\r\n      // PAUSE\r\n      case 1:\r\n        stopTimer();\r\n        setIsStart(false);\r\n        setCurrentStatus(2);\r\n        setButtonText('CONTINUE');\r\n        setIsStart(true);\r\n        setIsStockPanel(true);\r\n        initialOrderPanel();\r\n        break;\r\n\r\n      // CONTINUE\r\n      case 2:\r\n        setIsStockPanel(false);\r\n        newY = data.yAxis;\r\n        startTimer(c, newY);\r\n        break;\r\n    }\r\n  }\r\n\r\n  // Start Timer\r\n  const startTimer = (c, newY) => {\r\n    setTimer(setInterval(() => {\r\n      if (c >= X.length) {\r\n        setCurrentStatus(3);\r\n        stopTimer();\r\n        setIsStart(false);\r\n        alert('done');\r\n      } else if (isStart) {\r\n        newY.push(Y[c]);\r\n        setIt(c);\r\n        setData({\r\n          xAxis: X,\r\n          yAxis: newY,\r\n        });\r\n        c++;\r\n        console.log(c, it, X.length);\r\n      } else {\r\n        stopTimer();\r\n      }\r\n      setCurrentStatus(1);\r\n      setButtonText('PAUSE');\r\n    }, 3));\r\n  }\r\n\r\n  // Stop Timer\r\n  const stopTimer = () => {\r\n    clearInterval(timer);\r\n    setTimer(null);\r\n  }\r\n\r\n  // useEffect(() => {\r\n    // startTimer(count, []);\r\n    // let intervalId = setInterval(startTimer,1000)\r\n  // }, [isSet, isStart])\r\n\r\n  const InterestRateValueChanged = (e) => {\r\n    setInterestRate(e.target.value);\r\n  }\r\n\r\n  const VolatilityValueChanged = (e) => {\r\n    setVolatility(e.target.value);\r\n  }\r\n\r\n  // Long 及 Short 選擇改變 \r\n  const LongShortSelectionChanged = (e) => {\r\n    setLongShort(e.target.value);\r\n    updateOrderPanel(type);\r\n  };\r\n  \r\n  // 商品型態選擇改變\r\n  const TypeSelectionChanged = (currentType) => {\r\n    setType(currentType);\r\n    updateOrderPanel(currentType);\r\n  }\r\n\r\n  // Volume 數值改變\r\n  const VolumeValueChanged = (e) => {\r\n    setVolume(e.target.value);\r\n    updateOrderPanel(type);\r\n  }\r\n\r\n  // Strike 數值改變\r\n  const StrikeValueChanged = (e) => {\r\n    setStrike(e.target.value);\r\n    updateOrderPanel(type);\r\n  }\r\n\r\n  // Maturity 數值改變\r\n  const MaturityValueChanged = (value) => {\r\n    setMaturity(value);\r\n    updateOrderPanel(type);\r\n  };\r\n\r\n  // Place Order 按鈕按下\r\n  const PlaceOrderPushed =  () => {\r\n    let nPortfolio = nPortfolio + 1\r\n    // 宣告 tableData[] 表示第 nPortfolio 筆下單資訊表 (共 10 個欄位)\r\n    let i = nPortfolio;\r\n    let tableData = [];\r\n    tableData[1] = i;\r\n    tableData[2] = X[it];\r\n    tableData[3] = type;\r\n\r\n    let expireIt = [];\r\n    let expireInd;\r\n    let T; \r\n    if (type == 1) {\r\n      expireIt[i] = nt;\r\n    } else {\r\n      T = maturity;\r\n      tableData[4] = T;\r\n      expireInd = Math.round(1000 * T + 1);\r\n      expireIt[i]= expireInd;\r\n      let K = strike;\r\n      tableData[5] = K;\r\n    }\r\n    let vol = volume\r\n    tableData[6] = vol * longShort;\r\n    let cost = [];\r\n    cost[i] = -cashFlow;\r\n    tableData[7] = -cashFlow;\r\n    tableData[8] = -cashFlow;\r\n    tableData[9] = 0;\r\n    // 將 tableData 資料填入 portfolioTable 第 i 列\r\n    let r = interestRate / 100;\r\n    let dt = 1 / (nt - 1);\r\n    let tt = [];\r\n    for (let j = 0; j <= (nt - it); j++) {\r\n      tt[j + 1] = j * dt;\r\n    }\r\n    let cash = [];\r\n    for (let j = it; j <= nt; j++) {\r\n      cash[j] = cash[j] + cashFlow * Math.exp(r * tt[j - it + 1]);\r\n    }\r\n    let portfolioProfit = [];\r\n    if (type == 1) {\r\n      setCashFlow(longShort * Y[nt] * vol);\r\n      cash[nt] = cash[nt] + cashFlow;\r\n      portfolioProfit[i][nt] = cashFlow - cost[i]\r\n    } else {\r\n      for (let j = 0; j <= (nt - expireInd); j++) {\r\n        tt[j + 1] = j * dt;\r\n      }\r\n      switch (type) {\r\n        case 2:\r\n          setCashFlow(longShort * (Y[expireInd] - K) * vol);\r\n          break;\r\n        case 3:\r\n          setCashFlow(longShort * Math.max(Y[expireInd] - K, 0) * vol);\r\n          break;\r\n        case 4:\r\n          setCashFlow(longShort * Math.max(K - Y[expireInd], 0) * vol);\r\n          break;\r\n        case 5:\r\n          setCashFlow(longShort * (Y[expireInd] > K) * vol);\r\n          break;\r\n        case 6:\r\n          setCashFlow(longShort * (K > Y[expireInd]) * vol);\r\n          break;\r\n      }\r\n      for (let j = expireInd; j <= nt; j++) {\r\n        cash[j] = cash[j] + cashFlow * Math.exp(r * tt[j - expireInd + 1]);\r\n        portfolioProfit[i][j] = cashFlow - cost[i];\r\n      }\r\n    }\r\n\r\n    let marketPrice = [];\r\n    if (type == 1) {\r\n      for (let j = it; j <= (nt - 1); j++) {\r\n        marketPrice[i][j] = longShort * Y[j] * vol;\r\n        portfolioProfit[i][j] = marketPrice[i][j] - cost[i];\r\n      }\r\n    } else {\r\n      for (let j = 0; j <= (expireInd - 1 - it); j++) {\r\n        tau[j + 1] = T - j * dt;\r\n      }\r\n      for (let j = it; j <= (expireInd - 1); j++) {\r\n        ind[j - it + 1] = j;\r\n      }\r\n      v = volatility / 100;\r\n\r\n      switch (type) {\r\n        case 2:\r\n          for (let j = 1; j <= (expireInd - it); j++) {\r\n            price = Y[ind[j]] - K * Math.exp(-r * tau[j]);\r\n          }\r\n          break;\r\n        case 3:\r\n          for (let j = 1; j <= (expireInd - it); j++) {\r\n            price = vanillaPrice(Y[ind[j]], K, r, v, tau[j], 1);\r\n          }\r\n          break;\r\n        case 4:\r\n          for (let j = 1; j <= (expireInd - it); j++) {\r\n            price = vanillaPrice(Y[ind[j]], K, r, v, tau[j], -1);\r\n          }\r\n          break;\r\n        case 5:\r\n          for (let j = 1; j <= (expireInd - it); j++) {\r\n            price = binaryPrice(Y[ind[j]], K, r, v, tau[j], 1);\r\n          }\r\n          break;\r\n        case 6:\r\n          for (let j = 1; j <= (expireInd - it); j++) {\r\n            price = binaryPrice(Y[ind[j]], K, r, v, tau[j], -1);\r\n          }\r\n          break;\r\n      }\r\n      for (let j = it; j <= (expireInd - 1); j++) {\r\n        marketPrice[i][j] = longShort * price[j - it + 1] * vol;\r\n        portfolioProfit[i][j] = marketPrice[i][j] - cost[i];\r\n      }\r\n    }\r\n    for (let j = 1; j <= nt; j++) {\r\n      for (let k = 1; k <= nPortfolio; k++) {\r\n        profit[j] = profit[j] + marketPrice[k, j] + cash[j];\r\n      }\r\n    }\r\n    setCash(cash[it]);\r\n  }\r\n\r\n  // 下單面板初始化設定\r\n  const initialOrderPanel = () => {\r\n    setIsStockPanel(true);\r\n    setType(1);\r\n    setLongShort(1);\r\n    setVolume(1);\r\n    setStrike(100);\r\n    setMaturity(1);\r\n    setCashFlow(-Y[it]);\r\n    updateOrderPanel(type);\r\n  }\r\n\r\n  // 下單面板更新\r\n  const updateOrderPanel = (typeNow) => {\r\n    // LongShortFlag = (Long: 1; Short: -1)\r\n    let S0 = Y[it];\r\n    let K = strike;\r\n    let r = interestRate / 100;\r\n    let v = volatility / 100;\r\n    let T = maturity;\r\n    let tau = T - t[it];\r\n    let vol = volume;\r\n    let price = 0;\r\n\r\n    switch(typeNow) {\r\n      case 1:\r\n        price = S0;\r\n        break;\r\n      case 2:\r\n        setStrike(Math.round(S0 * Math.exp(r * tau), 2));\r\n        price = 0;\r\n        break;\r\n      case 3: case 4:\r\n        price = vanillaPrice(S0, K, r, v, tau, 7 - 2 * typeNow);\r\n        break;\r\n      case 5: case 6:\r\n        price = binaryPrice(S0, K, r, v, tau, 11 - 2 * typeNow);\r\n        break;\r\n    }\r\n    setCashFlow(-longShort * price * vol);\r\n  }\r\n\r\n  // 更新 Portfolio Table\r\n  const updatePortfolioTable = () => {\r\n    setCash(cash[it]);\r\n    Profit = profit[it];\r\n    Time = t[it];\r\n    if (nPortfolio > 0) {\r\n      for (let i = 1; i <= nPortfolio; i++) {\r\n        portfolioTable[i, 8] = marketPrice[i, it];\r\n        portfolioTable[i, 9] = portfolioProfit [i, it];\r\n        if (expireIt[i] < it) {\r\n          portfolioTable[i, 10] = 'X';\r\n        }\r\n      }\r\n    }\r\n  }\r\n\r\n  // 產生股價\r\n  const generateGBM = () => {\r\n    let r = interestRate / 100;\r\n    let v = volatility / 100;\r\n    for (let j = 0; j < nt; j++) {\r\n      t_now[j] = (j) / (nt - 1);\r\n    }\r\n    setT(t_now);\r\n\r\n    let dt = 1 / (nt - 1);\r\n    S[0] = 100\r\n\r\n    let total = 0;\r\n    let dataR = [];\r\n    for (let j = 1; j < nt; j++) {\r\n      let U1 = Math.random();\r\n      let U2 = Math.random();\r\n      let Z =  Math.sqrt(-2 * Math.log(U1)) * Math.cos(2 * U2 * Math.PI);\r\n      let R = (r - 0.5 * Math.pow(v, 2)) * dt + v * Math.sqrt(dt) * Z;\r\n      S[j] = S[j - 1] * Math.exp(R);\r\n    }\r\n\r\n    console.log('S', S);\r\n    console.log('t', t);\r\n\r\n    setX(t_now);\r\n    setY(S);\r\n    setIsSet(true);\r\n    setIsStart(true);\r\n    setCurrentStatus(0);\r\n    setIsStockPanel(true);\r\n    initialOrderPanel();\r\n  }\r\n  \r\n  // vanilla option 評價公式\r\n  const vanillaPrice = (S0, K, r, v, T, zeta) => {\r\n    let vt = v * Math.sqrt(T);\r\n    let d1 = (Math.log(S0 / K) + (r + 0.5 * Math.pow(v, 2)) * T) / vt;\r\n    let d2 = d1 - vt;\r\n    let Nd1 = N(d1);\r\n    let Nd2 = N(d2);\r\n    let price = zeta * (S0 * Nd1 - K * Math.exp(-r * T) * Nd2);\r\n    return price;\r\n  }\r\n\r\n  // binary option 評價公式\r\n  const binaryPrice = (S0, K, r, v, T, zeta) => {\r\n    let vt = v * Math.sqrt(T);\r\n    let d = (Math.log(S0 / K) + (r - 0.5 * Math.pow(v, 2)) * T) / vt;\r\n    let Nd = N(d);\r\n    let price = Math.exp(-r * T) * Nd;\r\n    return price;\r\n  }\r\n\r\n  // Normal CDF\r\n  const N = (z) => {\r\n    let b1 = 0.31938153;\r\n    let b2 = -0.356563782;\r\n    let b3 = 1.781477937;\r\n    let b4 = -1.821255978;\r\n    let b5 = 1.330274429;\r\n    let p = 0.2316419;\r\n    let c2 = 0.3989423;\r\n    let a = Math.abs(z);\r\n    if (a > 6.0) {return 1.0;}\r\n    let t = 1.0 / (1.0 + a * p);\r\n    let b = c2 * Math.exp((-z) * (z / 2.0));\r\n    let n = ((((b5 * t + b4) * t + b3) * t + b2) * t + b1) * t;\r\n    n = 1.0 - b * n;\r\n    if (z < 0.0) {n = 1.0 - n;}\r\n    return n;\r\n  }\r\n\r\n  return (\r\n    <div className=\"flex\">\r\n\r\n      {/* 設定 */}\r\n      <div className=\"w-1/4\">\r\n        <div className=\"border p-5\">\r\n          <h6>Stock Properties</h6>\r\n          <div className=\"flex items-center mb-2\">\r\n            <span className=\"w-2/3\">Interest rate (%)</span>\r\n            <Input disabled={isSet} type=\"number\" className=\"w-30\" value={interestRate} onChange={InterestRateValueChanged} />\r\n          </div>\r\n          <div className=\"flex items-center mb-2\">\r\n            <span className=\"w-2/3\">Volatility (%)</span>\r\n            <Input disabled={isSet} type=\"number\" className=\"w-30\" value={volatility} onChange={VolatilityValueChanged} />\r\n          </div>\r\n          <Button disabled={isSet} onClick={() => generateGBM()} className=\"w-full\">Set</Button>\r\n        </div>\r\n\r\n        <div className=\"flex p-5\">\r\n          <Button disabled={!isSet} onClick={() => ResetButtonPushed()} className=\"w-1/2\" type=\"danger\">Reset</Button>\r\n          <Button disabled={!isSet || currentStatus == 3} onClick={() => StartButtonPushed()} className=\"w-1/2\" type=\"primary\">{buttonText}</Button>\r\n        </div>\r\n\r\n        <div className=\"border p-5\">\r\n          <h6>Place Order</h6>\r\n          <Radio.Group disabled={!isStockPanel} className=\"mb-2\" onChange={LongShortSelectionChanged} value={longShort}>\r\n            <Radio value={1}>Long</Radio>\r\n            <Radio value={-1}>Short</Radio>\r\n          </Radio.Group>\r\n          <Button disabled={!isStockPanel} type={type == 1 ? 'primary' : 'default'} onClick={() => TypeSelectionChanged(1)} className=\"w-full mb-2\">Stock</Button>\r\n          <Button disabled={!isStockPanel} type={type == 2 ? 'primary' : 'default'} onClick={() => TypeSelectionChanged(2)} className=\"w-full mb-2\">Futures</Button>\r\n          <div className=\"flex mb-2\">\r\n            <Button disabled={!isStockPanel} type={type == 3 ? 'primary' : 'default'} onClick={() => TypeSelectionChanged(3)} className=\"w-1/2\">Vanilla Call</Button>\r\n            <Button disabled={!isStockPanel} type={type == 4 ? 'primary' : 'default'} onClick={() => TypeSelectionChanged(4)} className=\"w-1/2\">Vanilla Put</Button>\r\n          </div>\r\n          <div className=\"flex mb-2\">\r\n            <Button disabled={!isStockPanel} type={type == 5 ? 'primary' : 'default'} onClick={() => TypeSelectionChanged(5)} className=\"w-1/2\">Binary Call</Button>\r\n            <Button disabled={!isStockPanel} type={type == 6 ? 'primary' : 'default'} onClick={() => TypeSelectionChanged(6)} className=\"w-1/2\">Binary Put</Button>\r\n          </div>\r\n          <div className=\"flex items-center\">\r\n            <span className=\"w-1/3\">Volume</span>\r\n            <Input disabled={!isStockPanel} type=\"number\" className=\"w-2/3\" value={volume} onChange={VolumeValueChanged} />\r\n          </div>\r\n          <div className=\"flex items-center\" style={{ opacity: (type == 1) ? 0 : 1 }}>\r\n            <span className=\"w-1/3\">Strike</span>\r\n            <Input disabled={type == 1 || type == 2 || !isStockPanel} type=\"number\" className=\"w-2/3\" value={strike} onChange={StrikeValueChanged} />\r\n          </div>\r\n          <div className=\"flex items-center\" style={{ opacity: (type == 1) ? 0 : 1 }}>\r\n            <span className=\"w-1/3\">Maturity</span>\r\n            <Select disabled={type == 1 || !isStockPanel} className=\"w-2/3\" defaultValue=\"1\" onChange={MaturityValueChanged}>\r\n              <Option disabled={X[it] >= 0.2} value=\"0.2\">0.2</Option>\r\n              <Option disabled={X[it] >= 0.4} value=\"0.4\">0.4</Option>\r\n              <Option disabled={X[it] >= 0.6} value=\"0.6\">0.6</Option>\r\n              <Option disabled={X[it] >= 0.8} value=\"0.8\">0.8</Option>\r\n              <Option value=\"1\">1</Option>\r\n            </Select>\r\n          </div>\r\n          <div className=\"flex items-center\">\r\n            <span className=\"w-1/3\">Cash Flow</span>\r\n            <Input disabled={true} type=\"number\" className=\"w-2/3\" value={cashFlow} />\r\n          </div>\r\n          <Button disabled={!isStockPanel} className=\"w-full mt-3\" type=\"primary\" onClick={() => PlaceOrderPushed()}>Place Order</Button>\r\n        </div>\r\n      </div>\r\n\r\n      {/* 圖表 */}\r\n      <div className=\"w-3/4\">\r\n        <BarLineChart\r\n          data={data}\r\n        />\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default ReplayChart;\r\n","import React, { useEffect } from \"react\";\r\nimport { Modal, Form, Input, InputNumber, Select } from \"antd\";\r\nimport { api, defaultAxios } from \"../../environment/api\";\r\nimport errorNotification from \"../../utils/errorNotification\";\r\nconst { Option } = Select;\r\n\r\nconst CreateAndEdit = ({ isVisible, setIsVisible, initVal, reload }) => {\r\n  const [form] = Form.useForm();\r\n  console.log(initVal);\r\n  useEffect(() => {\r\n    if (initVal) {\r\n      form.setFieldsValue(initVal);\r\n    }\r\n  }, [initVal]);\r\n  return (\r\n    <Modal\r\n      title={`${initVal ? \"修改\" : \"新增\"}股票`}\r\n      visible={isVisible}\r\n      cancelText=\"取消\"\r\n      okText=\"確認\"\r\n      onCancel={() => {\r\n        form.resetFields();\r\n        setIsVisible(false);\r\n      }}\r\n      onOk={() => {\r\n        form.submit();\r\n      }}\r\n    >\r\n      <Form\r\n        form={form}\r\n        layout=\"vertical\"\r\n        onFinish={(value) => {\r\n          console.log(value);\r\n          const axiosType = initVal ? \"putStock\" : \"postStock\";\r\n          console.log({\r\n            url: api[axiosType].url,\r\n            method: api[axiosType].method,\r\n          });\r\n          defaultAxios({\r\n            url: api[axiosType].url,\r\n            method: api[axiosType].method,\r\n            data: { ...value, groupId: [] },\r\n          })\r\n            .then(() => {\r\n              form.resetFields();\r\n              setIsVisible(false);\r\n              reload(Math.random());\r\n            })\r\n            .catch((err) => {\r\n              errorNotification(err?.response?.data);\r\n            });\r\n        }}\r\n      >\r\n        <Form.Item\r\n          label=\"ID\"\r\n          name=\"id\"\r\n          rules={[{ required: true, message: \"Require\" }]}\r\n        >\r\n          <Input />\r\n        </Form.Item>\r\n        <Form.Item\r\n          label=\"收盤價格\"\r\n          name=\"closedPrice\"\r\n          rules={[{ required: true, message: \"Require\" }]}\r\n        >\r\n          <InputNumber type=\"number\" className=\"w-full\" min={0} />\r\n        </Form.Item>\r\n        <Form.Item\r\n          label=\"漲跌幅(%)\"\r\n          name=\"priceLimit\"\r\n          rules={[{ required: true, message: \"Require\" }]}\r\n        >\r\n          <InputNumber type=\"number\" className=\"w-full\" min={0} />\r\n        </Form.Item>\r\n        <Form.Item\r\n          label=\"最近價格\"\r\n          name=\"currentPrice\"\r\n          rules={[{ required: true, message: \"Require\" }]}\r\n        >\r\n          <InputNumber type=\"number\" className=\"w-full\" min={0} />\r\n        </Form.Item>\r\n        <Form.Item\r\n          label=\"類別\"\r\n          name=\"type\"\r\n          rules={[{ required: true, message: \"Require\" }]}\r\n        >\r\n          <Select className=\"w-full\">\r\n            <Option value={0}>現股</Option>\r\n            <Option value={1}>ETF</Option>\r\n            <Option value={2}>權證</Option>\r\n          </Select>\r\n        </Form.Item>\r\n      </Form>\r\n    </Modal>\r\n  );\r\n};\r\n\r\nexport default CreateAndEdit;\r\n","import React, { useState, useEffect } from \"react\";\r\nimport { Table, Button, Space, Form, Input, DatePicker } from \"antd\";\r\nimport { DeleteOutlined, EditOutlined } from \"@ant-design/icons\";\r\nimport CreateAndEdit from \"./modal\";\r\nimport { api, defaultAxios } from \"../../environment/api\";\r\nimport errorNotification from \"../../utils/errorNotification\";\r\nimport dayjs from \"dayjs\";\r\n\r\nconst TYPE_MAPPING = [\"現股\", \"ETF\", \"權證\"];\r\n\r\nconst Stock = () => {\r\n  const [data, setData] = useState([]);\r\n  const [totalSize, setTotalSize] = useState(0);\r\n  const [page, setPage] = useState(1);\r\n  const [pageSize, setPageSize] = useState(20);\r\n  const [searchCondition, setSearchCondition] = useState({});\r\n  const [selectStock, setSelectStock] = useState([]);\r\n  const [visible, setVisible] = useState(false);\r\n  const [reloadData, setReloadData] = useState(0);\r\n  const [editData, setEditData] = useState();\r\n  function deleteAxios(id) {\r\n    defaultAxios({\r\n      url: api.deleteStock.url,\r\n      method: api.deleteStock.method,\r\n      data: {\r\n        id,\r\n      },\r\n    })\r\n      .then(() => {\r\n        setReloadData(Math.random());\r\n        setSelectStock([]);\r\n      })\r\n      .catch((err) => {\r\n        errorNotification(err?.response?.data);\r\n      });\r\n  }\r\n  useEffect(() => {\r\n    defaultAxios({\r\n      url: api.getStock.url,\r\n      method: api.getStock.method,\r\n      params: {\r\n        page: { page: page, pageSize: pageSize },\r\n        ...searchCondition,\r\n      },\r\n    })\r\n      .then((res) => {\r\n        setData(res.data.content);\r\n        setTotalSize(res.data.totalSize);\r\n      })\r\n      .catch((err) => {\r\n        errorNotification(err?.response?.data);\r\n      });\r\n  }, [page, pageSize, searchCondition, reloadData]);\r\n  useEffect(() => {\r\n    if (!visible) {\r\n      setEditData(null);\r\n    }\r\n  }, [visible]);\r\n  return (\r\n    <div className=\"p-4\">\r\n      <CreateAndEdit\r\n        initVal={editData}\r\n        isVisible={visible}\r\n        setIsVisible={setVisible}\r\n        reload={setReloadData}\r\n      />\r\n      <Form\r\n        layout=\"vertical\"\r\n        className=\"grid grid-cols-3 gap-x-4\"\r\n        onFinish={(value) => {\r\n          if (value.createdTime) {\r\n            setSearchCondition({\r\n              ...value,\r\n              createdTime: {\r\n                min: value.createdTime[0],\r\n                max: value.createdTime[1],\r\n              },\r\n            });\r\n          } else setSearchCondition(value);\r\n        }}\r\n      >\r\n        <Form.Item label=\"ID\" name=\"id\">\r\n          <Input />\r\n        </Form.Item>\r\n        <Form.Item label=\"收盤價格\" name=\"closedPrice\">\r\n          <Input.Group className=\"grid grid-cols-11 gap-x-4\">\r\n            <Form.Item name={[\"closedPrice\", \"min\"]} noStyle>\r\n              <Input\r\n                type=\"number\"\r\n                min={0}\r\n                className=\"col-span-5\"\r\n                placeholder=\"Minimum\"\r\n              />\r\n            </Form.Item>\r\n            <span className=\"p-0 col-span-1 text-center\">~</span>\r\n            <Form.Item name={[\"closedPrice\", \"max\"]} noStyle>\r\n              <Input\r\n                type=\"number\"\r\n                min={0}\r\n                className=\"col-span-5\"\r\n                placeholder=\"Maximum\"\r\n              />\r\n            </Form.Item>\r\n          </Input.Group>\r\n        </Form.Item>\r\n        <Form.Item label=\"漲跌幅\" name=\"priceLimit\">\r\n          <Input.Group className=\"grid grid-cols-11 gap-x-4\">\r\n            <Form.Item name={[\"priceLimit\", \"min\"]} noStyle>\r\n              <Input\r\n                type=\"number\"\r\n                min={0}\r\n                className=\"col-span-5\"\r\n                placeholder=\"Minimum\"\r\n              />\r\n            </Form.Item>\r\n            <span className=\"p-0 col-span-1 text-center\">~</span>\r\n            <Form.Item name={[\"priceLimit\", \"max\"]} noStyle>\r\n              <Input\r\n                type=\"number\"\r\n                min={0}\r\n                className=\"col-span-5\"\r\n                placeholder=\"Maximum\"\r\n              />\r\n            </Form.Item>\r\n          </Input.Group>\r\n        </Form.Item>\r\n        <Form.Item label=\"最近價格\" name=\"currentPrice\">\r\n          <Input.Group className=\"grid grid-cols-11 gap-x-4\">\r\n            <Form.Item name={[\"currentPrice\", \"min\"]} noStyle>\r\n              <Input\r\n                type=\"number\"\r\n                min={0}\r\n                className=\"col-span-5\"\r\n                placeholder=\"Minimum\"\r\n              />\r\n            </Form.Item>\r\n            <span className=\"p-0 col-span-1 text-center\">~</span>\r\n            <Form.Item name={[\"currentPrice\", \"max\"]} noStyle>\r\n              <Input\r\n                type=\"number\"\r\n                min={0}\r\n                className=\"col-span-5\"\r\n                placeholder=\"Maximum\"\r\n              />\r\n            </Form.Item>\r\n          </Input.Group>\r\n        </Form.Item>\r\n        <Form.Item label=\"建立時間\" name=\"createdTime\">\r\n          <DatePicker.RangePicker className=\"w-full\" />\r\n        </Form.Item>\r\n        <Form.Item label=\" \">\r\n          <div className=\"grid grid-cols-2 justify-end gap-4\">\r\n            <Button type=\"primary\" htmlType=\"submit\">\r\n              搜尋\r\n            </Button>\r\n            <Button htmlType=\"reset\">清空</Button>\r\n          </div>\r\n        </Form.Item>\r\n      </Form>\r\n      <Space size=\"small\" className=\"mb-4\">\r\n        <Button type=\"primary\" onClick={() => setVisible(true)}>\r\n          新增股票\r\n        </Button>\r\n        <Button\r\n          type=\"primary\"\r\n          danger\r\n          disabled={!selectStock.length}\r\n          onClick={() => deleteAxios(selectStock)}\r\n        >\r\n          刪除所選股票\r\n        </Button>\r\n      </Space>\r\n      <Table\r\n        dataSource={data}\r\n        rowKey=\"id\"\r\n        columns={[\r\n          {\r\n            title: \"ID\",\r\n            dataIndex: \"id\",\r\n          },\r\n          {\r\n            title: \"最近價格\",\r\n            dataIndex: \"currentPrice\",\r\n          },\r\n          {\r\n            title: \"收盤價格\",\r\n            dataIndex: \"closedPrice\",\r\n          },\r\n          {\r\n            title: \"漲跌幅(%)\",\r\n            dataIndex: \"priceLimit\",\r\n          },\r\n          {\r\n            title: \"類別\",\r\n            dataIndex: \"type\",\r\n            render: (data) => <span>{TYPE_MAPPING[data]}</span>,\r\n          },\r\n          {\r\n            title: \"更新時間\",\r\n            dataIndex: \"updatedTime\",\r\n            width: 200,\r\n            render: (data) => (\r\n              <span>{dayjs(data).format(\"YYYY/MM/DD HH:mm:ss\")}</span>\r\n            ),\r\n          },\r\n          {\r\n            title: \"建立時間\",\r\n            dataIndex: \"createdTime\",\r\n            width: 200,\r\n            render: (data) => (\r\n              <span>{dayjs(data).format(\"YYYY/MM/DD HH:mm:ss\")}</span>\r\n            ),\r\n          },\r\n          {\r\n            title: \"修改 / 刪除\",\r\n            render: (data, record) => (\r\n              <Space size=\"small\">\r\n                <Button\r\n                  type=\"text\"\r\n                  shape=\"circle\"\r\n                  icon={<EditOutlined />}\r\n                  onClick={() => {\r\n                    setEditData(record);\r\n                    setVisible(true);\r\n                  }}\r\n                />\r\n                <Button\r\n                  type=\"text\"\r\n                  shape=\"circle\"\r\n                  icon={<DeleteOutlined />}\r\n                  onClick={() => {\r\n                    deleteAxios([data.id]);\r\n                  }}\r\n                />\r\n              </Space>\r\n            ),\r\n          },\r\n        ]}\r\n        rowSelection={{\r\n          onChange: (key) => {\r\n            setSelectStock(key);\r\n          },\r\n        }}\r\n        pagination={{\r\n          pageSize: pageSize,\r\n          total: totalSize,\r\n          onChange: (page) => {\r\n            setPage(page);\r\n          },\r\n          onShowSizeChange: (cur, size) => {\r\n            setPageSize(size);\r\n          },\r\n        }}\r\n      />\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Stock;\r\n","import React, { useEffect } from \"react\";\r\nimport { Modal, Form, Input, Select } from \"antd\";\r\nimport { defaultAxios, api } from \"../../environment/api\";\r\nimport errorNotification from \"../../utils/errorNotification\";\r\n\r\nconst Create = ({\r\n  visible,\r\n  setVisible,\r\n  defaultValue,\r\n  reset,\r\n  permission = [],\r\n}) => {\r\n  const [form] = Form.useForm();\r\n  useEffect(() => {\r\n    console.log(defaultValue, \"de\");\r\n    if (defaultValue) {\r\n      form.setFieldsValue(defaultValue);\r\n    }\r\n  }, [defaultValue]);\r\n  return (\r\n    <Modal\r\n      title={defaultValue ? \"修改角色\" : \"新增角色\"}\r\n      visible={visible}\r\n      onOk={() => {\r\n        form.submit();\r\n      }}\r\n      onCancel={() => {\r\n        form.resetFields();\r\n        setVisible(false);\r\n      }}\r\n      okText=\"確認\"\r\n      cancelText=\"取消\"\r\n    >\r\n      <Form\r\n        name=\"basic\"\r\n        layout=\"vertical\"\r\n        form={form}\r\n        onFinish={(value) => {\r\n          if (defaultValue) {\r\n            defaultAxios({\r\n              url: api.putRole.url,\r\n              method: api.putRole.method,\r\n              data: { ...value, id: defaultValue.id },\r\n            })\r\n              .catch((err) => {\r\n                errorNotification(err?.response?.data);\r\n              })\r\n              .finally(() => {\r\n                reset(Math.random());\r\n                form.resetFields();\r\n                setVisible(false);\r\n              });\r\n          } else {\r\n            defaultAxios({\r\n              url: api.postRole.url,\r\n              method: api.postRole.method,\r\n              data: value,\r\n            })\r\n              .catch((err) => {\r\n                errorNotification(err?.response?.data);\r\n              })\r\n              .finally(() => {\r\n                reset(Math.random());\r\n                form.resetFields();\r\n                setVisible(false);\r\n              });\r\n          }\r\n\r\n          console.log(value);\r\n        }}\r\n        initialValues={{ remember: true }}\r\n      >\r\n        <Form.Item\r\n          label=\"角色名稱\"\r\n          name=\"name\"\r\n          rules={[{ required: true, message: \"請輸入角色\" }]}\r\n        >\r\n          <Input placeholder=\"請輸入角色名稱\" />\r\n        </Form.Item>\r\n        <Form.Item\r\n          label=\"每日請求上限\"\r\n          name=\"totalApiTime\"\r\n          rules={[\r\n            { required: true, message: \"請輸入上限\" },\r\n            {\r\n              validator: (_, value) => {\r\n                if (value > 0) return Promise.resolve();\r\n                return Promise.reject(\"不可小於1\");\r\n              },\r\n            },\r\n          ]}\r\n        >\r\n          <Input type=\"number\" placeholder=\"請輸入數字\" />\r\n        </Form.Item>\r\n        <Form.Item\r\n          label=\"可瀏覽頁面\"\r\n          name=\"permissions\"\r\n          rules={[{ required: true, message: \"請選擇\" }]}\r\n        >\r\n          <Select\r\n            mode=\"multiple\"\r\n            placeholder=\"請選擇\"\r\n            options={permission.map((val) => ({ value: val, label: val }))}\r\n          />\r\n        </Form.Item>\r\n      </Form>\r\n    </Modal>\r\n  );\r\n};\r\n\r\nexport default Create;\r\n","import React, { useEffect, useState } from \"react\";\r\nimport { defaultAxios, api } from \"../../environment/api\";\r\nimport errorNotification from \"../../utils/errorNotification\";\r\nimport { Table, Button, Row, Col, Modal, Input, Typography } from \"antd\";\r\nimport {\r\n  EditOutlined,\r\n  DeleteOutlined,\r\n  ExclamationCircleOutlined,\r\n} from \"@ant-design/icons\";\r\nimport Create from \"./create\";\r\nimport dayjs from \"dayjs\";\r\n\r\nconst { confirm } = Modal;\r\n\r\nconst { Title } = Typography;\r\nconst RoleManagement = () => {\r\n  const [roleData, setRoleData] = useState([]);\r\n  const [permissionData, setPermissionData] = useState([]);\r\n  const [page, setPage] = useState(1);\r\n  const [pageSize, setPageSize] = useState(20);\r\n  const [totalSize, setTotalSize] = useState(0);\r\n  const [visible, setVisible] = useState(false);\r\n  const [reset, setReset] = useState(0);\r\n  const [editValue, setEditValue] = useState();\r\n  const [checked, setChecked] = useState([]);\r\n  const [searchCondition, setSearchCondition] = useState({});\r\n\r\n  function showDeleteConfirm(id) {\r\n    confirm({\r\n      title: \"確定要刪除?\",\r\n      icon: <ExclamationCircleOutlined />,\r\n      content: \"刪除後將無法復原\",\r\n      okText: \"確定\",\r\n      okType: \"danger\",\r\n      cancelText: \"取消\",\r\n      onOk() {\r\n        defaultAxios({\r\n          url: api.deleteRole.url,\r\n          method: api.deleteRole.method,\r\n          data: {\r\n            id,\r\n          },\r\n        })\r\n          .catch((err) => {\r\n            errorNotification(err?.response?.data);\r\n          })\r\n          .finally(() => {\r\n            setChecked([]);\r\n            setReset(Math.random());\r\n          });\r\n      },\r\n    });\r\n  }\r\n\r\n  useEffect(() => {\r\n    defaultAxios({\r\n      url: api.getRolePermission.url,\r\n      method: api.getRolePermission.method,\r\n    })\r\n      .then((res) => {\r\n        console.log(res.data);\r\n        setPermissionData(res.data);\r\n      })\r\n      .catch((err) => {\r\n        errorNotification(err?.response?.data);\r\n      });\r\n  }, []);\r\n\r\n  useEffect(() => {\r\n    defaultAxios({\r\n      url: api.getRole.url,\r\n      method: api.getRole.method,\r\n      params: {\r\n        ...searchCondition,\r\n        page: { page, pageSize },\r\n      },\r\n    })\r\n      .then((res) => {\r\n        console.log(res.data);\r\n        setRoleData(res.data.content);\r\n        setTotalSize(res.data.totalSize);\r\n      })\r\n      .catch((err) => {\r\n        errorNotification(err?.response?.data);\r\n      });\r\n  }, [page, pageSize, reset]);\r\n\r\n  const rowSelection = {\r\n    selectedRowKeys: checked,\r\n    onChange: (selectedRowKeys, selectedRows) => {\r\n      setChecked(selectedRows.map((deta) => deta.id));\r\n    },\r\n    preserveSelectedRowKeys: false,\r\n  };\r\n  return (\r\n    <div className=\"px-10\">\r\n      <Create\r\n        visible={visible}\r\n        setVisible={setVisible}\r\n        reset={setReset}\r\n        defaultValue={editValue}\r\n        permission={permissionData}\r\n      />\r\n      <Title level={5}>條件搜尋</Title>\r\n      <Row\r\n        className=\"mb-4 border border-gray-200 p-4\"\r\n        justify=\"space-around\"\r\n        align=\"bottom\"\r\n      >\r\n        <Col span={6}>\r\n          名稱\r\n          <Input\r\n            placeholder=\"輸入名稱\"\r\n            size=\"middle\"\r\n            onChange={(e) => {\r\n              setSearchCondition({\r\n                ...searchCondition,\r\n                name: e.target.value,\r\n              });\r\n            }}\r\n          />\r\n        </Col>\r\n        <Col span={2}>\r\n          <Button\r\n            onClick={() => {\r\n              setReset(Math.random());\r\n            }}\r\n          >\r\n            搜尋\r\n          </Button>\r\n        </Col>\r\n      </Row>\r\n      <div className=\"flex justify-end my-5\">\r\n        <Button\r\n          disabled={!checked.length}\r\n          type=\"default\"\r\n          className=\"mr-4\"\r\n          onClick={() => {\r\n            showDeleteConfirm(checked);\r\n          }}\r\n        >\r\n          刪除勾選\r\n        </Button>\r\n        <Button\r\n          type=\"primary\"\r\n          onClick={() => {\r\n            setEditValue(null);\r\n            setVisible(true);\r\n          }}\r\n        >\r\n          新增角色\r\n        </Button>\r\n      </div>\r\n      <Table\r\n        rowKey=\"id\"\r\n        rowSelection={{\r\n          type: \"checkbox\",\r\n          ...rowSelection,\r\n        }}\r\n        columns={[\r\n          {\r\n            title: \"名稱\",\r\n            dataIndex: \"name\",\r\n          },\r\n          {\r\n            title: \"每日請求上限\",\r\n            dataIndex: \"totalApiTime\",\r\n          },\r\n          {\r\n            title: \"允許頁面\",\r\n            dataIndex: \"permissions\",\r\n            render: (data) => (\r\n              <span className=\"whitespace-pre-line\">\r\n                {data.reduce((prev, curr) => prev + curr.id + \"\\n\", \"\")}\r\n              </span>\r\n            ),\r\n          },\r\n          {\r\n            title: \"創建時間\",\r\n            dataIndex: \"createdTime\",\r\n            width: 200,\r\n            render: (data) => (\r\n              <span>{dayjs(data).format(\"YYYY/MM/DD HH:mm:ss\")}</span>\r\n            ),\r\n          },\r\n          {\r\n            title: \"更新時間\",\r\n            dataIndex: \"updatedTime\",\r\n            width: 200,\r\n            render: (data) => (\r\n              <span>{dayjs(data).format(\"YYYY/MM/DD HH:mm:ss\")}</span>\r\n            ),\r\n          },\r\n          {\r\n            title: \"狀態\",\r\n            dataIndex: \"action\",\r\n            render: (_, record) => (\r\n              <span>\r\n                <Button\r\n                  type=\"link\"\r\n                  shape=\"circle\"\r\n                  className=\"inline-flex justify-center items-center mr-2\"\r\n                  icon={<EditOutlined />}\r\n                  onClick={() => {\r\n                    setEditValue({\r\n                      id: record.id,\r\n                      name: record.name,\r\n                      totalApiTime: record.totalApiTime,\r\n                      permissions: record.permissions.map((data) => data.id),\r\n                    });\r\n                    setVisible(true);\r\n                  }}\r\n                />\r\n                <Button\r\n                  type=\"link\"\r\n                  shape=\"circle\"\r\n                  className=\"inline-flex justify-center items-center\"\r\n                  onClick={() => showDeleteConfirm([record.id])}\r\n                  icon={<DeleteOutlined />}\r\n                />\r\n              </span>\r\n            ),\r\n          },\r\n        ]}\r\n        dataSource={roleData}\r\n        pagination={{\r\n          pageSize: pageSize,\r\n          total: totalSize,\r\n          onChange: (page) => {\r\n            setPage(page);\r\n          },\r\n          onShowSizeChange: (cur, size) => {\r\n            setPageSize(size);\r\n          },\r\n        }}\r\n        sticky\r\n      />\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default RoleManagement;\r\n","import React, { useEffect } from \"react\";\r\nimport { Modal, Form, Input, Select } from \"antd\";\r\nimport { defaultAxios, api } from \"../../environment/api\";\r\nimport errorNotification from \"../../utils/errorNotification\";\r\n\r\nconst Create = ({ visible, setVisible, defaultValue, reset, role = [] }) => {\r\n  const [form] = Form.useForm();\r\n  useEffect(() => {\r\n    if (defaultValue) {\r\n      form.setFieldsValue(defaultValue);\r\n    }\r\n  }, [defaultValue]);\r\n  return (\r\n    <Modal\r\n      title={defaultValue ? \"修改權限\" : \"新增權限\"}\r\n      visible={visible}\r\n      onOk={() => {\r\n        form.submit();\r\n      }}\r\n      onCancel={() => {\r\n        form.resetFields();\r\n        setVisible(false);\r\n      }}\r\n      okText=\"確認\"\r\n      cancelText=\"取消\"\r\n    >\r\n      <Form\r\n        name=\"basic\"\r\n        layout=\"vertical\"\r\n        form={form}\r\n        onFinish={(value) => {\r\n          const { restApiTime, ...other } = value;\r\n          if (defaultValue) {\r\n            defaultAxios({\r\n              url: api.putInvestor.url,\r\n              method: api.putInvestor.method,\r\n              data: {\r\n                id: defaultValue.id,\r\n                restApiTime: parseInt(restApiTime),\r\n                ...other,\r\n              },\r\n            })\r\n              .catch((err) => {\r\n                errorNotification(err?.response?.data);\r\n              })\r\n              .finally(() => {\r\n                reset(Math.random());\r\n                form.resetFields();\r\n                setVisible(false);\r\n              });\r\n          } else {\r\n            defaultAxios({\r\n              url: api.postInvestor.url,\r\n              method: api.postInvestor.method,\r\n              data: {\r\n                restApiTime: parseInt(restApiTime),\r\n                ...other,\r\n              },\r\n            })\r\n              .catch((err) => {\r\n                errorNotification(err?.response?.data);\r\n              })\r\n              .finally(() => {\r\n                reset(Math.random());\r\n                form.resetFields();\r\n                setVisible(false);\r\n              });\r\n          }\r\n        }}\r\n        initialValues={{ remember: true }}\r\n      >\r\n        <Form.Item\r\n          label=\"帳戶名稱\"\r\n          name=\"account\"\r\n          rules={[{ required: true, message: \"請輸入帳戶名稱\" }]}\r\n        >\r\n          <Input placeholder=\"請輸入帳戶名稱\" />\r\n        </Form.Item>\r\n        <Form.Item\r\n          label=\"密碼\"\r\n          name=\"password\"\r\n          rules={[{ required: !defaultValue, message: \"請輸入密碼\" }]}\r\n        >\r\n          <Input placeholder=\"請輸入密碼\" />\r\n        </Form.Item>\r\n        <Form.Item\r\n          label=\"剩餘請求次數\"\r\n          name=\"restApiTime\"\r\n          rules={[\r\n            { required: defaultValue ? true : false, message: \"請輸入次數\" },\r\n          ]}\r\n          style={{ display: defaultValue ? undefined : \"none\" }}\r\n        >\r\n          <Input type=\"number\" placeholder=\"請輸入數字\" />\r\n        </Form.Item>\r\n        <Form.Item\r\n          label=\"角色\"\r\n          name=\"roleId\"\r\n          rules={[{ required: defaultValue ? true : false, message: \"請選擇\" }]}\r\n          style={{ display: defaultValue ? undefined : \"none\" }}\r\n        >\r\n          <Select\r\n            placeholder=\"請選擇\"\r\n            options={role?.map((val) => ({ value: val.id, label: val.name }))}\r\n          />\r\n        </Form.Item>\r\n      </Form>\r\n    </Modal>\r\n  );\r\n};\r\n\r\nexport default Create;\r\n","import React, { useEffect, useState } from \"react\";\r\nimport { defaultAxios, api } from \"../../environment/api\";\r\nimport errorNotification from \"../../utils/errorNotification\";\r\nimport { Table, Button, Row, Col, Select, Modal, Typography } from \"antd\";\r\nimport {\r\n  EditOutlined,\r\n  DeleteOutlined,\r\n  ExclamationCircleOutlined,\r\n} from \"@ant-design/icons\";\r\nimport Create from \"./create\";\r\nimport dayjs from \"dayjs\";\r\n\r\nconst { confirm } = Modal;\r\nconst { Title } = Typography;\r\nconst InvestorManagement = () => {\r\n  const [investorData, setInvestorData] = useState([]);\r\n  const [roleData, setRoleData] = useState([]);\r\n  const [page, setPage] = useState(1);\r\n  const [pageSize, setPageSize] = useState(20);\r\n  const [totalSize, setTotalSize] = useState(0);\r\n  const [visible, setVisible] = useState(false);\r\n  const [reset, setReset] = useState(0);\r\n  const [editValue, setEditValue] = useState();\r\n  const [checked, setChecked] = useState([]);\r\n\r\n  function showDeleteConfirm(id) {\r\n    confirm({\r\n      title: \"確定要刪除?\",\r\n      icon: <ExclamationCircleOutlined />,\r\n      content: \"刪除後將無法復原\",\r\n      okText: \"確定\",\r\n      okType: \"danger\",\r\n      cancelText: \"取消\",\r\n      onOk() {\r\n        defaultAxios({\r\n          url: api.deleteInvestor.url,\r\n          method: api.deleteInvestor.method,\r\n          data: {\r\n            id,\r\n          },\r\n        })\r\n          .catch((err) => {\r\n            errorNotification(err?.response?.data);\r\n          })\r\n          .finally(() => {\r\n            setChecked([]);\r\n            setReset(Math.random());\r\n          });\r\n      },\r\n    });\r\n  }\r\n\r\n  useEffect(() => {\r\n    defaultAxios({\r\n      url: api.getRole.url,\r\n      method: api.getRole.method,\r\n    })\r\n      .then((res) => {\r\n        console.log(res.data);\r\n        setRoleData(res.data.content);\r\n      })\r\n      .catch((err) => {\r\n        errorNotification(err?.response?.data);\r\n      });\r\n  }, []);\r\n\r\n  useEffect(() => {\r\n    defaultAxios({\r\n      url: api.getInvestor.url,\r\n      method: api.getInvestor.method,\r\n      params: {\r\n        page: { page, pageSize },\r\n      },\r\n    })\r\n      .then((res) => {\r\n        console.log(res.data);\r\n        setInvestorData(res.data.content);\r\n        setTotalSize(res.data.totalSize);\r\n      })\r\n      .catch((err) => {\r\n        errorNotification(err?.response?.data);\r\n      });\r\n  }, [page, pageSize, reset]);\r\n\r\n  const rowSelection = {\r\n    selectedRowKeys: checked,\r\n    onChange: (selectedRowKeys, selectedRows) => {\r\n      setChecked(selectedRows.map((deta) => deta.id));\r\n    },\r\n    preserveSelectedRowKeys: false,\r\n  };\r\n  return (\r\n    <div className=\"px-10\">\r\n      <Create\r\n        visible={visible}\r\n        setVisible={setVisible}\r\n        reset={setReset}\r\n        defaultValue={editValue}\r\n        role={roleData}\r\n      />\r\n      <div className=\"flex justify-end my-5\">\r\n        <Button\r\n          disabled={!checked.length}\r\n          type=\"default\"\r\n          className=\"mr-4\"\r\n          onClick={() => showDeleteConfirm(checked)}\r\n        >\r\n          刪除勾選\r\n        </Button>\r\n        <Button\r\n          type=\"primary\"\r\n          onClick={() => {\r\n            setEditValue(null);\r\n            setVisible(true);\r\n          }}\r\n        >\r\n          新增帳戶\r\n        </Button>\r\n      </div>\r\n      <Table\r\n        rowKey=\"id\"\r\n        rowSelection={{\r\n          type: \"checkbox\",\r\n          ...rowSelection,\r\n        }}\r\n        columns={[\r\n          {\r\n            title: \"名稱\",\r\n            dataIndex: \"account\",\r\n          },\r\n          {\r\n            title: \"憑證\",\r\n            dataIndex: \"token\",\r\n          },\r\n\r\n          {\r\n            title: \"剩餘請求次數\",\r\n            dataIndex: \"restApiTime\",\r\n          },\r\n          {\r\n            title: \"角色\",\r\n            dataIndex: \"role\",\r\n            render: (data) => data.name,\r\n          },\r\n          {\r\n            title: \"創建時間\",\r\n            dataIndex: \"createdTime\",\r\n            width: 200,\r\n            render: (data) => (\r\n              <span>{dayjs(data).format(\"YYYY/MM/DD HH:mm:ss\")}</span>\r\n            ),\r\n          },\r\n          {\r\n            title: \"更新時間\",\r\n            dataIndex: \"updatedTime\",\r\n            width: 200,\r\n            render: (data) => (\r\n              <span>{dayjs(data).format(\"YYYY/MM/DD HH:mm:ss\")}</span>\r\n            ),\r\n          },\r\n          {\r\n            title: \"狀態\",\r\n            dataIndex: \"action\",\r\n            render: (_, record) => (\r\n              <span>\r\n                <Button\r\n                  type=\"link\"\r\n                  shape=\"circle\"\r\n                  className=\"inline-flex justify-center items-center mr-2\"\r\n                  icon={<EditOutlined />}\r\n                  onClick={() => {\r\n                    setEditValue({\r\n                      id: record.id,\r\n                      account: record.account,\r\n                      password: record.password,\r\n                      restApiTime: record.restApiTime,\r\n                      roleId: record.role.id,\r\n                    });\r\n                    setVisible(true);\r\n                  }}\r\n                />\r\n                <Button\r\n                  type=\"link\"\r\n                  shape=\"circle\"\r\n                  className=\"inline-flex justify-center items-center\"\r\n                  onClick={() => showDeleteConfirm([record.id])}\r\n                  icon={<DeleteOutlined />}\r\n                />\r\n              </span>\r\n            ),\r\n          },\r\n        ]}\r\n        dataSource={investorData}\r\n        pagination={{\r\n          pageSize: pageSize,\r\n          total: totalSize,\r\n          onChange: (page) => {\r\n            setPage(page);\r\n          },\r\n          onShowSizeChange: (cur, size) => {\r\n            setPageSize(size);\r\n          },\r\n        }}\r\n        sticky\r\n      />\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default InvestorManagement;\r\n","import Q1Chart from \"../src/pages/q1-chart\";\r\nimport Case from \"../src/pages/case\";\r\nimport FrequentData from \"../src/pages/frequent-data\";\r\nimport RealDataUpload from \"../src/pages/real-data-upload\";\r\nimport Simulator from \"../src/pages/simulator\";\r\nimport OrderTable from \"../src/pages/table/order-table\";\r\nimport PriceTable from \"../src/pages/table/price-table\";\r\nimport QuickOrder from \"../src/pages/quick-order\";\r\nimport ReplayChart from \"../src/pages/replay\";\r\nimport Stock from \"../src/pages/stock\";\r\nimport RoleManagement from \"../src/pages/role-manage\";\r\nimport InvestorManagement from \"../src/pages/investor-manage\";\r\n\r\nconst AUTH_MAPPING_DATA = {\r\n  stock: Stock,\r\n  \"investor-management\": InvestorManagement,\r\n  \"role-management\": RoleManagement,\r\n  \"Q1-chart\": Q1Chart,\r\n  \"replay-chart\": ReplayChart,\r\n  case: Case,\r\n  simulator: Simulator,\r\n  \"quick-order\": QuickOrder,\r\n  \"order-table\": OrderTable,\r\n  \"price-table\": PriceTable,\r\n  \"real-data-upload\": RealDataUpload,\r\n  \"frequent-data\": FrequentData,\r\n};\r\n\r\nconst LINK_MAPPING_DATA = {\r\n  stock: \"股票管理\",\r\n  \"investor-management\": \"帳戶管理\",\r\n  \"role-management\": \"角色管理\",\r\n  \"Q1-chart\": \"Q1 圖表\",\r\n  \"replay-chart\": \"重播紀錄\",\r\n  case: \"情境管理\",\r\n  simulator: \"模擬下單\",\r\n  \"quick-order\": \"閃電下單\",\r\n  \"order-table\": \"委託紀錄表單\",\r\n  \"price-table\": \"成交紀錄表單\",\r\n  \"real-data-upload\": \"上傳真實資料\",\r\n  \"frequent-data\": \"高頻資料\",\r\n};\r\n\r\nexport { AUTH_MAPPING_DATA, LINK_MAPPING_DATA };\r\n","import \"antd/dist/antd.css\";\r\n\r\nimport { HashRouter, Redirect, Route, Switch } from \"react-router-dom\";\r\n\r\nimport EchartExample from \"./pages/echart-example\";\r\nimport Main from \"./pages/main\";\r\nimport Login from \"./pages/login\";\r\nimport RouterLink from \"./component/router-link\";\r\nimport { AUTH_MAPPING_DATA } from \"./authData\";\r\n\r\nimport { useEffect, useState } from \"react\";\r\nimport { settingToken, api, defaultAxios } from \"./environment/api\";\r\nconst events = require(\"events\");\r\n\r\nexport const appEventEmitter = new events.EventEmitter();\r\n\r\nconst App = () => {\r\n  const [router, setRouter] = useState(\"\");\r\n  const [auth, setAuth] = useState(!!localStorage.getItem(\"token\"));\r\n  const [token, setToken] = useState(localStorage.getItem(\"token\") || \"\");\r\n  const [permission, setPermission] = useState(\r\n    JSON.parse(localStorage.getItem(\"permission\")) || []\r\n  );\r\n\r\n  const GuardedRoute = ({ component: Component, ...rest }) => {\r\n    setRouter(rest.path);\r\n    return (\r\n      <Route\r\n        {...rest}\r\n        render={(props) =>\r\n          // auth ? (\r\n            <Component {...props} />\r\n          // ) : (\r\n          //   <Redirect to=\"/stock-font-end/login/\" />\r\n          // )\r\n        }\r\n      />\r\n    );\r\n  };\r\n  useEffect(() => {\r\n    appEventEmitter.on(\"unauthorization\", (msg) => {\r\n      localStorage.removeItem(\"token\");\r\n      // setAuth(false);\r\n    });\r\n  }, []);\r\n\r\n  useEffect(() => {\r\n    setAuth(!!token);\r\n    settingToken(token);\r\n  }, [token]);\r\n\r\n  // useEffect(() => {\r\n  //   defaultAxios({\r\n  //     url: api.getRolePermission.url,\r\n  //     method: api.getRolePermission.method,\r\n  //   })\r\n  //     .then((res) => {\r\n  //       setPermission(res.data);\r\n  //     })\r\n  //     .catch((err) => {\r\n  //       errorNotification(err?.response?.data);\r\n  //     });\r\n  // }, [router]);\r\n\r\n  return (\r\n    <HashRouter>\r\n      <div className=\"flex \">\r\n        {/* {<RouterLink setToken={setToken} permission={['Q1-chart', 'replay-chart']} />} */}\r\n        <div className=\"flex-1 my-10 \">\r\n          <Switch>\r\n            {/* <Route\r\n              path=\"/stock-font-end/login/\"\r\n              component={() => (\r\n                <Login setToken={setToken} setPermission={setPermission} />\r\n              )}\r\n            /> */}\r\n            {/* <Route path=\"/stock-font-end/\" exact component={Main} /> */}\r\n            <Route\r\n              path=\"/stock-font-end/echart-example\"\r\n              component={EchartExample}\r\n            />\r\n            {['Q1-chart', 'replay-chart'].map((data) => (\r\n              <Route\r\n                key={Math.random()}\r\n                path={`/stock-font-end/${data}`}\r\n                component={AUTH_MAPPING_DATA[data]}\r\n              />\r\n            ))}\r\n            {/* <Redirect\r\n              from=\"*\"\r\n              to={auth ? \"/stock-font-end/\" : \"/stock-font-end/login\"}\r\n            /> */}\r\n          </Switch>\r\n        </div>\r\n      </div>\r\n    </HashRouter>\r\n  );\r\n};\r\n\r\nexport default App;\r\n","import React from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport './index.css';\r\nimport App from './App.jsx';\r\n\r\nReactDOM.render(\r\n  <React.StrictMode>\r\n    <App />\r\n  </React.StrictMode>,\r\n  document.getElementById('root')\r\n);\r\n"],"sourceRoot":""}